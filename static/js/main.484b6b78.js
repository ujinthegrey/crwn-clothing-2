/*! For license information please see main.484b6b78.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ee(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,It,St,Et=!1,Tt=[],Ct=null,Nt=null,At=null,Dt=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Dt.forEach(Vt),Pt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Dt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return In}var En=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Dn),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Ur(e,0)}function $n(e){if(H(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&$n(Hn)){var t=[];Wn(t,Hn,e,we(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Hn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ir={};function Sr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),s(t,[e])}for(var Rr=0;Rr<Dr.length;Rr++){var Or=Dr[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Kn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Si(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ei(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ei(Ci,e)):Si(Ni),Ei(Ni,n)}var Ui=null,Vi=!1,ji=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,zi),i}finally{kt=t,ji=!1}}return null}var qi=b.ReactCurrentBatchConfig;function Ki(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Wi=Ii(null),Gi=null,Hi=null,Qi=null;function $i(){Qi=Hi=Gi=null}function Yi(e){var t=Wi.current;Si(Wi),e._currentValue=t}function Ji(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xi(e,t){Gi=e,Qi=Hi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Zi(e){var t=e._currentValue;if(Qi!==e)if(e={context:e,memoizedValue:t,next:null},null===Hi){if(null===Gi)throw Error(a(308));Hi=e,Gi.dependencies={lanes:0,firstContext:e}}else Hi=Hi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:ta=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Rs|=o,e.lanes=o,e.memoizedState=f}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var la=(new r.Component).refs;function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Js(),i=Xs(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Js(),i=Xs(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Js(),r=Xs(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=Zs(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function pa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Zi(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ma(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Zi(a):(a=Pi(t)?Ai:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),sa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ya=[],ga=0,ka=null,ba=0,wa=[],xa=0,_a=null,Ia=1,Sa="";function Ea(e,t){ya[ga++]=ba,ya[ga++]=ka,ka=e,ba=t}function Ta(e,t,n){wa[xa++]=Ia,wa[xa++]=Sa,wa[xa++]=_a,_a=e;var r=Ia;e=Sa;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ia=1<<32-ot(t)+i|n<<i|r,Sa=a+e}else Ia=1<<a|n<<i|r,Sa=e}function Ca(e){null!==e.return&&(Ea(e,1),Ta(e,1,0))}function Na(e){for(;e===ka;)ka=ya[--ga],ya[ga]=null,ba=ya[--ga],ya[ga]=null;for(;e===_a;)_a=wa[--xa],wa[xa]=null,Sa=wa[--xa],wa[xa]=null,Ia=wa[--xa],wa[xa]=null}var Aa=null,Da=null,Pa=!1,Ra=null;function Oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function La(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Aa=e,Da=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Aa=e,Da=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==_a?{id:Ia,overflow:Sa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Aa=e,Da=null,!0);default:return!1}}function Ma(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fa(e){if(Pa){var t=Da;if(t){var n=t;if(!La(e,t)){if(Ma(e))throw Error(a(418));t=ci(n.nextSibling);var r=Aa;t&&La(e,t)?Oa(r,n):(e.flags=-4097&e.flags|2,Pa=!1,Aa=e)}}else{if(Ma(e))throw Error(a(418));e.flags=-4097&e.flags|2,Pa=!1,Aa=e}}}function Ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function Va(e){if(e!==Aa)return!1;if(!Pa)return Ua(e),Pa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Da)){if(Ma(e)){for(e=Da;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)Oa(e,t),t=ci(t.nextSibling)}if(Ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Da=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Da=null}}else Da=Aa?ci(e.stateNode.nextSibling):null;return!0}function ja(){Da=Aa=null,Pa=!1}function Ba(e){null===Ra?Ra=[e]:Ra.push(e)}function za(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function Wa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Ka(a)===t.type)?((r=i(t,n.props)).ref=za(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=za(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=za(e,null,t),n.return=e,n;case x:return(t=Fc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Oc(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);qa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),Pa&&Ea(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Pa&&Ea(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),Pa&&Ea(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),Pa&&Ea(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return Pa&&Ea(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Pa&&Ea(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Ka(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=za(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Oc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Rc(o.type,o.key,o.props,null,r.mode,s)).ref=za(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);qa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ga=Wa(!0),Ha=Wa(!1),Qa={},$a=Ii(Qa),Ya=Ii(Qa),Ja=Ii(Qa);function Xa(e){if(e===Qa)throw Error(a(174));return e}function Za(e,t){switch(Ei(Ja,t),Ei(Ya,e),Ei($a,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si($a),Ei($a,t)}function eo(){Si($a),Si(Ya),Si(Ja)}function to(e){Xa(Ja.current);var t=Xa($a.current),n=se(t,e.type);t!==n&&(Ei(Ya,e),Ei($a,n))}function no(e){Ya.current===e&&(Si($a),Si(Ya))}var ro=Ii(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var uo=b.ReactCurrentDispatcher,so=b.ReactCurrentBatchConfig,co=0,lo=null,fo=null,ho=null,po=!1,vo=!1,mo=0,yo=0;function go(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function bo(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?ru:iu,e=n(r,i),vo){o=0;do{if(vo=!1,mo=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,uo.current=au,e=n(r,i)}while(vo)}if(uo.current=nu,t=null!==fo&&null!==fo.next,co=0,ho=fo=lo=null,po=!1,t)throw Error(a(300));return e}function wo(){var e=0!==mo;return mo=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?lo.memoizedState=ho=e:ho=ho.next=e,ho}function _o(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?lo.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?lo.memoizedState=ho=e:ho=ho.next=e}return ho}function Io(e,t){return"function"===typeof t?t(e):t}function So(e){var t=_o(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((co&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,lo.lanes|=f,Rs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Rs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=_o(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Co(e,t){var n=lo,r=_o(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Vo(Do.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Oo(9,Ao.bind(null,n,r,i,t),void 0,null),null===Es)throw Error(a(349));0!==(30&co)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Po(t)&&Zs(e,1,-1)}function Do(e,t,n){return n((function(){Po(t)&&Zs(e,1,-1)}))}function Po(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Ro(e){var t=xo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=Jo.bind(null,lo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return _o().memoizedState}function Mo(e,t,n,r){var i=xo();lo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=_o();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Oo(t,n,a,r))}lo.flags|=e,i.memoizedState=Oo(1|t,n,a,r)}function Uo(e,t){return Mo(8390656,8,e,t)}function Vo(e,t){return Fo(2048,8,e,t)}function jo(e,t){return Fo(4,2,e,t)}function Bo(e,t){return Fo(4,4,e,t)}function zo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,zo.bind(null,t,e),n)}function Ko(){}function Wo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),lo.lanes|=n,Rs|=n,e.baseState=!0),t)}function Qo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{kt=n,so.transition=r}}function $o(){return _o().memoizedState}function Yo(e,t,n){var r=Xs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e)?Zo(t,n):(eu(e,t,n),null!==(e=Zs(e,r,n=Js()))&&tu(e,t,r))}function Jo(e,t,n){var r=Xs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))Zo(t,i);else{eu(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o))return}catch(s){}null!==(e=Zs(e,r,n=Js()))&&tu(e,t,r)}}function Xo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Zo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eu(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tu(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var nu={readContext:Zi,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ru={readContext:Zi,useCallback:function(e,t){return xo().memoizedState=[e,void 0===t?null:t],e},useContext:Zi,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=xo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yo.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:Ro,useDebugValue:Ko,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=Qo.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=xo();if(Pa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Es)throw Error(a(349));0!==(30&co)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Do.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=xo(),t=Es.identifierPrefix;if(Pa){var n=Sa;t=":"+t+"R"+(n=(Ia&~(1<<32-ot(Ia)-1)).toString(32)+n),0<(n=mo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=yo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iu={readContext:Zi,useCallback:Wo,useContext:Zi,useEffect:Vo,useImperativeHandle:qo,useInsertionEffect:jo,useLayoutEffect:Bo,useMemo:Go,useReducer:So,useRef:Lo,useState:function(){return So(Io)},useDebugValue:Ko,useDeferredValue:function(e){return Ho(_o(),fo.memoizedState,e)},useTransition:function(){return[So(Io)[0],_o().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:$o,unstable_isNewReconciler:!1},au={readContext:Zi,useCallback:Wo,useContext:Zi,useEffect:Vo,useImperativeHandle:qo,useInsertionEffect:jo,useLayoutEffect:Bo,useMemo:Go,useReducer:Eo,useRef:Lo,useState:function(){return Eo(Io)},useDebugValue:Ko,useDeferredValue:function(e){var t=_o();return null===fo?t.memoizedState=e:Ho(t,fo.memoizedState,e)},useTransition:function(){return[Eo(Io)[0],_o().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:$o,unstable_isNewReconciler:!1};function ou(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var su,cu,lu,fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bs||(Bs=!0,zs=r),uu(0,t)},n}function du(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uu(0,t),"function"!==typeof r&&(null===qs?qs=new Set([this]):qs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function vu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function mu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function yu(e,t){if(!Pa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ku(e,t,n){var r=t.pendingProps;switch(Na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gu(t),null;case 1:case 17:return Pi(t.type)&&Ri(),gu(t),null;case 3:return r=t.stateNode,eo(),Si(Ni),Si(Ci),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Va(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Ra&&(ac(Ra),Ra=null))),gu(t),null;case 5:no(t);var i=Xa(Ja.current);if(n=t.type,null!==e&&null!=t.stateNode)cu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return gu(t),null}if(e=Xa($a.current),Va(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,su(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return gu(t),null;case 6:if(e&&null!=t.stateNode)lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Xa(Ja.current),Xa($a.current),Va(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=Aa))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return gu(t),null;case 13:if(Si(ro),r=t.memoizedState,Pa&&null!==Da&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Da;r;)r=ci(r.nextSibling);return ja(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Va(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[hi]=t}else ja(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return gu(t),null}return null!==Ra&&(ac(Ra),Ra=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Va(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Ds&&(Ds=3):pc())),null!==t.updateQueue&&(t.flags|=4),gu(t),null);case 4:return eo(),null===e&&zr(t.stateNode.containerInfo),gu(t),null;case 10:return Yi(t.type._context),gu(t),null;case 19:if(Si(ro),null===(o=t.memoizedState))return gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)yu(o,!1);else{if(0!==Ds||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=io(e))){for(t.flags|=128,yu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Vs&&(t.flags|=128,r=!0,yu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),yu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Pa)return gu(t),null}else 2*Je()-o.renderingStartTime>Vs&&1073741824!==n&&(t.flags|=128,r=!0,yu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ro.current,Ei(ro,r?1&n|2:1&n),t):(gu(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ns)&&(gu(t),6&t.subtreeFlags&&(t.flags|=8192)):gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}su=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xa($a.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var bu=b.ReactCurrentOwner,wu=!1;function xu(e,t,n,r){t.child=null===e?Ha(t,null,n,r):Ga(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Xi(t,i),r=bo(e,t,n,r,a,i),n=wo(),null===e||wu?(Pa&&n&&Ca(t),t.flags|=1,xu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Iu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Cu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(As,Ns),Ns|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(As,Ns),Ns|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(As,Ns),Ns|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(As,Ns),Ns|=r;return xu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Di(t,a),Xi(t,i),n=bo(e,t,n,r,a,i),r=wo(),null===e||wu?(Pa&&r&&Ca(t),t.flags|=1,xu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Nu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Xi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ma(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Zi(c):c=Di(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&va(t,o,r,c),ta=!1;var h=t.memoizedState;o.state=h,sa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||ta?("function"===typeof l&&(fa(t,n,l,r),s=t.memoizedState),(u=ta||da(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ki(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Zi(s):s=Di(t,s=Pi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&va(t,o,r,s),ta=!1,h=t.memoizedState,o.state=h,sa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||ta?("function"===typeof d&&(fa(t,n,d,r),p=t.memoizedState),(c=ta||da(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,bu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ga(t,e.child,null,a),t.child=Ga(t,null,u,a)):xu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Za(e,t.containerInfo)}function Pu(e,t,n,r,i){return ja(),Ba(i),t.flags|=256,xu(e,t,n,r),t.child}var Ru={dehydrated:null,treeContext:null,retryLane:0};function Ou(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lu(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Mu(e,t,n){var r,i=t.pendingProps,o=ro.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(ro,1&o),null===e)return Fa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Lc(o,i,0,null),e=Oc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Ou(n),t.memoizedState=Ru,e):Fu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,ju(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Lc({mode:"visible",children:i.children},o,0,null),(u=Oc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Ga(t,e.child,null,n),t.child.memoizedState=Ou(n),t.memoizedState=Ru,u);if(0===(1&t.mode))t=ju(e,t,n,null);else if("$!"===r.data)t=ju(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),wu||i){if(null!==(i=Es)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Zs(e,i,-1))}pc(),t=ju(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Da=ci(r.nextSibling),Aa=t,Pa=!0,Ra=null,null!==n&&(wa[xa++]=Ia,wa[xa++]=Sa,wa[xa++]=_a,Ia=n.id,Sa=n.overflow,_a=t),(t=Fu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Vu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Ru,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Vu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Ru,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}function Fu(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){var i=e.child;return e=i.sibling,n=Pc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Vu(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Pc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Pc(o,r):(r=Oc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ju(e,t,n,r){return null!==r&&Ba(r),Ga(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ji(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xu(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){switch(Na(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Si(Ni),Si(Ci),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Si(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ja()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ro),null;case 4:return eo(),null;case 10:return Yi(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Gu=!1,Hu=!1,Qu="function"===typeof WeakSet?WeakSet:Set,$u=null;function Yu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function Ju(e,t,n){try{n()}catch(r){_c(e,t,r)}}var Xu=!1;function Zu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Ju(t,n,a)}i=i.next}while(i!==r)}}function es(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ns(e){var t=e.alternate;null!==t&&(e.alternate=null,ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rs(e){return 5===e.tag||3===e.tag||4===e.tag}function is(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function as(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(as(e,t,n),e=e.sibling;null!==e;)as(e,t,n),e=e.sibling}function os(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(os(e,t,n),e=e.sibling;null!==e;)os(e,t,n),e=e.sibling}var us=null,ss=!1;function cs(e,t,n){for(n=n.child;null!==n;)ls(e,t,n),n=n.sibling}function ls(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Hu||Yu(n,t);case 6:var r=us,i=ss;us=null,cs(e,t,n),ss=i,null!==(us=r)&&(ss?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ss?(e=us,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(us,n.stateNode));break;case 4:r=us,i=ss,us=n.stateNode.containerInfo,ss=!0,cs(e,t,n),us=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Hu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Ju(n,t,o),i=i.next}while(i!==r)}cs(e,t,n);break;case 1:if(!Hu&&(Yu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){_c(n,t,u)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:1&n.mode?(Hu=(r=Hu)||null!==n.memoizedState,cs(e,t,n),Hu=r):cs(e,t,n);break;default:cs(e,t,n)}}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qu),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ss=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(null===us)throw Error(a(160));ls(o,u,i),us=null,ss=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){_c(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ds(t,e),t=t.sibling}function ds(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),ps(e),4&r){try{Zu(3,e,e.return),es(3,e)}catch(v){_c(e,e.return,v)}try{Zu(5,e,e.return)}catch(v){_c(e,e.return,v)}}break;case 1:hs(t,e),ps(e),512&r&&null!==n&&Yu(n,n.return);break;case 5:if(hs(t,e),ps(e),512&r&&null!==n&&Yu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(v){_c(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){_c(e,e.return,v)}}break;case 6:if(hs(t,e),ps(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){_c(e,e.return,v)}}break;case 3:if(hs(t,e),ps(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(v){_c(e,e.return,v)}break;case 4:default:hs(t,e),ps(e);break;case 13:hs(t,e),ps(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(Us=Je()),4&r&&fs(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Hu=(f=Hu)||l,hs(t,e),Hu=f):hs(t,e),ps(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,f?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,u=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(v){_c(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){_c(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!l&&0!==(1&e.mode))for($u=e,e=e.child;null!==e;){for(l=$u=e;null!==$u;){switch(h=(f=$u).child,f.tag){case 0:case 11:case 14:case 15:Zu(4,f,f.return);break;case 1:if(Yu(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){_c(d,p,v)}}break;case 5:Yu(f,f.return);break;case 22:if(null!==f.memoizedState){gs(l);continue}}null!==h?(h.return=f,$u=h):gs(l)}e=e.sibling}}break;case 19:hs(t,e),ps(e),4&r&&fs(e);case 21:}}function ps(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rs(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),os(e,is(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;as(e,is(e),o);break;default:throw Error(a(161))}}catch(u){_c(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vs(e,t,n){$u=e,ms(e,t,n)}function ms(e,t,n){for(var r=0!==(1&e.mode);null!==$u;){var i=$u,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Gu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Hu;u=Gu;var c=Hu;if(Gu=o,(Hu=s)&&!c)for($u=i;null!==$u;)s=(o=$u).child,22===o.tag&&null!==o.memoizedState?ks(i):null!==s?(s.return=o,$u=s):ks(i);for(;null!==a;)$u=a,ms(a,t,n),a=a.sibling;$u=i,Gu=u,Hu=c}ys(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$u=a):ys(e)}}function ys(e){for(;null!==$u;){var t=$u;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Hu||es(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Hu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ki(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Hu||512&t.flags&&ts(t)}catch(d){_c(t,t.return,d)}}if(t===e){$u=null;break}if(null!==(n=t.sibling)){n.return=t.return,$u=n;break}$u=t.return}}function gs(e){for(;null!==$u;){var t=$u;if(t===e){$u=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$u=n;break}$u=t.return}}function ks(e){for(;null!==$u;){var t=$u;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(s){_c(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){_c(t,i,s)}}var a=t.return;try{ts(t)}catch(s){_c(t,a,s)}break;case 5:var o=t.return;try{ts(t)}catch(s){_c(t,o,s)}}}catch(s){_c(t,t.return,s)}if(t===e){$u=null;break}var u=t.sibling;if(null!==u){u.return=t.return,$u=u;break}$u=t.return}}var bs,ws=Math.ceil,xs=b.ReactCurrentDispatcher,_s=b.ReactCurrentOwner,Is=b.ReactCurrentBatchConfig,Ss=0,Es=null,Ts=null,Cs=0,Ns=0,As=Ii(0),Ds=0,Ps=null,Rs=0,Os=0,Ls=0,Ms=null,Fs=null,Us=0,Vs=1/0,js=null,Bs=!1,zs=null,qs=null,Ks=!1,Ws=null,Gs=0,Hs=0,Qs=null,$s=-1,Ys=0;function Js(){return 0!==(6&Ss)?Je():-1!==$s?$s:$s=Je()}function Xs(e){return 0===(1&e.mode)?1:0!==(2&Ss)&&0!==Cs?Cs&-Cs:null!==qi.transition?(0===Ys&&(Ys=vt()),Ys):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function Zs(e,t,n){if(50<Hs)throw Hs=0,Qs=null,Error(a(185));var r=ec(e,t);return null===r?null:(yt(r,t,n),0!==(2&Ss)&&r===Es||(r===Es&&(0===(2&Ss)&&(Os|=t),4===Ds&&oc(r,Cs)),nc(r,n),1===t&&0===Ss&&0===(1&e.mode)&&(Vs=Je()+500,Vi&&zi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Es||null!==ea)&&0!==(1&e.mode)&&0===(2&Ss)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Es?Cs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(uc.bind(null,e)):Bi(uc.bind(null,e)),oi((function(){0===Ss&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if($s=-1,Ys=0,0!==(6&Ss))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Es?Cs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Ss;Ss|=2;var o=dc();for(Es===e&&Cs===t||(js=null,Vs=Je()+500,fc(e,t));;)try{yc();break}catch(s){hc(e,s)}$i(),xs.current=o,Ss=i,null!==Ts?t=0:(Es=null,Cs=0,t=Ds)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Ps,fc(e,0),oc(e,r),nc(e,Je()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Ps,fc(e,0),oc(e,r),nc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Fs,js);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Us+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Js(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Fs,js),t);break}bc(e,Fs,js);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ws(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Fs,js),r);break}bc(e,Fs,js);break;default:throw Error(a(329))}}}return nc(e,Je()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Ms;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fs,Fs=n,null!==t&&ac(t)),e}function ac(e){null===Fs?Fs=e:Fs.push.apply(Fs,e)}function oc(e,t){for(t&=~Ls,t&=~Os,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Ss))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ps,fc(e,0),oc(e,t),nc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Fs,js),nc(e,Je()),null}function sc(e,t){var n=Ss;Ss|=1;try{return e(t)}finally{0===(Ss=n)&&(Vs=Je()+500,Vi&&zi())}}function cc(e){null!==Ws&&0===Ws.tag&&0===(6&Ss)&&wc();var t=Ss;Ss|=1;var n=Is.transition,r=kt;try{if(Is.transition=null,kt=1,e)return e()}finally{kt=r,Is.transition=n,0===(6&(Ss=t))&&zi()}}function lc(){Ns=As.current,Si(As)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ts)for(n=Ts.return;null!==n;){var r=n;switch(Na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:eo(),Si(Ni),Si(Ci),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Si(ro);break;case 10:Yi(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Es=e,Ts=e=Pc(e.current,null),Cs=Ns=t,Ds=0,Ps=null,Ls=Os=Rs=0,Fs=Ms=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function hc(e,t){for(;;){var n=Ts;try{if($i(),uo.current=nu,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,ho=fo=lo=null,vo=!1,mo=0,_s.current=null,null===n||null===n.return){Ds=1,Ps=t,Ts=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Cs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vu(u);if(null!==p){p.flags&=-257,mu(p,u,s,0,t),1&p.mode&&pu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){pu(o,l,t),pc();break e}c=Error(a(426))}else if(Pa&&1&s.mode){var y=vu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),mu(y,u,s,0,t),Ba(c);break e}}o=c,4!==Ds&&(Ds=2),null===Ms?Ms=[o]:Ms.push(o),c=ou(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ua(s,hu(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===qs||!qs.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ua(s,du(s,o,t));break e}}s=s.return}while(null!==s)}kc(n)}catch(b){t=b,Ts===n&&null!==n&&(Ts=n=n.return);continue}break}}function dc(){var e=xs.current;return xs.current=nu,null===e?nu:e}function pc(){0!==Ds&&3!==Ds&&2!==Ds||(Ds=4),null===Es||0===(268435455&Rs)&&0===(268435455&Os)||oc(Es,Cs)}function vc(e,t){var n=Ss;Ss|=2;var r=dc();for(Es===e&&Cs===t||(js=null,fc(e,t));;)try{mc();break}catch(i){hc(e,i)}if($i(),Ss=n,xs.current=r,null!==Ts)throw Error(a(261));return Es=null,Cs=0,Ds}function mc(){for(;null!==Ts;)gc(Ts)}function yc(){for(;null!==Ts&&!$e();)gc(Ts)}function gc(e){var t=bs(e.alternate,e,Ns);e.memoizedProps=e.pendingProps,null===t?kc(e):Ts=t,_s.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ku(n,t,Ns)))return void(Ts=n)}else{if(null!==(n=Wu(n,t)))return n.flags&=32767,void(Ts=n);if(null===e)return Ds=6,void(Ts=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ts=t);Ts=t=e}while(null!==t);0===Ds&&(Ds=5)}function bc(e,t,n){var r=kt,i=Is.transition;try{Is.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Ws);if(0!==(6&Ss))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Es&&(Ts=Es=null,Cs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ks||(Ks=!0,Cc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=kt;kt=1;var s=Ss;Ss|=4,_s.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,$u=t;null!==$u;)if(e=(t=$u).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$u=e;else for(;null!==$u;){t=$u;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ki(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(x){_c(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,$u=e;break}$u=t.return}v=Xu,Xu=!1}(e,n),ds(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,vs(n,e,i),Ye(),Ss=s,kt=u,Is.transition=o}else e.current=n;if(Ks&&(Ks=!1,Ws=e,Gs=i),0===(o=e.pendingLanes)&&(qs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Bs)throw Bs=!1,e=zs,zs=null,e;0!==(1&Gs)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Qs?Hs++:(Hs=0,Qs=e):Hs=0,zi()}(e,t,n,r)}finally{Is.transition=i,kt=r}return null}function wc(){if(null!==Ws){var e=bt(Gs),t=Is.transition,n=kt;try{if(Is.transition=null,kt=16>e?16:e,null===Ws)var r=!1;else{if(e=Ws,Ws=null,Gs=0,0!==(6&Ss))throw Error(a(331));var i=Ss;for(Ss|=4,$u=e.current;null!==$u;){var o=$u,u=o.child;if(0!==(16&$u.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for($u=l;null!==$u;){var f=$u;switch(f.tag){case 0:case 11:case 15:Zu(8,f,o)}var h=f.child;if(null!==h)h.return=f,$u=h;else for(;null!==$u;){var d=(f=$u).sibling,p=f.return;if(ns(f),f===l){$u=null;break}if(null!==d){d.return=p,$u=d;break}$u=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}$u=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,$u=u;else e:for(;null!==$u;){if(0!==(2048&(o=$u).flags))switch(o.tag){case 0:case 11:case 15:Zu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,$u=g;break e}$u=o.return}}var k=e.current;for($u=k;null!==$u;){var b=(u=$u).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,$u=b;else e:for(u=k;null!==$u;){if(0!==(2048&(s=$u).flags))try{switch(s.tag){case 0:case 11:case 15:es(9,s)}}catch(x){_c(s,s.return,x)}if(s===u){$u=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,$u=w;break e}$u=s.return}}if(Ss=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Is.transition=t}}return!1}function xc(e,t,n){aa(e,t=hu(0,t=ou(n,t),1)),t=Js(),null!==(e=ec(e,1))&&(yt(e,1,t),nc(e,t))}function _c(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qs||!qs.has(r))){aa(t,e=du(t,e=ou(n,e),1)),e=Js(),null!==(t=ec(t,1))&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Js(),e.pingedLanes|=e.suspendedLanes&n,Es===e&&(Cs&n)===n&&(4===Ds||3===Ds&&(130023424&Cs)===Cs&&500>Je()-Us?fc(e,0):Ls|=n),nc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Js();null!==(e=ec(e,t))&&(yt(e,t,n),nc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Cc(e,t){return He(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Nc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Oc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Ac(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Ac(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function jc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=ia(r=Js(),i=Xs(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,yt(e,i,r),nc(e,r),e}function qc(e,t,n,r){var i=t.current,a=Js(),o=Xs(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Zs(i,o,a))&&oa(e,i,o),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}bs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Du(t),ja();break;case 5:to(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(Wi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Ei(ro,1&ro.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ei(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,Pa&&0!==(1048576&t.flags)&&Ta(t,ba,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Di(t,Ci.current);Xi(t,n),i=bo(null,t,r,e,i,n);var o=wo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ma(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,Pa&&o&&Ca(t),xu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=Ki(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Nu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=Iu(null,t,r,Ki(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 1:return r=t.type,i=t.pendingProps,Nu(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),sa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Pu(e,t,r,n,i=Error(a(424)));break e}for(Da=ci(t.stateNode.containerInfo.firstChild),Aa=t,Pa=!0,Ra=null,n=Ha(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ja(),r===i){t=Ku(e,t,n);break e}xu(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),xu(e,t,u,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Mu(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ga(t,null,r,n):xu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 7:return xu(e,t,t.pendingProps,n),t.child;case 8:case 12:return xu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(Wi,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ji(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Ji(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}xu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Xi(t,n),r=r(i=Zi(i)),t.flags|=1,xu(e,t,r,n),t.child;case 14:return i=Ki(r=t.type,t.pendingProps),Iu(e,t,r,i=Ki(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ki(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Xi(t,n),pa(t,r,i),ma(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),cc((function(){qc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){qc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),nc(t,Je()),0===(6&Ss)&&(Vs=Je()+500,zi()))}break;case 13:var r=Js();cc((function(){return Zs(e,1,r)})),Gc(e,1)}},xt=function(e){13===e.tag&&(Zs(e,134217728,Js()),Gc(e,134217728))},_t=function(e){if(13===e.tag){var t=Js(),n=Xs(e);Zs(e,n,t),Gc(e,n)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=sc,Ne=cc;var el={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,sc]},tl={findFiberByHostInstance:gi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{it=rl.inject(nl),at=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return jc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=sc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isContextConsumer=function(e){return y(e)===c}},900:function(e,t,n){"use strict";e.exports=n(459)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.1.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},896:function(e,t,n){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function u(e,t,n){u.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function s(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function c(e){var t="undefined"==typeof e?"undefined":A(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,t,n,r,f,h,d){d=d||[];var p=(f=f||[]).slice(0);if("undefined"!=typeof h){if(r){if("function"==typeof r&&r(p,h))return;if("object"===("undefined"==typeof r?"undefined":A(r))){if(r.prefilter&&r.prefilter(p,h))return;if(r.normalize){var v=r.normalize(p,h,e,t);v&&(e=v[0],t=v[1])}}}p.push(h)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var m="undefined"==typeof e?"undefined":A(e),y="undefined"==typeof t?"undefined":A(t),g="undefined"!==m||d&&d[d.length-1].lhs&&d[d.length-1].lhs.hasOwnProperty(h),k="undefined"!==y||d&&d[d.length-1].rhs&&d[d.length-1].rhs.hasOwnProperty(h);if(!g&&k)n(new a(p,t));else if(!k&&g)n(new o(p,e));else if(c(e)!==c(t))n(new i(p,e,t));else if("date"===c(e)&&e-t!==0)n(new i(p,e,t));else if("object"===m&&null!==e&&null!==t)if(d.filter((function(t){return t.lhs===e})).length)e!==t&&n(new i(p,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){var b;for(e.length,b=0;b<e.length;b++)b>=t.length?n(new u(p,b,new o(void 0,e[b]))):l(e[b],t[b],n,r,p,b,d);for(;b<t.length;)n(new u(p,b,new a(void 0,t[b++])))}else{var w=Object.keys(e),x=Object.keys(t);w.forEach((function(i,a){var o=x.indexOf(i);o>=0?(l(e[i],t[i],n,r,p,i,d),x=s(x,o)):l(e[i],void 0,n,r,p,i,d)})),x.forEach((function(e){l(void 0,t[e],n,r,p,e,d)}))}d.length=d.length-1}else e!==t&&("number"===m&&isNaN(e)&&isNaN(t)||n(new i(p,e,t)))}function f(e,t,n,r){return r=r||[],l(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function h(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":h(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":e=s(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function d(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,a=n.path?n.path.length-1:0;++i<a;)"undefined"==typeof r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":h(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":p(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":p(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=s(e,t)}return e}function v(e,t,n){if(e&&t&&n&&n.kind){var r,i,a=e;for(i=n.path.length-1,r=0;r<i;r++)"undefined"==typeof a[n.path[r]]&&(a[n.path[r]]={}),a=a[n.path[r]];switch(n.kind){case"A":p(a[n.path[r]],n.index,n.item);break;case"D":case"E":a[n.path[r]]=n.lhs;break;case"N":delete a[n.path[r]]}}}function m(e,t,n){e&&t&&l(e,t,(function(r){n&&!n(e,t,r)||d(e,t,r)}))}function y(e){return"color: "+R[e].color+"; font-weight: bold"}function g(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,a=e.index,o=e.item;switch(t){case"E":return[n.join("."),r,"\u2192",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+a+"]",o];default:return[]}}function k(e,t,n,r){var i=f(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach((function(e){var t=e.kind,r=g(e);n.log.apply(n,["%c "+R[t].text,y(t)].concat(D(r)))})):n.log("\u2014\u2014 no diff \u2014\u2014");try{n.groupEnd()}catch(e){n.log("\u2014\u2014 diff end \u2014\u2014 ")}}function b(e,t,n,r){switch("undefined"==typeof e?"undefined":A(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,D(n)):e[r];case"function":return e(t);default:return e}}function w(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var a=["action"];return a.push("%c"+String(e.type)),t&&a.push("%c@ "+r),n&&a.push("%c(in "+i.toFixed(2)+" ms)"),a.join(" ")}}function x(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,a=void 0===i?w(t):i,o=t.collapsed,u=t.colors,s=t.level,c=t.diff,l="undefined"==typeof t.titleFormatter;e.forEach((function(i,f){var h=i.started,d=i.startedTime,p=i.action,v=i.prevState,m=i.error,y=i.took,g=i.nextState,w=e[f+1];w&&(g=w.prevState,y=w.started-h);var x=r(p),_="function"==typeof o?o((function(){return g}),p,i):o,I=C(d),S=u.title?"color: "+u.title(x)+";":"",E=["color: gray; font-weight: lighter;"];E.push(S),t.timestamp&&E.push("color: gray; font-weight: lighter;"),t.duration&&E.push("color: gray; font-weight: lighter;");var T=a(x,I,y);try{_?u.title&&l?n.groupCollapsed.apply(n,["%c "+T].concat(E)):n.groupCollapsed(T):u.title&&l?n.group.apply(n,["%c "+T].concat(E)):n.group(T)}catch(e){n.log(T)}var N=b(s,x,[v],"prevState"),A=b(s,x,[x],"action"),D=b(s,x,[m,v],"error"),P=b(s,x,[g],"nextState");if(N)if(u.prevState){var R="color: "+u.prevState(v)+"; font-weight: bold";n[N]("%c prev state",R,v)}else n[N]("prev state",v);if(A)if(u.action){var O="color: "+u.action(x)+"; font-weight: bold";n[A]("%c action    ",O,x)}else n[A]("action    ",x);if(m&&D)if(u.error){var L="color: "+u.error(m,v)+"; font-weight: bold;";n[D]("%c error     ",L,m)}else n[D]("error     ",m);if(P)if(u.nextState){var M="color: "+u.nextState(g)+"; font-weight: bold";n[P]("%c next state",M,g)}else n[P]("next state",g);c&&k(v,g,n,_);try{n.groupEnd()}catch(e){n.log("\u2014\u2014 log end \u2014\u2014")}}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},O,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,a=t.predicate,o=t.logErrors,u=t.diffPredicate;if("undefined"==typeof n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var s=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof a&&!a(n,c))return e(c);var l={};s.push(l),l.started=N.now(),l.startedTime=new Date,l.prevState=r(n()),l.action=c;var f=void 0;if(o)try{f=e(c)}catch(e){l.error=i(e)}else f=e(c);l.took=N.now()-l.started,l.nextState=r(n());var h=t.diff&&"function"==typeof u?u(n,c):t.diff;if(x(s,Object.assign({},t,{diff:h})),s.length=0,l.error)throw l.error;return f}}}}var I,S,E=function(e,t){return new Array(t+1).join(e)},T=function(e,t){return E("0",t-e.toString().length)+e},C=function(e){return T(e.getHours(),2)+":"+T(e.getMinutes(),2)+":"+T(e.getSeconds(),2)+"."+T(e.getMilliseconds(),3)},N="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},P=[];I="object"===("undefined"==typeof n.g?"undefined":A(n.g))&&n.g?n.g:"undefined"!=typeof window?window:{},(S=I.DeepDiff)&&P.push((function(){"undefined"!=typeof S&&I.DeepDiff===f&&(I.DeepDiff=S,S=void 0)})),t(i,r),t(a,r),t(o,r),t(u,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:m,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:v,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof S},enumerable:!0},noConflict:{value:function(){return P&&(P.forEach((function(e){e()})),P=null),f},enumerable:!0}});var R={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},O={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?_()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=O,e.createLogger=_,e.logger=L,e.default=L,Object.defineProperty(e,"__esModule",{value:!0})}(t)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,R(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,S=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?_():(I=!1,S=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=A,_=function(){P.postMessage(null)}}else _=function(){y(A,0)};function R(e){S=e,I||(I=!0,_())}function O(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(E),E=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Qt},SDK_VERSION:function(){return nr},_DEFAULT_ENTRY_NAME:function(){return qn},_addComponent:function(){return Hn},_addOrOverwriteComponent:function(){return Qn},_apps:function(){return Wn},_clearComponents:function(){return Xn},_components:function(){return Gn},_getProvider:function(){return Yn},_registerComponent:function(){return $n},_removeServiceInstance:function(){return Jn},deleteApp:function(){return or},getApp:function(){return ir},getApps:function(){return ar},initializeApp:function(){return rr},onLog:function(){return cr},registerVersion:function(){return sr},setLogLevel:function(){return lr}});var t,r=n(791),i=n(250);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",u=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var m={};c(m,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==t&&n.call(g,i)&&(m=g);var k=v.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,o,u,s){var c=f(e[i],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==a(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,u,s)}),(function(e){r("throw",e,u,s)})):t.resolve(h).then((function(e){l.value=e,u(l)}),(function(e){return r("throw",e,u,s)}))}s(c.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,c(k,"constructor",v),c(v,"constructor",p),p.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,u,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),c(k,s,"Generator"),c(k,i,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){l(a,r,i,o,u,"next",e)}function u(e){l(a,r,i,o,u,"throw",e)}o(void 0)}))}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){if(t&&("object"===a(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function w(e){var t=g();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function x(e){if(Array.isArray(e))return e}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){if(e){if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){return x(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||I(e,t)||S()}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var C=function(e){return e};var N="beforeunload",A="popstate";function D(e){e.preventDefault(),e.returnValue=""}function P(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function R(){return Math.random().toString(36).substr(2,8)}function O(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function L(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var M=(0,r.createContext)(null);var F=(0,r.createContext)(null);var U=(0,r.createContext)({outlet:null,matches:[]});function V(e,t){if(!e)throw new Error(t)}function j(e,t,n){void 0===n&&(n="/");var r=Q(("string"===typeof t?L(t):t).pathname||"/",n);if(null==r)return null;var i=B(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=W(i[o],r);return a}function B(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||V(!1),a.relativePath=a.relativePath.slice(r.length));var o=$([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&V(!1),B(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:K(o,e.index),routesMeta:u})})),t}var z=/^:\w+$/,q=function(e){return"*"===e};function K(e,t){var n=e.split("/"),r=n.length;return n.some(q)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!q(e)})).reduce((function(e,t){return e+(z.test(t)?3:""===t?1:10)}),r)}function W(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=G({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:$([i,l.pathname]),pathnameBase:Y($([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=$([i,l.pathnameBase]))}return a}function G(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=E(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function H(e,t,n){var r,i="string"===typeof e?L(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?L(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:J(a),hash:X(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function Q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var $=function(e){return e.join("/").replace(/\/\/+/g,"/")},Y=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},J=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},X=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function Z(e){ee()||V(!1);var t=(0,r.useContext)(M),n=t.basename,i=t.navigator,a=re(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?L(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?n+(f?"/":""):$([n,u])}return i.createHref({pathname:c,search:s,hash:o})}function ee(){return null!=(0,r.useContext)(F)}function te(){return ee()||V(!1),(0,r.useContext)(F).location}function ne(){ee()||V(!1);var e=(0,r.useContext)(M),t=e.basename,n=e.navigator,i=(0,r.useContext)(U).matches,a=te().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=H(e,JSON.parse(o),a);"/"!==t&&(i.pathname=$([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}function re(e){var t=(0,r.useContext)(U).matches,n=te().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return H(e,JSON.parse(i),n)}),[e,i,n])}function ie(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(U.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function ae(e){var t=e.to,n=e.replace,i=e.state;ee()||V(!1);var a=ne();return(0,r.useEffect)((function(){a(t,{replace:n,state:i})})),null}function oe(e){V(!1)}function ue(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;ee()&&V(!1);var d=Y(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=L(u));var v=u,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,b=v.hash,w=void 0===b?"":b,x=v.state,_=void 0===x?null:x,I=v.key,S=void 0===I?"default":I,E=(0,r.useMemo)((function(){var e=Q(y,d);return null==e?null:{pathname:e,search:k,hash:w,state:_,key:S}}),[d,y,k,w,_,S]);return null==E?null:(0,r.createElement)(M.Provider,{value:p},(0,r.createElement)(F.Provider,{children:o,value:{location:E,navigationType:c}}))}function se(e){var t=e.children,n=e.location;return function(e,t){ee()||V(!1);var n,i=(0,r.useContext)(U).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,te());if(t){var c,l="string"===typeof t?L(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||V(!1),n=l}else n=s;var f=n.pathname||"/",h=j(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return ie(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:$([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:$([u,e.pathnameBase])})})),i)}(ce(t),n)}function ce(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==oe&&V(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=ce(e.props.children)),t.push(n)}else t.push.apply(t,ce(e.props.children))})),t}var le=n(248),fe=n(327),he=n(164);var de=function(e){e()},pe=function(){return de},ve=r.createContext(null);var me=function(){throw new Error("uSES not initialized!")};function ye(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ge(e){return function(e){if(Array.isArray(e))return _(e)}(e)||ye(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var be=n(110),we=n.n(be),xe=n(900),_e=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Ie(e,t,n,r,i){var a,o,u,s,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;function p(i,d){var p=!f(d,o),v=!l(i,a);return a=i,o=d,p&&v?(u=e(a,o),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):p?(e.dependsOnOwnProps&&(u=e(a,o)),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):v?function(){var t=e(a,o),r=!h(t,u);return u=t,r&&(c=n(u,s,o)),c}():c}return function(i,l){return d?p(i,l):(u=e(a=i,o=l),s=t(r,o),c=n(u,s,o),d=!0,c)}}function Se(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=ke(t,_e);return Ie(n(e,a),r(e,a),i(e,a),e,a)}function Ee(e){return function(t){var n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function Te(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Ce(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e,void 0)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Te(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=Te(i),i=r(t,n)),i},r}}function Ne(e,t){return function(n,r){throw new Error("Invalid value of type ".concat(typeof e," for ").concat(t," argument when connecting component ").concat(r.wrappedComponentName,"."))}}function Ae(e){return e&&"object"===typeof e?Ee((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):e?"function"===typeof e?Ce(e):Ne(e,"mapDispatchToProps"):Ee((function(e){return{dispatch:e}}))}function De(e){return e?"function"===typeof e?Ce(e):Ne(e,"mapStateToProps"):Ee((function(){return{}}))}function Pe(e,t,n){return T({},n,e,t)}function Re(e){return e?"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.areMergedPropsEqual,a=!1;return function(t,n,o){var u=e(t,n,o);return a?i(u,r)||(r=u):(a=!0,r=u),r}}}(e):Ne(e,"mergeProps"):function(){return Pe}}var Oe={notify:function(){},get:function(){return[]}};function Le(e,t){var n,r=Oe;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=pe(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=Oe)},getListeners:function(){return r}};return o}var Me=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?r.useLayoutEffect:r.useEffect;function Fe(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function Ue(e,t){if(Fe(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Fe(e[n[i]],t[n[i]]))return!1;return!0}var Ve=["reactReduxForwardedRef"],je=me,Be=[null,null];function ze(e,t,n){Me((function(){return e.apply(void 0,ge(t))}),n)}function qe(e,t,n,r,i,a){e.current=r,n.current=!1,i.current&&(i.current=null,a())}function Ke(e,t,n,r,i,a,o,u,s,c,l){if(!e)return function(){};var f=!1,h=null,d=function(){if(!f&&u.current){var e,n,d=t.getState();try{e=r(d,i.current)}catch(p){n=p,h=p}n||(h=null),e===a.current?o.current||c():(a.current=e,s.current=e,o.current=!0,l())}};n.onStateChange=d,n.trySubscribe(),d();return function(){if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}function We(e,t){return e===t}var Ge=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(i.pure,i.areStatesEqual),o=void 0===a?We:a,u=i.areOwnPropsEqual,s=void 0===u?Ue:u,c=i.areStatePropsEqual,l=void 0===c?Ue:c,f=i.areMergedPropsEqual,h=void 0===f?Ue:f,d=i.forwardRef,p=void 0!==d&&d,v=i.context,m=void 0===v?ve:v,y=m,g=De(e),k=Ae(t),b=Re(n),w=Boolean(e),x=function(e){var t=e.displayName||e.name||"Component",n="Connect(".concat(t,")"),i={shouldHandleStateChanges:w,displayName:n,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:g,initMapDispatchToProps:k,initMergeProps:b,areStatesEqual:o,areStatePropsEqual:l,areOwnPropsEqual:s,areMergedPropsEqual:h};function a(t){var n=(0,r.useMemo)((function(){var e=t.reactReduxForwardedRef,n=ke(t,Ve);return[t.context,e,n]}),[t]),a=E(n,3),o=a[0],u=a[1],s=a[2],c=(0,r.useMemo)((function(){return o&&o.Consumer&&(0,xe.isContextConsumer)(r.createElement(o.Consumer,null))?o:y}),[o,y]),l=(0,r.useContext)(c),f=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),h=Boolean(l)&&Boolean(l.store);var d=f?t.store:l.store,p=h?l.getServerState:d.getState,v=(0,r.useMemo)((function(){return Se(d.dispatch,i)}),[d]),m=(0,r.useMemo)((function(){if(!w)return Be;var e=Le(d,f?void 0:l.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[d,f,l]),g=E(m,2),k=g[0],b=g[1],x=(0,r.useMemo)((function(){return f?l:T({},l,{subscription:k})}),[f,l,k]),_=(0,r.useRef)(),I=(0,r.useRef)(s),S=(0,r.useRef)(),C=(0,r.useRef)(!1),N=((0,r.useRef)(!1),(0,r.useRef)(!1)),A=(0,r.useRef)();Me((function(){return N.current=!0,function(){N.current=!1}}),[]);var D,P=(0,r.useMemo)((function(){return function(){return S.current&&s===I.current?S.current:v(d.getState(),s)}}),[d,s]),R=(0,r.useMemo)((function(){return function(e){return k?Ke(w,d,k,v,I,_,C,N,S,b,e):function(){}}}),[k]);ze(qe,[I,_,C,s,S,b]);try{D=je(R,P,p?function(){return v(p(),s)}:P)}catch(L){throw A.current&&(L.message+="\nThe error may be correlated with this previous error:\n".concat(A.current.stack,"\n\n")),L}Me((function(){A.current=void 0,S.current=void 0,_.current=D}));var O=(0,r.useMemo)((function(){return r.createElement(e,T({},D,{ref:u}))}),[u,e,D]);return(0,r.useMemo)((function(){return w?r.createElement(c.Provider,{value:x},O):O}),[c,O,x])}var u=r.memo(a);if(u.WrappedComponent=e,u.displayName=a.displayName=n,p){var c=r.forwardRef((function(e,t){return r.createElement(u,T({},e,{reactReduxForwardedRef:t}))}));return c.displayName=n,c.WrappedComponent=e,we()(c,e)}return we()(u,e)};return x};var He=function(e){var t=e.store,n=e.context,i=e.children,a=e.serverState,o=(0,r.useMemo)((function(){var e=Le(t);return{store:t,subscription:e,getServerState:a?function(){return a}:void 0}}),[t,a]),u=(0,r.useMemo)((function(){return t.getState()}),[t]);Me((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=n||ve;return r.createElement(s.Provider,{value:o},i)};var Qe;function $e(){return $e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$e.apply(this,arguments)}function Ye(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}!function(e){e}(fe.useSyncExternalStoreWithSelector),function(e){je=e}(le.useSyncExternalStore),Qe=he.unstable_batchedUpdates,de=Qe;var Je=["onClick","reloadDocument","replace","state","target","to"];function Xe(e){var n=e.basename,i=e.children,a=e.window,o=(0,r.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,C({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(A,(function(){if(o)h.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(h.length){if(null!=r){var u=c-r;u&&(o={action:e,location:i,retry:function(){g(-1*u)}},g(u))}}else y(e)}}));var u=t.Pop,s=a(),c=s[0],l=s[1],f=P(),h=P();function d(e){return"string"===typeof e?e:O(e)}function p(e,t){return void 0===t&&(t=null),C(T({pathname:l.pathname,hash:"",search:""},"string"===typeof e?L(e):e,{state:t,key:R()}))}function v(e,t){return[{usr:e.state,key:e.key,idx:t},d(e)]}function m(e,t,n){return!h.length||(h.call({action:e,location:t,retry:n}),!1)}function y(e){u=e;var t=a();c=t[0],l=t[1],f.call({action:u,location:l})}function g(e){i.go(e)}null==c&&(c=0,i.replaceState(T({},i.state,{idx:c}),""));var k={get action(){return u},get location(){return l},createHref:d,push:function e(n,a){var o=t.Push,u=p(n,a);if(m(o,u,(function(){e(n,a)}))){var s=v(u,c+1),l=s[0],f=s[1];try{i.pushState(l,"",f)}catch(h){r.location.assign(f)}y(o)}},replace:function e(n,r){var a=t.Replace,o=p(n,r);if(m(a,o,(function(){e(n,r)}))){var u=v(o,c),s=u[0],l=u[1];i.replaceState(s,"",l),y(a)}},go:g,back:function(){g(-1)},forward:function(){g(1)},listen:function(e){return f.push(e)},block:function(e){var t=h.push(e);return 1===h.length&&r.addEventListener(N,D),function(){t(),h.length||r.removeEventListener(N,D)}}};return k}({window:a}));var u=o.current,s=E((0,r.useState)({action:u.action,location:u.location}),2),c=s[0],l=s[1];return(0,r.useLayoutEffect)((function(){return u.listen(l)}),[u]),(0,r.createElement)(ue,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:u})}var Ze=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=Ye(e,Je),f=Z(c),h=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=ne(),s=te(),c=re(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||O(s)===O(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,r.createElement)("a",$e({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:t,target:s}))}));var et,tt;var nt=["title","titleId"];function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rt.apply(this,arguments)}function it(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function at(e,t){var n=e.title,i=e.titleId,a=it(e,nt);return r.createElement("svg",rt({width:"50px",height:"39px",viewBox:"0 0 50 39",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":i},a),void 0===n?r.createElement("title",{id:i},"Group"):n?r.createElement("title",{id:i},n):null,et||(et=r.createElement("desc",null,"Created with Sketch.")),tt||(tt=r.createElement("g",{id:"WiP",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"Artboard",transform:"translate(-90.000000, -38.000000)"},r.createElement("g",{id:"Group",transform:"translate(90.000000, 38.000000)"},r.createElement("polygon",{id:"Rectangle",fill:"#808282",points:"3 14 25 26.5 47 14 40.855176 39 9.08421785 39"}),r.createElement("polygon",{id:"Triangle",fillOpacity:.262838724,fill:"#101A1A",points:"25 8 40 39 10 39"}),r.createElement("circle",{id:"Oval",fill:"#5E6363",cx:2,cy:9,r:2}),r.createElement("circle",{id:"Oval",fill:"#5E6363",cx:25,cy:2,r:2}),r.createElement("circle",{id:"Oval",fill:"#5E6363",cx:48,cy:9,r:2}))))))}var ot,ut,st,ct,lt,ft,ht,dt,pt,vt,mt,yt,gt,kt,bt,wt=r.forwardRef(at),xt=(n.p,"TOGGLE_CART_HIDDEN"),_t="ADD_ITEM",It=["title","titleId"];function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},St.apply(this,arguments)}function Et(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Tt(e,t){var n=e.title,i=e.titleId,a=Et(e,It);return r.createElement("svg",St({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 407.453 407.453",style:{enableBackground:"new 0 0 407.453 407.453"},xmlSpace:"preserve",ref:t,"aria-labelledby":i},a),n?r.createElement("title",{id:i},n):null,r.createElement("g",null,r.createElement("path",{style:{fill:"#010002"},d:"M255.099,116.515c4.487,0,8.129-3.633,8.129-8.129c0-4.495-3.642-8.129-8.129-8.129H143.486 c-4.487,0-8.129,3.633-8.129,8.129c0,4.495,3.642,8.129,8.129,8.129H255.099z"}),r.createElement("path",{style:{fill:"#010002"},d:"M367.062,100.258H311.69c-4.487,0-8.129,3.633-8.129,8.129c0,4.495,3.642,8.129,8.129,8.129h47.243 v274.681H48.519V116.515h44.536c4.487,0,8.129-3.633,8.129-8.129c0-4.495-3.642-8.129-8.129-8.129H40.391 c-4.487,0-8.129,3.633-8.129,8.129v290.938c0,4.495,3.642,8.129,8.129,8.129h326.671c4.487,0,8.129-3.633,8.129-8.129V108.386 C375.191,103.891,371.557,100.258,367.062,100.258z"}),r.createElement("path",{style:{fill:"#010002"},d:"M282.59,134.796c4.487,0,8.129-3.633,8.129-8.129V67.394C290.718,30.238,250.604,0,201.101,0 c-49.308,0-89.414,30.238-89.414,67.394v59.274c0,4.495,3.642,8.129,8.129,8.129s8.129-3.633,8.129-8.129V67.394 c0-28.198,32.823-51.137,73.36-51.137c40.334,0,73.157,22.939,73.157,51.137v59.274 C274.461,131.163,278.095,134.796,282.59,134.796z"}),r.createElement("path",{style:{fill:"#010002"},d:"M98.892,147.566c0,11.526,9.389,20.907,20.923,20.907c11.534,0,20.923-9.38,20.923-20.907 c0-4.495-3.642-8.129-8.129-8.129s-8.129,3.633-8.129,8.129c0,2.561-2.089,4.65-4.666,4.65c-2.569,0-4.666-2.089-4.666-4.65 c0-4.495-3.642-8.129-8.129-8.129S98.892,143.071,98.892,147.566z"}),r.createElement("path",{style:{fill:"#010002"},d:"M282.59,168.473c11.534,0,20.923-9.38,20.923-20.907c0-4.495-3.642-8.129-8.129-8.129 c-4.487,0-8.129,3.633-8.129,8.129c0,2.561-2.089,4.65-4.666,4.65c-2.577,0-4.666-2.089-4.666-4.65 c0-4.495-3.642-8.129-8.129-8.129c-4.487,0-8.129,3.633-8.129,8.129C261.667,159.092,271.055,168.473,282.59,168.473z"})),ot||(ot=r.createElement("g",null)),ut||(ut=r.createElement("g",null)),st||(st=r.createElement("g",null)),ct||(ct=r.createElement("g",null)),lt||(lt=r.createElement("g",null)),ft||(ft=r.createElement("g",null)),ht||(ht=r.createElement("g",null)),dt||(dt=r.createElement("g",null)),pt||(pt=r.createElement("g",null)),vt||(vt=r.createElement("g",null)),mt||(mt=r.createElement("g",null)),yt||(yt=r.createElement("g",null)),gt||(gt=r.createElement("g",null)),kt||(kt=r.createElement("g",null)),bt||(bt=r.createElement("g",null)))}var Ct=r.forwardRef(Tt),Nt=(n.p,n(184)),At=Ge(null,(function(e){return{toggleCartHidden:function(){return e({type:xt})}}}))((function(e){var t=e.toggleCartHidden;return(0,Nt.jsxs)("div",{className:"cart-icon",onClick:t,children:[(0,Nt.jsx)(Ct,{className:"shopping-icon"}),(0,Nt.jsx)("span",{className:"item-count",children:"0"})]})}));function Dt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=I(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Pt(e,t,n){return Pt=g()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},Pt.apply(null,arguments)}function Rt(e){var t="function"===typeof Map?new Map:void 0;return Rt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Pt(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,e)},Rt(e)}var Ot=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Lt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ot(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Mt=function(e){return function(e){var t=Ot(e);return Lt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ft=function(e){try{return Lt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ut(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ut(e[n],t[n]));return e}var Vt=function(){function e(){var t=this;h(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return p(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function jt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Mt(JSON.stringify({alg:"none",type:"JWT"})),Mt(JSON.stringify(a)),""].join(".")}function Bt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function zt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function qt(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Kt(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Wt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Gt(){var e=Bt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ht(){return"object"===typeof indexedDB}var Qt=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(k(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(k(a),$t.prototype.create),a}return p(n)}(Rt(Error)),$t=function(){function e(t,n,r){h(this,e),this.service=t,this.serviceName=n,this.errors=r}return p(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Yt(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Qt(n,a,t);return o}}]),e}();function Yt(e,t){return e.replace(Jt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Jt=/\{\$([^}]+)}/g;function Xt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Zt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(en(u)&&en(s)){if(!Zt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function en(e){return null!==e&&"object"===typeof e}function tn(e){for(var t=[],n=function(){var e=E(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function nn(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=E(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function rn(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function an(e,t){var n=new on(e,t);return n.subscribe.bind(n)}var on=function(){function e(t,n){var r=this;h(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return p(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Dt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=un),void 0===r.error&&(r.error=un),void 0===r.complete&&(r.complete=un);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function un(){}function sn(e){return e&&e._delegate?e._delegate:e}var cn=function(){function e(t,n,r){h(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return p(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ln="[DEFAULT]",fn=function(){function e(t,n){h(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return p(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Vt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ln})}catch(s){}var t,n=Dt(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=E(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=f(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ge(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ge(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Dt(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=E(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Dt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Ym){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ln?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Ym){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;return this.component?this.component.multipleInstances?e:ln:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var hn,dn,pn=function(){function e(t){h(this,e),this.name=t,this.providers=new Map}return p(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new fn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),vn=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(dn||(dn={}));var mn={debug:dn.DEBUG,verbose:dn.VERBOSE,info:dn.INFO,warn:dn.WARN,error:dn.ERROR,silent:dn.SILENT},yn=dn.INFO,gn=(u(hn={},dn.DEBUG,"log"),u(hn,dn.VERBOSE,"log"),u(hn,dn.INFO,"info"),u(hn,dn.WARN,"warn"),u(hn,dn.ERROR,"error"),hn),kn=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=gn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},bn=function(){function e(t){h(this,e),this.name=t,this._logLevel=yn,this._logHandler=kn,this._userLogHandler=null,vn.push(this)}return p(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in dn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?mn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,dn.DEBUG].concat(t)),this._logHandler.apply(this,[this,dn.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,dn.VERBOSE].concat(t)),this._logHandler.apply(this,[this,dn.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,dn.INFO].concat(t)),this._logHandler.apply(this,[this,dn.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,dn.WARN].concat(t)),this._logHandler.apply(this,[this,dn.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,dn.ERROR].concat(t)),this._logHandler.apply(this,[this,dn.ERROR].concat(t))}}]),e}();var wn,xn;var _n=new WeakMap,In=new WeakMap,Sn=new WeakMap,En=new WeakMap,Tn=new WeakMap;var Cn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return In.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Sn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Nn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xn||(xn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Pn(this),n),Dn(_n.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Dn(e.apply(Pn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Pn(this),t].concat(r));return Sn.set(a,t.sort?t.sort():[t]),Dn(a)}}function An(e){return"function"===typeof e?Nn(e):(e instanceof IDBTransaction&&function(e){if(!In.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));In.set(e,t)}}(e),t=e,(wn||(wn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Cn):e);var t}function Dn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Dn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&_n.set(t,e)})).catch((function(){})),Tn.set(t,e),t}(e);if(En.has(e))return En.get(e);var t=An(e);return t!==e&&(En.set(e,t),Tn.set(t,e)),t}var Pn=function(e){return Tn.get(e)};var Rn,On,Ln=["get","getKey","getAll","getAllKeys","count"],Mn=["put","add","delete","clear"],Fn=new Map;function Un(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Fn.get(t))return Fn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Mn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ln.includes(n))){var a=function(){var e=f(o().mark((function e(t){var a,u,s,c,l,f,h=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,i?"readwrite":"readonly"),s=u.store,c=h.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=h[f];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Fn.set(t,a),a}}}Cn=function(e){return c(c({},e),{},{get:function(t,n,r){return Un(t,n)||e.get(t,n,r)},has:function(t,n){return!!Un(t,n)||e.has(t,n)}})}(Cn);var Vn=function(){function e(t){h(this,e),this.container=t}return p(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var jn="@firebase/app",Bn="0.7.25",zn=new bn("@firebase/app"),qn="[DEFAULT]",Kn=(u(Rn={},jn,"fire-core"),u(Rn,"@firebase/app-compat","fire-core-compat"),u(Rn,"@firebase/analytics","fire-analytics"),u(Rn,"@firebase/analytics-compat","fire-analytics-compat"),u(Rn,"@firebase/app-check","fire-app-check"),u(Rn,"@firebase/app-check-compat","fire-app-check-compat"),u(Rn,"@firebase/auth","fire-auth"),u(Rn,"@firebase/auth-compat","fire-auth-compat"),u(Rn,"@firebase/database","fire-rtdb"),u(Rn,"@firebase/database-compat","fire-rtdb-compat"),u(Rn,"@firebase/functions","fire-fn"),u(Rn,"@firebase/functions-compat","fire-fn-compat"),u(Rn,"@firebase/installations","fire-iid"),u(Rn,"@firebase/installations-compat","fire-iid-compat"),u(Rn,"@firebase/messaging","fire-fcm"),u(Rn,"@firebase/messaging-compat","fire-fcm-compat"),u(Rn,"@firebase/performance","fire-perf"),u(Rn,"@firebase/performance-compat","fire-perf-compat"),u(Rn,"@firebase/remote-config","fire-rc"),u(Rn,"@firebase/remote-config-compat","fire-rc-compat"),u(Rn,"@firebase/storage","fire-gcs"),u(Rn,"@firebase/storage-compat","fire-gcs-compat"),u(Rn,"@firebase/firestore","fire-fst"),u(Rn,"@firebase/firestore-compat","fire-fst-compat"),u(Rn,"fire-js","fire-js"),u(Rn,"firebase","fire-js-all"),Rn),Wn=new Map,Gn=new Map;function Hn(e,t){try{e.container.addComponent(t)}catch(n){zn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Qn(e,t){e.container.addOrOverwriteComponent(t)}function $n(e){var t=e.name;if(Gn.has(t))return zn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Gn.set(t,e);var n,r=Dt(Wn.values());try{for(r.s();!(n=r.n()).done;){Hn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Yn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Jn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qn;Yn(e,t).clearInstance(n)}function Xn(){Gn.clear()}var Zn=(u(On={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),u(On,"bad-app-name","Illegal App name: '{$appName}"),u(On,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),u(On,"app-deleted","Firebase App named '{$appName}' already deleted"),u(On,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),u(On,"invalid-log-argument","First argument to `onLog` must be null or a function."),u(On,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),u(On,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),u(On,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),u(On,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),On),er=new $t("app","Firebase",Zn),tr=function(){function e(t,n,r){var i=this;h(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cn("app",(function(){return i}),"PUBLIC"))}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}]),e}(),nr="9.8.2";function rr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:qn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw er.create("bad-app-name",{appName:String(i)});var a=Wn.get(i);if(a){if(Zt(e,a.options)&&Zt(r,a.config))return a;throw er.create("duplicate-app",{appName:i})}var o,u=new pn(i),s=Dt(Gn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new tr(e,r,u);return Wn.set(i,l),l}function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn,t=Wn.get(e);if(!t)throw er.create("no-app",{appName:e});return t}function ar(){return Array.from(Wn.values())}function or(e){return ur.apply(this,arguments)}function ur(){return ur=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Wn.has(n)){e.next=6;break}return Wn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),ur.apply(this,arguments)}function sr(e,t,n){var r,i=null!==(r=Kn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void zn.warn(u.join(" "))}$n(new cn("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function cr(e,t){if(null!==e&&"function"!==typeof e)throw er.create("invalid-log-argument");!function(e,t){var n,r=Dt(vn);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=mn[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:dn[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function lr(e){var t;t=e,vn.forEach((function(e){e.setLogLevel(t)}))}var fr="firebase-heartbeat-store",hr=null;function dr(){return hr||(hr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Dn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Dn(u.result),e.oldVersion,e.newVersion,Dn(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(fr)}}).catch((function(e){throw er.create("storage-open",{originalErrorMessage:e.message})}))),hr}function pr(e){return vr.apply(this,arguments)}function vr(){return vr=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dr();case 3:return n=e.sent,e.abrupt("return",n.transaction(fr).objectStore(fr).get(gr(t)));case 7:throw e.prev=7,e.t0=e.catch(0),er.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),vr.apply(this,arguments)}function mr(e,t){return yr.apply(this,arguments)}function yr(){return yr=f(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dr();case 3:return r=e.sent,i=r.transaction(fr,"readwrite"),a=i.objectStore(fr),e.next=8,a.put(n,gr(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),er.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),yr.apply(this,arguments)}function gr(e){return"".concat(e.name,"!").concat(e.options.appId)}var kr=function(){function e(t){var n=this;h(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ir(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return p(e,[{key:"triggerHeartbeat",value:function(){var e=f(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=br(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=f(o().mark((function e(){var t,n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=br(),n=wr(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Mt(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function br(){return(new Date).toISOString().substring(0,10)}function wr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Dt(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Sr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Sr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var xr,_r,Ir=function(){function e(t){h(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return p(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ht()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=f(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,pr(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=f(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",mr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=f(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",mr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ge(r.heartbeats),ge(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Sr(e){return Mt(JSON.stringify({version:2,heartbeats:e})).length}xr="",$n(new cn("platform-logger",(function(e){return new Vn(e)}),"PRIVATE")),$n(new cn("heartbeat",(function(e){return new kr(e)}),"PRIVATE")),sr(jn,Bn,xr),sr(jn,Bn,"esm2017"),sr("fire-js","");var Er=function(){function e(t,n){var r=this;h(this,e),this._delegate=t,this.firebase=n,Hn(t,new cn("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return p(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),or(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Hn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Qn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Tr=(u(_r={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),u(_r,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),_r),Cr=new $t("app-compat","Firebase",Tr);var Nr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=rr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Xt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:sr,setLogLevel:lr,onLog:cr,apps:null,SDK_VERSION:nr,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if($n(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Cr.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ut(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Xt(n,e=e||qn))throw Cr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Er);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ut(n,e)},createSubscribe:an,ErrorFactory:$t,deepExtend:Ut}),n}(),Ar=new bn("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ar.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Dr=self.firebase.SDK_VERSION;Dr&&Dr.indexOf("LITE")>=0&&Ar.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Pr=Nr;!function(e){sr("@firebase/app-compat","0.1.26",e)}();function Rr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function Or(){return Or="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Rr(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Or.apply(this,arguments)}Pr.registerVersion("firebase","9.8.2","app-compat");var Lr,Mr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Fr={},Ur=Ur||{},Vr=Mr||self;function jr(){}function Br(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function zr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var qr="closure_uid_"+(1e9*Math.random()>>>0),Kr=0;function Wr(e,t,n){return e.call.apply(e.bind,arguments)}function Gr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Hr(e,t,n){return(Hr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Wr:Gr).apply(null,arguments)}function Qr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function $r(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Yr(){this.s=this.s,this.o=this.o}var Jr={};Yr.prototype.s=!1,Yr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,qr)&&e[qr]||(e[qr]=++Kr)}(this);delete Jr[e]}},Yr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Xr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Zr=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function ei(e){return Array.prototype.concat.apply([],arguments)}function ti(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ni(e){return/^[\s\xa0]*$/.test(e)}var ri,ii=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ai(e,t){return-1!=e.indexOf(t)}function oi(e,t){return e<t?-1:e>t?1:0}e:{var ui=Vr.navigator;if(ui){var si=ui.userAgent;if(si){ri=si;break e}}ri=""}function ci(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function li(e){var t={};for(var n in e)t[n]=e[n];return t}var fi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hi(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<fi.length;a++)n=fi[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function di(e){return di[" "](e),e}di[" "]=jr;var pi,vi=ai(ri,"Opera"),mi=ai(ri,"Trident")||ai(ri,"MSIE"),yi=ai(ri,"Edge"),gi=yi||mi,ki=ai(ri,"Gecko")&&!(ai(ri.toLowerCase(),"webkit")&&!ai(ri,"Edge"))&&!(ai(ri,"Trident")||ai(ri,"MSIE"))&&!ai(ri,"Edge"),bi=ai(ri.toLowerCase(),"webkit")&&!ai(ri,"Edge");function wi(){var e=Vr.document;return e?e.documentMode:void 0}e:{var xi="",_i=function(){var e=ri;return ki?/rv:([^\);]+)(\)|;)/.exec(e):yi?/Edge\/([\d\.]+)/.exec(e):mi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):bi?/WebKit\/(\S+)/.exec(e):vi?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(_i&&(xi=_i?_i[1]:""),mi){var Ii=wi();if(null!=Ii&&Ii>parseFloat(xi)){pi=String(Ii);break e}}pi=xi}var Si,Ei={};function Ti(){return function(e){var t=Ei;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ii(String(pi)).split("."),n=ii("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=oi(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||oi(0==a[2].length,0==o[2].length)||oi(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Vr.document&&mi){var Ci=wi();Si=Ci||(parseInt(pi,10)||void 0)}else Si=void 0;var Ni=Si,Ai=function(){if(!Vr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Vr.addEventListener("test",jr,t),Vr.removeEventListener("test",jr,t)}catch(n){}return e}();function Di(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Pi(e,t){if(Di.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ki){e:{try{di(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ri[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Pi.Z.h.call(this)}}Di.prototype.h=function(){this.defaultPrevented=!0},$r(Pi,Di);var Ri={2:"touch",3:"pen",4:"mouse"};Pi.prototype.h=function(){Pi.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Oi="closure_listenable_"+(1e6*Math.random()|0),Li=0;function Mi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Li,this.ca=this.fa=!1}function Fi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Ui(e){this.src=e,this.g={},this.h=0}function Vi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Xr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Fi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ji(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Ui.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ji(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Mi(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Bi="closure_lm_"+(1e6*Math.random()|0),zi={};function qi(e,t,n,r,i){if(r&&r.once)return Wi(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)qi(e,t[a],n,r,i);return null}return n=Xi(n),e&&e[Oi]?e.N(t,n,zr(r)?!!r.capture:!!r,i):Ki(e,t,n,!1,r,i)}function Ki(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=zr(i)?!!i.capture:!!i,u=Yi(e);if(u||(e[Bi]=u=new Ui(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=$i;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ai||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Qi(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Wi(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Wi(e,t[a],n,r,i);return null}return n=Xi(n),e&&e[Oi]?e.O(t,n,zr(r)?!!r.capture:!!r,i):Ki(e,t,n,!0,r,i)}function Gi(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Gi(e,t[a],n,r,i);else r=zr(r)?!!r.capture:!!r,n=Xi(n),e&&e[Oi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ji(a=e.g[t],n,r,i))&&(Fi(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Yi(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ji(t,n,r,i)),(n=-1<e?t[e]:null)&&Hi(n))}function Hi(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Oi])Vi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Qi(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Yi(t))?(Vi(n,e),0==n.h&&(n.src=null,t[Bi]=null)):Fi(e)}}}function Qi(e){return e in zi?zi[e]:zi[e]="on"+e}function $i(e,t){if(e.ca)e=!0;else{t=new Pi(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Hi(e),e=n.call(r,t)}return e}function Yi(e){return(e=e[Bi])instanceof Ui?e:null}var Ji="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xi(e){return"function"===typeof e?e:(e[Ji]||(e[Ji]=function(t){return e.handleEvent(t)}),e[Ji])}function Zi(){Yr.call(this),this.i=new Ui(this),this.P=this,this.I=null}function ea(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Di(t,e);else if(t instanceof Di)t.target=t.target||e;else{var i=t;hi(t=new Di(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ta(o,r,!0,t)&&i}if(i=ta(o=t.g=e,r,!0,t)&&i,i=ta(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ta(o=t.g=n[a],r,!1,t)&&i}function ta(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Vi(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}$r(Zi,Yr),Zi.prototype[Oi]=!0,Zi.prototype.removeEventListener=function(e,t,n,r){Gi(this,e,t,n,r)},Zi.prototype.M=function(){if(Zi.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Fi(n[r]);delete t.g[e],t.h--}}this.I=null},Zi.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Zi.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var na=Vr.JSON.stringify;function ra(){var e=fa,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ia,aa=function(){function e(){h(this,e),this.h=this.g=null}return p(e,[{key:"add",value:function(e,t){var n=oa.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),oa=new(function(){function e(t,n){h(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return p(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ua}),(function(e){return e.reset()})),ua=function(){function e(){h(this,e),this.next=this.g=this.h=null}return p(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function sa(e){Vr.setTimeout((function(){throw e}),0)}function ca(e,t){ia||function(){var e=Vr.Promise.resolve(void 0);ia=function(){e.then(ha)}}(),la||(ia(),la=!0),fa.add(e,t)}var la=!1,fa=new aa;function ha(){for(var e;e=ra();){try{e.h.call(e.g)}catch(n){sa(n)}var t=oa;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}la=!1}function da(e,t){Zi.call(this),this.h=e||1,this.g=t||Vr,this.j=Hr(this.kb,this),this.l=Date.now()}function pa(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function va(e,t,n){if("function"===typeof e)n&&(e=Hr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Hr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Vr.setTimeout(e,t||0)}function ma(e){e.g=va((function(){e.g=null,e.i&&(e.i=!1,ma(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}$r(da,Zi),(Lr=da.prototype).da=!1,Lr.S=null,Lr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ea(this,"tick"),this.da&&(pa(this),this.start()))}},Lr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Lr.M=function(){da.Z.M.call(this),pa(this),delete this.g};var ya=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return p(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ma(this)}},{key:"M",value:function(){Or(y(n.prototype),"M",this).call(this),this.g&&(Vr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Yr);function ga(e){Yr.call(this),this.h=e,this.g={}}$r(ga,Yr);var ka=[];function ba(e,t,n,r){Array.isArray(n)||(n&&(ka[0]=n.toString()),n=ka);for(var i=0;i<n.length;i++){var a=qi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function wa(e){ci(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Hi(e)}),e),e.g={}}function xa(){this.g=!0}function _a(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return na(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}ga.prototype.M=function(){ga.Z.M.call(this),wa(this)},ga.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xa.prototype.Aa=function(){this.g=!1},xa.prototype.info=function(){};var Ia={},Sa=null;function Ea(){return Sa=Sa||new Zi}function Ta(e){Di.call(this,Ia.Ma,e)}function Ca(e){var t=Ea();ea(t,new Ta(t,e))}function Na(e,t){Di.call(this,Ia.STAT_EVENT,e),this.stat=t}function Aa(e){var t=Ea();ea(t,new Na(t,e))}function Da(e,t){Di.call(this,Ia.Na,e),this.size=t}function Pa(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Vr.setTimeout((function(){e()}),t)}Ia.Ma="serverreachability",$r(Ta,Di),Ia.STAT_EVENT="statevent",$r(Na,Di),Ia.Na="timingevent",$r(Da,Di);var Ra={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Oa={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function La(){}function Ma(e){return e.h||(e.h=e.i())}function Fa(){}La.prototype.h=null;var Ua,Va={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ja(){Di.call(this,"d")}function Ba(){Di.call(this,"c")}function za(){}function qa(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new ga(this),this.P=Wa,e=gi?125:void 0,this.W=new da(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ka}function Ka(){this.i=null,this.g="",this.h=!1}$r(ja,Di),$r(Ba,Di),$r(za,La),za.prototype.g=function(){return new XMLHttpRequest},za.prototype.i=function(){return{}},Ua=new za;var Wa=45e3,Ga={},Ha={};function Qa(e,t,n){e.K=1,e.v=go(fo(t)),e.s=n,e.U=!0,$a(e,null)}function $a(e,t){e.F=Date.now(),Za(e),e.A=fo(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Do(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Ka,e.g=Ru(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ya(Hr(e.Ia,e,e.g),e.O)),ba(e.V,e.g,"readystatechange",e.gb),t=e.H?li(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ca(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Ya(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Ja(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Xa(e,n))==Ha){4==t&&(e.o=4,Aa(14),i=!1),_a(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ga){e.o=4,Aa(15),_a(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}_a(e.j,e.m,r,null),io(e,r)}Ya(e)&&r!=Ha&&r!=Ga&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Aa(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Su(t),t.L=!0,Aa(11))):(_a(e.j,e.m,n,"[Invalid Chunked Response]"),ro(e),no(e))}function Xa(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ha:(n=Number(t.substring(n,r)),isNaN(n)?Ga:(r+=1)+n>t.length?Ha:(t=t.substr(r,n),e.C=r+n,t))}function Za(e){e.Y=Date.now()+e.P,eo(e,e.P)}function eo(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Pa(Hr(e.eb,e),t)}function to(e){e.B&&(Vr.clearTimeout(e.B),e.B=null)}function no(e){0==e.l.G||e.I||Cu(e.l,e)}function ro(e){to(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,pa(e.W),wa(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function io(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Vo(n.i,e)))if(n.I=e.N,!e.J&&Vo(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Tu(n),mu(n)}Iu(n),Aa(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Pa(Hr(n.ab,n),6e3));if(1>=Uo(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Au(n,11)}else if((e.J||n.g==e)&&Tu(n),!ni(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ai(l,"spdy")||ai(l,"quic")||ai(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(jo(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,yo(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Pu(r,r.H?r.la:null,r.W),d.J){Bo(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(to(p),Za(p)),r.g=d}else _u(r);0<n.l.length&&ku(n)}else"stop"!=a[0]&&"close"!=a[0]||Au(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Au(n,7):vu(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Ca(4)}catch(a){}}function ao(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Br(e)||"string"===typeof e)Zr(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Br(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Br(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function oo(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof oo)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function uo(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];so(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)so(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function so(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Lr=qa.prototype).setTimeout=function(e){this.P=e},Lr.gb=function(e){e=e.target;var t=this.L;t&&3==lu(e)?t.l():this.Ia(e)},Lr.Ia=function(e){try{if(e==this.g)e:{var t=lu(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||gi||this.g&&(this.h.h||this.g.ga()||fu(this.g)))){this.I||4!=t||7==n||Ca(8==n||0>=r?3:2),to(this);var i=this.g.ba();this.N=i;t:if(Ya(this)){var a=fu(this.g);e="";var o=a.length,u=4==lu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ro(this),no(this);var s="";break t}this.h.i=new Vr.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ni(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Aa(12),ro(this),no(this);break e}_a(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,io(this,i)}this.U?(Ja(this,t,s),gi&&this.i&&3==t&&(ba(this.V,this.W,"tick",this.fb),this.W.start())):(_a(this.j,this.m,s,null),io(this,s)),4==t&&ro(this),this.i&&!this.I&&(4==t?Cu(this.l,this):(this.i=!1,Za(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Aa(12)):(this.o=0,Aa(13)),ro(this),no(this)}}}catch(t){}},Lr.fb=function(){if(this.g){var e=lu(this.g),t=this.g.ga();this.C<t.length&&(to(this),Ja(this,e,t),this.i&&4!=e&&Za(this))}},Lr.cancel=function(){this.I=!0,ro(this)},Lr.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ca(3),Aa(17)),ro(this),this.o=2,no(this)):eo(this,this.Y-e)},(Lr=oo.prototype).R=function(){uo(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Lr.T=function(){return uo(this),this.g.concat()},Lr.get=function(e,t){return so(this.h,e)?this.h[e]:t},Lr.set=function(e,t){so(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Lr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var co=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lo(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof lo){this.g=void 0!==t?t:e.g,ho(this,e.j),this.s=e.s,po(this,e.i),vo(this,e.m),this.l=e.l,t=e.h;var n=new To;n.i=t.i,t.g&&(n.g=new oo(t.g),n.h=t.h),mo(this,n),this.o=e.o}else e&&(n=String(e).match(co))?(this.g=!!t,ho(this,n[1]||"",!0),this.s=ko(n[2]||""),po(this,n[3]||"",!0),vo(this,n[4]),this.l=ko(n[5]||"",!0),mo(this,n[6]||"",!0),this.o=ko(n[7]||"")):(this.g=!!t,this.h=new To(null,this.g))}function fo(e){return new lo(e)}function ho(e,t,n){e.j=n?ko(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function po(e,t,n){e.i=n?ko(t,!0):t}function vo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function mo(e,t,n){t instanceof To?(e.h=t,function(e,t){t&&!e.j&&(Co(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(No(this,t),Do(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=bo(t,So)),e.h=new To(t,e.g))}function yo(e,t,n){e.h.set(t,n)}function go(e){return yo(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ko(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bo(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}lo.prototype.toString=function(){var e=[],t=this.j;t&&e.push(bo(t,xo,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(bo(t,xo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(bo(n,"/"==n.charAt(0)?Io:_o,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",bo(n,Eo)),e.join("")};var xo=/[#\/\?@]/g,_o=/[#\?:]/g,Io=/[#\?]/g,So=/[#\?@]/g,Eo=/#/g;function To(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Co(e){e.g||(e.g=new oo,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function No(e,t){Co(e),t=Po(e,t),so(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,so((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&uo(e)))}function Ao(e,t){return Co(e),t=Po(e,t),so(e.g.h,t)}function Do(e,t,n){No(e,t),0<n.length&&(e.i=null,e.g.set(Po(e,t),ti(n)),e.h+=n.length)}function Po(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Lr=To.prototype).add=function(e,t){Co(this),this.i=null,e=Po(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Lr.forEach=function(e,t){Co(this),this.g.forEach((function(n,r){Zr(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Lr.T=function(){Co(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Lr.R=function(e){Co(this);var t=[];if("string"===typeof e)Ao(this,e)&&(t=ei(t,this.g.get(Po(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ei(t,e[n])}return t},Lr.set=function(e,t){return Co(this),this.i=null,Ao(this,e=Po(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Lr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Lr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Ro=p((function e(t,n){h(this,e),this.h=t,this.g=n}));function Oo(e){this.l=e||Mo,Vr.PerformanceNavigationTiming?e=0<(e=Vr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Vr.g&&Vr.g.Ea&&Vr.g.Ea()&&Vr.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Lo,Mo=10;function Fo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Uo(e){return e.h?1:e.g?e.g.size:0}function Vo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function jo(e,t){e.g?e.g.add(t):e.h=t}function Bo(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function zo(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Dt(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return ti(e.i)}function qo(){}function Ko(){this.g=new qo}function Wo(e,t,n){var r=n||"";try{ao(e,(function(e,n){var i=e;zr(e)&&(i=na(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Go(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ho(e){this.l=e.$b||null,this.j=e.ib||!1}function Qo(e,t){Zi.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=$o,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Oo.prototype.cancel=function(){if(this.i=zo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Dt(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},qo.prototype.stringify=function(e){return Vr.JSON.stringify(e,void 0)},qo.prototype.parse=function(e){return Vr.JSON.parse(e,void 0)},$r(Ho,La),Ho.prototype.g=function(){return new Qo(this.l,this.j)},Ho.prototype.i=(Lo={},function(){return Lo}),$r(Qo,Zi);var $o=0;function Yo(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Jo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Xo(e)}function Xo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Lr=Qo.prototype).open=function(e,t){if(this.readyState!=$o)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Xo(this)},Lr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Vr).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Lr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jo(this)),this.readyState=$o},Lr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Xo(this)),this.g&&(this.readyState=3,Xo(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Vr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Yo(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Lr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Jo(this):Xo(this),3==this.readyState&&Yo(this)}},Lr.Ua=function(e){this.g&&(this.response=this.responseText=e,Jo(this))},Lr.Ta=function(e){this.g&&(this.response=e,Jo(this))},Lr.ha=function(){this.g&&Jo(this)},Lr.setRequestHeader=function(e,t){this.v.append(e,t)},Lr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Lr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Qo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Zo=Vr.JSON.parse;function eu(e){Zi.call(this),this.headers=new oo,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tu,this.K=this.L=!1}$r(eu,Zi);var tu="",nu=/^https?$/i,ru=["POST","PUT"];function iu(e){return"content-type"==e.toLowerCase()}function au(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ou(e),su(e)}function ou(e){e.D||(e.D=!0,ea(e,"complete"),ea(e,"error"))}function uu(e){if(e.h&&"undefined"!=typeof Ur&&(!e.C[1]||4!=lu(e)||2!=e.ba()))if(e.v&&4==lu(e))va(e.Fa,0,e);else if(ea(e,"readystatechange"),4==lu(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(co)[1]||null;if(!a&&Vr.self&&Vr.self.location){var o=Vr.self.location.protocol;a=o.substr(0,o.length-1)}i=!nu.test(a?a.toLowerCase():"")}t=i}if(t)ea(e,"complete"),ea(e,"success");else{e.m=6;try{var u=2<lu(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",ou(e)}}finally{su(e)}}}function su(e,t){if(e.g){cu(e);var n=e.g,r=e.C[0]?jr:null;e.g=null,e.C=null,t||ea(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function cu(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Vr.clearTimeout(e.A),e.A=null)}function lu(e){return e.g?e.g.readyState:0}function fu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case tu:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function hu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return ci(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):yo(e,t,n))}function du(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function pu(e){this.za=0,this.l=[],this.h=new xa,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=du("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=du("baseRetryDelayMs",5e3,e),this.$a=du("retryDelaySeedMs",1e4,e),this.Ya=du("forwardChannelMaxRetries",2,e),this.ra=du("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Oo(e&&e.concurrentRequestLimit),this.Ca=new Ko,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function vu(e){if(yu(e),3==e.G){var t=e.V++,n=fo(e.F);yo(n,"SID",e.J),yo(n,"RID",t),yo(n,"TYPE","terminate"),wu(e,n),(t=new qa(e,e.h,t,void 0)).K=2,t.v=go(fo(n)),n=!1,Vr.navigator&&Vr.navigator.sendBeacon&&(n=Vr.navigator.sendBeacon(t.v.toString(),"")),!n&&Vr.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ru(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Za(t)}Du(e)}function mu(e){e.g&&(Su(e),e.g.cancel(),e.g=null)}function yu(e){mu(e),e.u&&(Vr.clearTimeout(e.u),e.u=null),Tu(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Vr.clearTimeout(e.m),e.m=null)}function gu(e,t){e.l.push(new Ro(e.Za++,t)),3==e.G&&ku(e)}function ku(e){Fo(e.i)||e.m||(e.m=!0,ca(e.Ha,e),e.C=0)}function bu(e,t){var n;n=t?t.m:e.V++;var r=fo(e.F);yo(r,"SID",e.J),yo(r,"RID",n),yo(r,"AID",e.U),wu(e,r),e.o&&e.s&&hu(r,e.o,e.s),n=new qa(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=xu(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),jo(e.i,n),Qa(n,r,t)}function wu(e,t){e.j&&ao({},(function(e,n){yo(t,n,e)}))}function xu(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Hr(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Wo(l,o,"req"+c+"_")}catch(us){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function _u(e){e.g||e.u||(e.Y=1,ca(e.Ga,e),e.A=0)}function Iu(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Pa(Hr(e.Ga,e),Nu(e,e.A)),e.A++,!0)}function Su(e){null!=e.B&&(Vr.clearTimeout(e.B),e.B=null)}function Eu(e){e.g=new qa(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=fo(e.oa);yo(t,"RID","rpc"),yo(t,"SID",e.J),yo(t,"CI",e.N?"0":"1"),yo(t,"AID",e.U),wu(e,t),yo(t,"TYPE","xmlhttp"),e.o&&e.s&&hu(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=go(fo(t)),n.s=null,n.U=!0,$a(n,e)}function Tu(e){null!=e.v&&(Vr.clearTimeout(e.v),e.v=null)}function Cu(e,t){var n=null;if(e.g==t){Tu(e),Su(e),e.g=null;var r=2}else{if(!Vo(e.i,t))return;n=t.D,Bo(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ea(r=Ea(),new Da(r,n,t,i)),ku(e)}else _u(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Uo(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Pa(Hr(e.Ha,e,t),Nu(e,e.C)),e.C++,!0))}(e,t)||2==r&&Iu(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Au(e,5);break;case 4:Au(e,10);break;case 3:Au(e,6);break;default:Au(e,2)}}function Nu(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Au(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Hr(e.jb,e);n||(n=new lo("//www.google.com/images/cleardot.gif"),Vr.location&&"http"==Vr.location.protocol||ho(n,"https"),go(n)),function(e,t){var n=new xa;if(Vr.Image){var r=new Image;r.onload=Qr(Go,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Qr(Go,n,r,"TestLoadImage: error",!1,t),r.onabort=Qr(Go,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Qr(Go,n,r,"TestLoadImage: timeout",!1,t),Vr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Aa(2);e.G=0,e.j&&e.j.va(t),Du(e),yu(e)}function Du(e){e.G=0,e.I=-1,e.j&&(0==zo(e.i).length&&0==e.l.length||(e.i.i.length=0,ti(e.l),e.l.length=0),e.j.ua())}function Pu(e,t,n){var r=function(e){return e instanceof lo?fo(e):new lo(e,void 0)}(n);if(""!=r.i)t&&po(r,t+"."+r.i),vo(r,r.m);else{var i=Vr.location;r=function(e,t,n,r){var i=new lo(null,void 0);return e&&ho(i,e),t&&po(i,t),n&&vo(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&ci(e.aa,(function(e,t){yo(r,t,e)})),t=e.D,n=e.sa,t&&n&&yo(r,t,n),yo(r,"VER",e.ma),wu(e,r),r}function Ru(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new eu(new Ho({ib:!0})):new eu(e.qa)).L=e.H,t}function Ou(){}function Lu(){if(mi&&!(10<=Number(Ni)))throw Error("Environmental error: no available transport.")}function Mu(e,t){Zi.call(this),this.g=new pu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ni(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ni(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Vu(this)}function Fu(e){ja.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Uu(){Ba.call(this),this.status=1}function Vu(e){this.g=e}(Lr=eu.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ua.g(),this.C=this.u?Ma(this.u):Ma(Ua),this.g.onreadystatechange=Hr(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void au(this,a)}e=n||"";var i=new oo(this.headers);r&&ao(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=iu,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Vr.FormData&&e instanceof Vr.FormData,!(0<=Xr(ru,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{cu(this),0<this.B&&((this.K=function(e){return mi&&Ti()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hr(this.pa,this)):this.A=va(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){au(this,a)}},Lr.pa=function(){"undefined"!=typeof Ur&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ea(this,"timeout"),this.abort(8))},Lr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ea(this,"complete"),ea(this,"abort"),su(this))},Lr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),su(this,!0)),eu.Z.M.call(this)},Lr.Fa=function(){this.s||(this.F||this.v||this.l?uu(this):this.cb())},Lr.cb=function(){uu(this)},Lr.ba=function(){try{return 2<lu(this)?this.g.status:-1}catch(Lo){return-1}},Lr.ga=function(){try{return this.g?this.g.responseText:""}catch(Lo){return""}},Lr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Zo(t)}},Lr.Da=function(){return this.m},Lr.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Lr=pu.prototype).ma=8,Lr.G=1,Lr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Lr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new qa(this,this.h,e,void 0),n=this.s;if(this.P&&(n?hi(n=li(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=xu(this,t,r),yo(i=fo(this.F),"RID",e),yo(i,"CVER",22),this.D&&yo(i,"X-HTTP-Session-Id",this.D),wu(this,i),this.o&&n&&hu(i,this.o,n),jo(this.i,t),this.Ra&&yo(i,"TYPE","init"),this.ja?(yo(i,"$req",r),yo(i,"SID","null"),t.$=!0,Qa(t,i,null)):Qa(t,i,r),this.G=2}}else 3==this.G&&(e?bu(this,e):0==this.l.length||Fo(this.i)||bu(this))},Lr.Ga=function(){if(this.u=null,Eu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Pa(Hr(this.bb,this),e)}},Lr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Aa(10),mu(this),Eu(this))},Lr.ab=function(){null!=this.v&&(this.v=null,mu(this),Iu(this),Aa(19))},Lr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Aa(2)):(this.h.info("Failed to ping google.com"),Aa(1))},(Lr=Ou.prototype).xa=function(){},Lr.wa=function(){},Lr.va=function(){},Lr.ua=function(){},Lr.Oa=function(){},Lu.prototype.g=function(e,t){return new Mu(e,t)},$r(Mu,Zi),Mu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),ca(Hr(e.hb,e,t))),Aa(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Pu(e,null,e.W),ku(e)},Mu.prototype.close=function(){vu(this.g)},Mu.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,gu(this.g,t)}else this.v?((t={}).__data__=na(e),gu(this.g,t)):gu(this.g,e)},Mu.prototype.M=function(){this.g.j=null,delete this.j,vu(this.g),delete this.g,Mu.Z.M.call(this)},$r(Fu,ja),$r(Uu,Ba),$r(Vu,Ou),Vu.prototype.xa=function(){ea(this.g,"a")},Vu.prototype.wa=function(e){ea(this.g,new Fu(e))},Vu.prototype.va=function(e){ea(this.g,new Uu(e))},Vu.prototype.ua=function(){ea(this.g,"b")},Lu.prototype.createWebChannel=Lu.prototype.g,Mu.prototype.send=Mu.prototype.u,Mu.prototype.open=Mu.prototype.m,Mu.prototype.close=Mu.prototype.close,Ra.NO_ERROR=0,Ra.TIMEOUT=8,Ra.HTTP_ERROR=6,Oa.COMPLETE="complete",Fa.EventType=Va,Va.OPEN="a",Va.CLOSE="b",Va.ERROR="c",Va.MESSAGE="d",Zi.prototype.listen=Zi.prototype.N,eu.prototype.listenOnce=eu.prototype.O,eu.prototype.getLastError=eu.prototype.La,eu.prototype.getLastErrorCode=eu.prototype.Da,eu.prototype.getStatus=eu.prototype.ba,eu.prototype.getResponseJson=eu.prototype.Qa,eu.prototype.getResponseText=eu.prototype.ga,eu.prototype.send=eu.prototype.ea;var ju=Fr.createWebChannelTransport=function(){return new Lu},Bu=Fr.getStatEventTarget=function(){return Ea()},zu=Fr.ErrorCode=Ra,qu=Fr.EventType=Oa,Ku=Fr.Event=Ia,Wu=Fr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Gu=Fr.FetchXmlHttpFactory=Ho,Hu=Fr.WebChannel=Fa,Qu=Fr.XhrIo=eu,$u="@firebase/firestore",Yu=function(){function e(t){h(this,e),this.uid=t}return p(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Yu.UNAUTHENTICATED=new Yu(null),Yu.GOOGLE_CREDENTIALS=new Yu("google-credentials-uid"),Yu.FIRST_PARTY=new Yu("first-party-uid"),Yu.MOCK_USER=new Yu("mock-user");var Ju="9.8.0",Xu=new bn("@firebase/firestore");function Zu(){return Xu.logLevel}function es(e){if(Xu.logLevel<=dn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(rs);Xu.debug.apply(Xu,["Firestore (".concat(Ju,"): ").concat(e)].concat(ge(i)))}}function ts(e){if(Xu.logLevel<=dn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(rs);Xu.error.apply(Xu,["Firestore (".concat(Ju,"): ").concat(e)].concat(ge(i)))}}function ns(e){if(Xu.logLevel<=dn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(rs);Xu.warn.apply(Xu,["Firestore (".concat(Ju,"): ").concat(e)].concat(ge(i)))}}function rs(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function is(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ju,") INTERNAL ASSERTION FAILED: ")+e;throw ts(t),new Error(t)}function as(e,t){e||is()}function os(e,t){return e}var us={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ss=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return p(n)}(Qt),cs=p((function e(){var t=this;h(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),ls=p((function e(t,n){h(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),fs=function(){function e(){h(this,e)}return p(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Yu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),hs=function(){function e(t){h(this,e),this.token=t,this.changeListener=null}return p(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),ds=function(){function e(t){h(this,e),this.t=t,this.currentUser=Yu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new cs;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new cs,e.enqueueRetryable((function(){return i(n.currentUser)}))};var u=function(){var t=a;e.enqueueRetryable(f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){es("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(es("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new cs)}}),0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(es("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(as("string"==typeof n.accessToken),new ls(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return as(null===e||"string"==typeof e),new Yu(e)}}]),e}(),ps=p((function e(t,n,r){h(this,e),this.type="FirstParty",this.user=Yu.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),vs=function(){function e(t,n,r){h(this,e),this.h=t,this.l=n,this.m=r}return p(e,[{key:"getToken",value:function(){return Promise.resolve(new ps(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Yu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ms=p((function e(t){h(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),ys=function(){function e(t){h(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return p(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&es("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,es("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){es("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):es("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(as("string"==typeof t.token),e.p=t.token,new ms(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),gs=function(){function e(t,n){var r=this;h(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return p(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function ks(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}gs.A=-1;var bs=function(){function e(){h(this,e)}return p(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ks(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function ws(e,t){return e<t?-1:e>t?1:0}function xs(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function _s(e){return e+"\0"}var Is=function(){function e(t,n){if(h(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new ss(us.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ss(us.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ss(us.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ss(us.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return p(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?ws(this.nanoseconds,e.nanoseconds):ws(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ss=function(){function e(t){h(this,e),this.timestamp=t}return p(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Is(0,0))}},{key:"max",value:function(){return new e(new Is(253402300799,999999999))}}]),e}();function Es(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ts(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Cs(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ns=function(){function e(t,n,r){h(this,e),void 0===n?n=0:n>t.length&&is(),void 0===r?r=t.length-n:r>t.length-n&&is(),this.segments=t,this.offset=n,this.len=r}return p(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),As=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new ss(us.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ge(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ns),Ds=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ps=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ds.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new ss(us.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new ss(us.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new ss(us.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new ss(us.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ns),Rs=function(){function e(t){h(this,e),this.fields=t,t.sort(Ps.comparator)}return p(e,[{key:"covers",value:function(e){var t,n=Dt(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return xs(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Os=function(e){function t(e){h(this,t),this.binaryString=e}return p(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return ws(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Os.EMPTY_BYTE_STRING=new Os("");var Ls=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ms(e){if(as(!!e),"string"==typeof e){var t=0,n=Ls.exec(e);if(as(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Fs(e.seconds),nanos:Fs(e.nanos)}}function Fs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Us(e){return"string"==typeof e?Os.fromBase64String(e):Os.fromUint8Array(e)}function Vs(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function js(e){var t=e.mapValue.fields.__previous_value__;return Vs(t)?js(t):t}function Bs(e){var t=Ms(e.mapValue.fields.__local_write_time__.timestampValue);return new Is(t.seconds,t.nanos)}var zs=p((function e(t,n,r,i,a,o,u,s){h(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),qs=function(){function e(t,n){h(this,e),this.projectId=t,this.database=n||"(default)"}return p(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ks(e){return null==e}function Ws(e){return 0===e&&1/e==-1/0}function Gs(e){return"number"==typeof e&&Number.isInteger(e)&&!Ws(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Hs=function(){function e(t){h(this,e),this.path=t}return p(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===As.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(As.fromString(t))}},{key:"fromName",value:function(t){return new e(As.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(As.emptyPath())}},{key:"comparator",value:function(e,t){return As.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new As(t.slice()))}}]),e}(),Qs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$s={nullValue:"NULL_VALUE"};function Ys(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Vs(e)?4:lc(e)?9007199254740991:10:is()}function Js(e,t){if(e===t)return!0;var n=Ys(e);if(n!==Ys(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Bs(e).isEqual(Bs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ms(e.timestampValue),r=Ms(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Us(e.bytesValue).isEqual(Us(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Fs(e.geoPointValue.latitude)===Fs(t.geoPointValue.latitude)&&Fs(e.geoPointValue.longitude)===Fs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Fs(e.integerValue)===Fs(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Fs(e.doubleValue),r=Fs(t.doubleValue);return n===r?Ws(n)===Ws(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return xs(e.arrayValue.values||[],t.arrayValue.values||[],Js);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Es(n)!==Es(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Js(n[i],r[i])))return!1;return!0}(e,t);default:return is()}}function Xs(e,t){return void 0!==(e.values||[]).find((function(e){return Js(e,t)}))}function Zs(e,t){if(e===t)return 0;var n=Ys(e),r=Ys(t);if(n!==r)return ws(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ws(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Fs(e.integerValue||e.doubleValue),r=Fs(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ec(e.timestampValue,t.timestampValue);case 4:return ec(Bs(e),Bs(t));case 5:return ws(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Us(e),r=Us(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=ws(n[i],r[i]);if(0!==a)return a}return ws(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=ws(Fs(e.latitude),Fs(t.latitude));return 0!==n?n:ws(Fs(e.longitude),Fs(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Zs(n[i],r[i]);if(a)return a}return ws(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Qs.mapValue&&t===Qs.mapValue)return 0;if(e===Qs.mapValue)return 1;if(t===Qs.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=ws(r[o],a[o]);if(0!==u)return u;var s=Zs(n[r[o]],i[a[o]]);if(0!==s)return s}return ws(r.length,a.length)}(e.mapValue,t.mapValue);default:throw is()}}function ec(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ws(e,t);var n=Ms(e),r=Ms(t),i=ws(n.seconds,r.seconds);return 0!==i?i:ws(n.nanos,r.nanos)}function tc(e){return nc(e)}function nc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ms(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Us(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Hs.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Dt(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=nc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Dt(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(nc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):is();var t,n}function rc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ic(e){return!!e&&"integerValue"in e}function ac(e){return!!e&&"arrayValue"in e}function oc(e){return!!e&&"nullValue"in e}function uc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function sc(e){return!!e&&"mapValue"in e}function cc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ts(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=cc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=cc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function lc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function fc(e){return"nullValue"in e?$s:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?rc(qs.empty(),Hs.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:is()}function hc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?rc(qs.empty(),Hs.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Qs:is()}function dc(e,t){var n=Zs(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function pc(e,t){var n=Zs(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var vc=function(){function e(t){h(this,e),this.value=t}return p(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!sc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(t)}},{key:"setAll",value:function(e){var t=this,n=Ps.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=cc(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());sc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Js(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];sc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ts(t,(function(t,n){return e[t]=n}));var r,i=Dt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(cc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function mc(e){var t=[];return Ts(e.fields,(function(e,n){var r=new Ps([e]);if(sc(n)){var i=mc(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Dt(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Rs(t)}var yc=function(){function e(t,n,r,i,a,o){h(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return p(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=vc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=vc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ss.min(),Ss.min(),vc.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ss.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ss.min(),vc.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ss.min(),vc.empty(),2)}}]),e}(),gc=p((function e(t,n,r,i){h(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function kc(e){return e.fields.find((function(e){return 2===e.kind}))}function bc(e){return e.fields.filter((function(e){return 2!==e.kind}))}gc.UNKNOWN_ID=-1;var wc=p((function e(t,n){h(this,e),this.fieldPath=t,this.kind=n})),xc=function(){function e(t,n){h(this,e),this.sequenceNumber=t,this.offset=n}return p(e,null,[{key:"empty",value:function(){return new e(0,Sc.min())}}]),e}();function _c(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ss.fromTimestamp(1e9===r?new Is(n+1,0):new Is(n,r));return new Sc(i,Hs.empty(),t)}function Ic(e){return new Sc(e.readTime,e.key,-1)}var Sc=function(){function e(t,n,r){h(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return p(e,null,[{key:"min",value:function(){return new e(Ss.min(),Hs.empty(),-1)}},{key:"max",value:function(){return new e(Ss.max(),Hs.empty(),-1)}}]),e}();function Ec(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Hs.comparator(e.documentKey,t.documentKey))?n:ws(e.largestBatchId,t.largestBatchId)}var Tc=function(){function e(t,n){h(this,e),this.comparator=t,this.root=n||Nc.EMPTY}return p(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Nc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Nc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Cc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Cc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Cc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Cc(this.root,e,this.comparator,!0)}}]),e}(),Cc=function(){function e(t,n,r,i){h(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return p(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Nc=function(){function e(t,n,r,i,a){h(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return p(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw is();if(this.right.isRed())throw is();var e=this.left.check();if(e!==this.right.check())throw is();return e+(this.isRed()?0:1)}}]),e}();Nc.EMPTY=null,Nc.RED=!0,Nc.BLACK=!1,Nc.EMPTY=new(function(){function e(){h(this,e),this.size=0}return p(e,[{key:"key",get:function(){throw is()}},{key:"value",get:function(){throw is()}},{key:"color",get:function(){throw is()}},{key:"left",get:function(){throw is()}},{key:"right",get:function(){throw is()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Nc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Ac=function(){function e(t){h(this,e),this.comparator=t,this.data=new Tc(this.comparator)}return p(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Dc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Dc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Dc=function(){function e(t){h(this,e),this.iter=t}return p(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Pc(e){return e.hasNext()?e.getNext():void 0}var Rc=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;h(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function Oc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Rc(e,t,n,r,i,a,o)}function Lc(e){var t=os(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+tc(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ks(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return tc(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return tc(e)})).join(",")),t.P=n}return t.P}function Mc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Xc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Js(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!el(e.startAt,t.startAt)&&el(e.endAt,t.endAt)}function Fc(e){return Hs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Uc(e,t){return e.filters.filter((function(e){return e instanceof Bc&&e.field.isEqual(t)}))}function Vc(e,t,n){var r,i=$s,a=!0,o=Dt(Uc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=$s,c=!0;switch(u.op){case"<":case"<=":s=fc(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=$s}dc({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];dc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function jc(e,t,n){var r,i=Qs,a=!0,o=Dt(Uc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Qs,c=!0;switch(u.op){case">=":case">":s=hc(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Qs}pc({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];pc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Bc=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Zs(t,this.value)):null!==t&&Ys(this.value)===Ys(t)&&this.v(Zs(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return is()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new zc(e,t,r):"array-contains"===t?new Gc(e,r):"in"===t?new Hc(e,r):"not-in"===t?new Qc(e,r):"array-contains-any"===t?new $c(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new qc(e,n):new Kc(e,n)}}]),n}(function(){return p((function e(){h(this,e)}))}()),zc=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r,i)).key=Hs.fromName(i.referenceValue),a}return p(n,[{key:"matches",value:function(e){var t=Hs.comparator(e.key,this.key);return this.v(t)}}]),n}(Bc),qc=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,"in",r)).keys=Wc("in",r),i}return p(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Bc),Kc=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,"not-in",r)).keys=Wc("not-in",r),i}return p(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Bc);function Wc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Hs.fromName(e.referenceValue)}))}var Gc=function(e){m(n,e);var t=w(n);function n(e,r){return h(this,n),t.call(this,e,"array-contains",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ac(t)&&Xs(t.arrayValue,this.value)}}]),n}(Bc),Hc=function(e){m(n,e);var t=w(n);function n(e,r){return h(this,n),t.call(this,e,"in",r)}return p(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Xs(this.value.arrayValue,t)}}]),n}(Bc),Qc=function(e){m(n,e);var t=w(n);function n(e,r){return h(this,n),t.call(this,e,"not-in",r)}return p(n,[{key:"matches",value:function(e){if(Xs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Xs(this.value.arrayValue,t)}}]),n}(Bc),$c=function(e){m(n,e);var t=w(n);function n(e,r){return h(this,n),t.call(this,e,"array-contains-any",r)}return p(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ac(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Xs(t.value.arrayValue,e)}))}}]),n}(Bc),Yc=p((function e(t,n){h(this,e),this.position=t,this.inclusive=n})),Jc=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";h(this,e),this.field=t,this.dir=n}));function Xc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Zc(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Hs.comparator(Hs.fromName(o.referenceValue),n.key):Zs(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function el(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Js(e.position[n],t.position[n]))return!1;return!0}var tl=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;h(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function nl(e,t,n,r,i,a,o,u){return new tl(e,t,n,r,i,a,o,u)}function rl(e){return new tl(e)}function il(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function al(e){var t,n=Dt(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function ol(e){return null!==e.collectionGroup}function ul(e){var t=os(e);if(null===t.D){t.D=[];var n=al(t),r=il(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Jc(n)),t.D.push(new Jc(Ps.keyField(),"asc"));else{var i,a=!1,o=Dt(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Jc(Ps.keyField(),s))}}}return t.D}function sl(e){var t=os(e);if(!t.C)if("F"===t.limitType)t.C=Oc(t.path,t.collectionGroup,ul(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Dt(ul(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Jc(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Yc(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Yc(t.startAt.position,t.startAt.inclusive):null;t.C=Oc(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function cl(e,t,n){return new tl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ll(e,t){return Mc(sl(e),sl(t))&&e.limitType===t.limitType}function fl(e){return"".concat(Lc(sl(e)),"|lt:").concat(e.limitType)}function hl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(tc(t.value));var t})).join(", "),"]")),Ks(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return tc(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return tc(e)})).join(",")),"Target(".concat(t,")")}(sl(e)),"; limitType=").concat(e.limitType,")")}function dl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Hs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Dt(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Dt(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Zc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ul(e),t))&&!(e.endAt&&!function(e,t,n){var r=Zc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ul(e),t))}(e,t)}function pl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vl(e){return function(t,n){var r,i=!1,a=Dt(ul(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=ml(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function ml(e,t,n){var r=e.field.isKeyField()?Hs.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Zs(r,i):is()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return is()}}function yl(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ws(t)?"-0":t}}function gl(e){return{integerValue:""+e}}function kl(e,t){return Gs(t)?gl(t):yl(e,t)}var bl=p((function e(){h(this,e),this._=void 0}));function wl(e,t,n){return e instanceof Il?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Sl?El(e,t):e instanceof Tl?Cl(e,t):function(e,t){var n=_l(e,t),r=Al(n)+Al(e.k);return ic(n)&&ic(e.k)?gl(r):yl(e.M,r)}(e,t)}function xl(e,t,n){return e instanceof Sl?El(e,t):e instanceof Tl?Cl(e,t):n}function _l(e,t){return e instanceof Nl?ic(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Il=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n)}(bl),Sl=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this)).elements=e,r}return p(n)}(bl);function El(e,t){var n,r=Dl(t),i=Dt(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Js(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Tl=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this)).elements=e,r}return p(n)}(bl);function Cl(e,t){var n,r=Dl(t),i=Dt(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Js(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Nl=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).M=e,i.k=r,i}return p(n)}(bl);function Al(e){return Fs(e.integerValue||e.doubleValue)}function Dl(e){return ac(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Pl=p((function e(t,n){h(this,e),this.field=t,this.transform=n}));var Rl=p((function e(t,n){h(this,e),this.version=t,this.transformResults=n})),Ol=function(){function e(t,n){h(this,e),this.updateTime=t,this.exists=n}return p(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Ll(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ml=p((function e(){h(this,e)}));function Fl(e,t,n){e instanceof zl?function(e,t,n){var r=e.value.clone(),i=Wl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ql?function(e,t,n){if(Ll(e.precondition,t)){var r=Wl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Kl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ul(e,t,n){e instanceof zl?function(e,t,n){if(Ll(e.precondition,t)){var r=e.value.clone(),i=Gl(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Bl(t),r).setHasLocalMutations()}}(e,t,n):e instanceof ql?function(e,t,n){if(Ll(e.precondition,t)){var r=Gl(e.fieldTransforms,n,t),i=t.data;i.setAll(Kl(e)),i.setAll(r),t.convertToFoundDocument(Bl(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Ll(e.precondition,t)&&t.convertToNoDocument(Ss.min())}(e,t)}function Vl(e,t){var n,r=null,i=Dt(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=_l(a.transform,o||null);null!=u&&(null==r&&(r=vc.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function jl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&xs(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Sl&&t instanceof Sl||e instanceof Tl&&t instanceof Tl?xs(e.elements,t.elements,Js):e instanceof Nl&&t instanceof Nl?Js(e.k,t.k):e instanceof Il&&t instanceof Il}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Bl(e){return e.isFoundDocument()?e.version:Ss.min()}var zl=function(e){m(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return h(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return p(n)}(Ml),ql=function(e){m(n,e);var t=w(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return h(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return p(n)}(Ml);function Kl(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Wl(e,t,n){var r=new Map;as(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,xl(o,u,n[i]))}return r}function Gl(e,t,n){var r,i=new Map,a=Dt(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,wl(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Hl,Ql,$l=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return p(n)}(Ml),Yl=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return p(n)}(Ml),Jl=p((function e(t){h(this,e),this.count=t}));function Xl(e){switch(e){default:return is();case us.CANCELLED:case us.UNKNOWN:case us.DEADLINE_EXCEEDED:case us.RESOURCE_EXHAUSTED:case us.INTERNAL:case us.UNAVAILABLE:case us.UNAUTHENTICATED:return!1;case us.INVALID_ARGUMENT:case us.NOT_FOUND:case us.ALREADY_EXISTS:case us.PERMISSION_DENIED:case us.FAILED_PRECONDITION:case us.ABORTED:case us.OUT_OF_RANGE:case us.UNIMPLEMENTED:case us.DATA_LOSS:return!0}}function Zl(e){if(void 0===e)return ts("GRPC error has no .code"),us.UNKNOWN;switch(e){case Hl.OK:return us.OK;case Hl.CANCELLED:return us.CANCELLED;case Hl.UNKNOWN:return us.UNKNOWN;case Hl.DEADLINE_EXCEEDED:return us.DEADLINE_EXCEEDED;case Hl.RESOURCE_EXHAUSTED:return us.RESOURCE_EXHAUSTED;case Hl.INTERNAL:return us.INTERNAL;case Hl.UNAVAILABLE:return us.UNAVAILABLE;case Hl.UNAUTHENTICATED:return us.UNAUTHENTICATED;case Hl.INVALID_ARGUMENT:return us.INVALID_ARGUMENT;case Hl.NOT_FOUND:return us.NOT_FOUND;case Hl.ALREADY_EXISTS:return us.ALREADY_EXISTS;case Hl.PERMISSION_DENIED:return us.PERMISSION_DENIED;case Hl.FAILED_PRECONDITION:return us.FAILED_PRECONDITION;case Hl.ABORTED:return us.ABORTED;case Hl.OUT_OF_RANGE:return us.OUT_OF_RANGE;case Hl.UNIMPLEMENTED:return us.UNIMPLEMENTED;case Hl.DATA_LOSS:return us.DATA_LOSS;default:return is()}}(Ql=Hl||(Hl={}))[Ql.OK=0]="OK",Ql[Ql.CANCELLED=1]="CANCELLED",Ql[Ql.UNKNOWN=2]="UNKNOWN",Ql[Ql.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ql[Ql.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ql[Ql.NOT_FOUND=5]="NOT_FOUND",Ql[Ql.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ql[Ql.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ql[Ql.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ql[Ql.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ql[Ql.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ql[Ql.ABORTED=10]="ABORTED",Ql[Ql.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ql[Ql.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ql[Ql.INTERNAL=13]="INTERNAL",Ql[Ql.UNAVAILABLE=14]="UNAVAILABLE",Ql[Ql.DATA_LOSS=15]="DATA_LOSS";var ef=function(){function e(t,n){h(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return p(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Dt(n);try{for(i.s();!(r=i.n()).done;){var a=E(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ts(this.inner,(function(t,n){var r,i=Dt(n);try{for(i.s();!(r=i.n()).done;){var a=E(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Cs(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),tf=new Tc(Hs.comparator);function nf(){return tf}var rf=new Tc(Hs.comparator);function af(){for(var e=rf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function of(){return new ef((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var uf=new Tc(Hs.comparator),sf=new Ac(Hs.comparator);function cf(){for(var e=sf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var lf=new Ac(ws);function ff(){return lf}var hf=function(){function e(t,n,r,i,a){h(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return p(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,df.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ss.min(),r,ff(),nf(),cf())}}]),e}(),df=function(){function e(t,n,r,i,a){h(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return p(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Os.EMPTY_BYTE_STRING,n,cf(),cf(),cf())}}]),e}(),pf=p((function e(t,n,r,i){h(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),vf=p((function e(t,n){h(this,e),this.targetId=t,this.$=n})),mf=p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Os.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;h(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),yf=function(){function e(){h(this,e),this.B=0,this.L=bf(),this.U=Os.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return p(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=cf(),t=cf(),n=cf();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:is()}})),new df(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=bf()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),gf=function(){function e(t){h(this,e),this.nt=t,this.st=new Map,this.it=nf(),this.rt=kf(),this.ot=new Ac(ws)}return p(e,[{key:"ut",value:function(e){var t,n=Dt(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=Dt(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:is()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Fc(i))if(0===n){var a=new Hs(i.path);this.ct(t,a,yc.newNoDocument(a,Ss.min()))}else as(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Fc(a.target)){var o=new Hs(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,yc.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=cf();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new hf(e,n,this.ot,this.it,r);return this.it=nf(),this.rt=kf(),this.ot=new Ac(ws),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new yf,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Ac(ws),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||es("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new yf),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function kf(){return new Tc(Hs.comparator)}function bf(){return new Tc(Hs.comparator)}var wf={asc:"ASCENDING",desc:"DESCENDING"},xf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_f=p((function e(t,n){h(this,e),this.databaseId=t,this.N=n}));function If(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sf(e,t){return e.N?t.toBase64():t.toUint8Array()}function Ef(e,t){return If(e,t.toTimestamp())}function Tf(e){return as(!!e),Ss.fromTimestamp(function(e){var t=Ms(e);return new Is(t.seconds,t.nanos)}(e))}function Cf(e,t){return function(e){return new As(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Nf(e){var t=As.fromString(e);return as(Xf(t)),t}function Af(e,t){return Cf(e.databaseId,t.path)}function Df(e,t){var n=Nf(t);if(n.get(1)!==e.databaseId.projectId)throw new ss(us.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ss(us.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Hs(Lf(n))}function Pf(e,t){return Cf(e.databaseId,t)}function Rf(e){var t=Nf(e);return 4===t.length?As.emptyPath():Lf(t)}function Of(e){return new As(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Lf(e){return as(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Mf(e,t,n){return{name:Af(e,t),fields:n.value.mapValue.fields}}function Ff(e,t,n){var r=Df(e,t.name),i=Tf(t.updateTime),a=new vc({mapValue:{fields:t.fields}}),o=yc.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Uf(e,t){return"found"in t?function(e,t){as(!!t.found),t.found.name,t.found.updateTime;var n=Df(e,t.found.name),r=Tf(t.found.updateTime),i=new vc({mapValue:{fields:t.found.fields}});return yc.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){as(!!t.missing),as(!!t.readTime);var n=Df(e,t.missing),r=Tf(t.readTime);return yc.newNoDocument(n,r)}(e,t):is()}function Vf(e,t){var n;if(t instanceof zl)n={update:Mf(e,t.key,t.value)};else if(t instanceof $l)n={delete:Af(e,t.key)};else if(t instanceof ql)n={update:Mf(e,t.key,t.data),updateMask:Jf(t.fieldMask)};else{if(!(t instanceof Yl))return is();n={verify:Af(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Il)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Sl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Tl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Nl)return{fieldPath:t.field.canonicalString(),increment:n.k};throw is()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ef(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:is()}(e,t.precondition)),n}function jf(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ol.updateTime(Tf(e.updateTime)):void 0!==e.exists?Ol.exists(e.exists):Ol.none()}(t.currentDocument):Ol.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)as("REQUEST_TIME"===t.setToServerValue),n=new Il;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Sl(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Tl(i)}else"increment"in t?n=new Nl(e,t.increment):is();var a=Ps.fromServerFormat(t.fieldPath);return new Pl(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Df(e,t.update.name),a=new vc({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Rs(t.map((function(e){return Ps.fromServerFormat(e)})))}(t.updateMask);return new ql(i,a,o,n,r)}return new zl(i,a,n,r)}if(t.delete){var u=Df(e,t.delete);return new $l(u,n)}if(t.verify){var s=Df(e,t.verify);return new Yl(s,n)}return is()}function Bf(e,t){return{documents:[Pf(e,t.path)]}}function zf(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Pf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Pf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(uc(e.value))return{unaryFilter:{field:Hf(e.field),op:"IS_NAN"}};if(oc(e.value))return{unaryFilter:{field:Hf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(uc(e.value))return{unaryFilter:{field:Hf(e.field),op:"IS_NOT_NAN"}};if(oc(e.value))return{unaryFilter:{field:Hf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hf(e.field),op:Gf(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Hf(e.field),direction:Wf(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Ks(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function qf(e){var t=Rf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){as(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Kf(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Jc(Qf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Ks(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Yc(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Yc(n,t)}(n.endAt)),nl(t,i,u,o,s,"F",c,l)}function Kf(e){return e?void 0!==e.unaryFilter?[Yf(e)]:void 0!==e.fieldFilter?[$f(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Kf(e)})).reduce((function(e,t){return e.concat(t)})):is():[]}function Wf(e){return wf[e]}function Gf(e){return xf[e]}function Hf(e){return{fieldPath:e.canonicalString()}}function Qf(e){return Ps.fromServerFormat(e.fieldPath)}function $f(e){return Bc.create(Qf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return is()}}(e.fieldFilter.op),e.fieldFilter.value)}function Yf(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Qf(e.unaryFilter.field);return Bc.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Qf(e.unaryFilter.field);return Bc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Qf(e.unaryFilter.field);return Bc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Qf(e.unaryFilter.field);return Bc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return is()}}function Jf(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Xf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Zf(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=th(t)),t=eh(e.get(n),t);return th(t)}function eh(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function th(e){return e+"\x01\x01"}function nh(e){var t=e.length;if(as(t>=2),2===t)return as("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),As.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&is(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:is()}a=o+2}return new As(r)}var rh=["userId","batchId"];function ih(e,t){return[e,Zf(t)]}function ah(e,t,n){return[e,Zf(t),n]}var oh={},uh=["prefixPath","collectionGroup","readTime","documentId"],sh=["prefixPath","collectionGroup","documentId"],ch=["collectionGroup","readTime","prefixPath","documentId"],lh=["canonicalId","targetId"],fh=["targetId","path"],hh=["path","targetId"],dh=["collectionId","parent"],ph=["indexId","uid"],vh=["uid","sequenceNumber"],mh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yh=["indexId","uid","orderedDocumentKey"],gh=["userId","collectionPath","documentId"],kh=["userId","collectionPath","largestBatchId"],bh=["userId","collectionGroup","largestBatchId"],wh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),xh=[].concat(ge(wh),["documentOverlays"]),_h=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ih=[].concat(_h,["indexConfiguration","indexState","indexEntries"]),Sh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Eh=function(){function e(){h(this,e),this.onCommittedListeners=[]}return p(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Th=function(){function e(t){var n=this;h(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return p(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&is(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Dt(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Ch=function(){function e(t,n){var r=this;h(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new cs,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Dh(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Mh(e.target.error);r.At.reject(new Dh(t,n))}}return p(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(es("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Rh(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Dh(n,t)}}}]),e}(),Nh=function(){function e(t,n,r){h(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(Bt())&&ts("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return p(e,[{key:"Nt",value:function(){var e=f(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return es("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Dh(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new ss(us.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new ss(us.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Dh(t,n))},i.onupgradeneeded=function(e){es("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){es("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=f(o().mark((function e(t,n,r,i){var a,u,s,c,l=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,u=0;case 2:return++u,e.prev=3,e.delegateYield(o().mark((function e(){var n,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Nt(t);case 2:return l.db=e.sent,n=Ch.open(l.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),Th.reject(e)})).toPromise(),u.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=u,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),c="FirebaseError"!==e.t1.name&&u<3,es("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return es("SimpleDb","Removing database:",e),Oh(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Ht())return!1;if(e.St())return!0;var t=Bt(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Ah=function(){function e(t){h(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return p(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Oh(this.Ft.delete())}}]),e}(),Dh=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this,us.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return p(n)}(ss);function Ph(e){return"IndexedDbTransactionError"===e.name}var Rh=function(){function e(t){h(this,e),this.store=t}return p(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(es("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(es("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Oh(n)}},{key:"add",value:function(e){return es("SimpleDb","ADD",this.store.name,e,e),Oh(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Oh(this.store.get(e)).next((function(n){return void 0===n&&(n=null),es("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return es("SimpleDb","DELETE",this.store.name,e),Oh(this.store.delete(e))}},{key:"count",value:function(){return es("SimpleDb","COUNT",this.store.name),Oh(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Th((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Th((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){es("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Th((function(n,r){t.onerror=function(e){var t=Mh(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Th((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Ah(i),o=t(i.primaryKey,i.value,a);if(o instanceof Th){var u=o.catch((function(e){return a.done(),Th.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Th.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Oh(e){return new Th((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Mh(e.target.error);n(t)}}))}var Lh=!1;function Mh(e){var t=Nh.Vt(Bt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new ss("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Lh||(Lh=!0,setTimeout((function(){throw r}),0)),r}}return e}var Fh=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return p(n)}(Eh);function Uh(e,t){var n=os(e);return Nh.xt(n.Ht,t)}var Vh=function(){function e(t,n,r,i){h(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return p(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Fl(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=Dt(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Ul(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=Dt(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Ul(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ss.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),cf())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&xs(this.mutations,e.mutations,(function(e,t){return jl(e,t)}))&&xs(this.baseMutations,e.baseMutations,(function(e,t){return jl(e,t)}))}}]),e}(),jh=function(){function e(t,n,r,i){h(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return p(e,null,[{key:"from",value:function(t,n,r){as(t.mutations.length===r.length);for(var i=uf,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Bh=function(){function e(t,n){h(this,e),this.largestBatchId=t,this.mutation=n}return p(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),zh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ss.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ss.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Os.EMPTY_BYTE_STRING;h(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return p(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),qh=p((function e(t){h(this,e),this.Jt=t}));function Kh(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Wh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Af(e,t.key),fields:t.data.value.mapValue.fields,updateTime:If(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Gh(t.version)};else{if(!t.isUnknownDocument())return is();r.unknownDocument={path:n.path.toArray(),version:Gh(t.version)}}return r}function Wh(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Gh(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Hh(e){var t=new Is(e.seconds,e.nanoseconds);return Ss.fromTimestamp(t)}function Qh(e,t){for(var n=(t.baseMutations||[]).map((function(t){return jf(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return jf(e.Jt,t)})),u=Is.fromMillis(t.localWriteTimeMs);return new Vh(t.batchId,u,n,o)}function $h(e){var t,n,r=Hh(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Hh(e.lastLimboFreeSnapshotVersion):Ss.min();return void 0!==e.query.documents?(as(1===(n=e.query).documents.length),t=sl(rl(Rf(n.documents[0])))):t=function(e){return sl(qf(e))}(e.query),new zh(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Os.fromBase64String(e.resumeToken))}function Yh(e,t){var n,r=Gh(t.snapshotVersion),i=Gh(t.lastLimboFreeSnapshotVersion);n=Fc(t.target)?Bf(e.Jt,t.target):zf(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Lc(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Jh(e){var t=qf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?cl(t,t.limit,"L"):t}function Xh(e,t){return new Bh(t.largestBatchId,jf(e.Jt,t.overlayMutation))}function Zh(e,t){var n=t.path.lastSegment();return[e,Zf(t.path.popLast()),n]}var ed=function(){function e(){h(this,e)}return p(e,[{key:"getBundleMetadata",value:function(e,t){return td(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Hh(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return td(e).put({bundleId:(n=t).id,createTime:Gh(Tf(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return nd(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Jh(t.bundledQuery),readTime:Hh(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return nd(e).put(function(e){return{name:e.name,readTime:Gh(Tf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function td(e){return Uh(e,"bundles")}function nd(e){return Uh(e,"namedQueries")}var rd=function(){function e(t,n){h(this,e),this.M=t,this.userId=n}return p(e,[{key:"getOverlay",value:function(e,t){var n=this;return id(e).get(Zh(this.userId,t)).next((function(e){return e?Xh(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Bh(t,a);i.push(r.Xt(e,o))})),Th.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Zf(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(id(e).Qt("collectionPathOverlayIndex",i))})),Th.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=of(),a=Zf(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return id(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=Dt(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Xh(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=of(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return id(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Xh(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return id(e).put(function(e,t,n){var r=E(Zh(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Vf(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function id(e){return Uh(e,"documentOverlays")}var ad=function(){function e(){h(this,e)}return p(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Fs(e.integerValue));else if("doubleValue"in e){var n=Fs(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Ws(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Us(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?lc(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):is()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=Dt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Hs.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function od(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ud(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=od(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ad.fe=new ad;var sd=function(){function e(){h(this,e),this.buffer=new Uint8Array(1024),this.position=0}return p(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=Dt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=Dt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=ud(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=ud(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),cd=function(){function e(t){h(this,e),this.De=t}return p(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),ld=function(){function e(t){h(this,e),this.De=t}return p(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),fd=function(){function e(){h(this,e),this.De=new sd,this.Ce=new cd(this.De),this.xe=new ld(this.De)}return p(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),hd=function(){function e(t,n,r,i){h(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return p(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function dd(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=pd(e.arrayValue,t.arrayValue))?n:0!==(n=pd(e.directionalValue,t.directionalValue))?n:Hs.comparator(e.documentKey,t.documentKey)}function pd(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var vd=function(){function e(t){h(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=Dt(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return p(e,[{key:"$e",value:function(e){var t=kc(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=bc(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=Dt(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),md=function(){function e(){h(this,e),this.qe=new yd}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Th.resolve()}},{key:"getCollectionParents",value:function(e,t){return Th.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Th.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Th.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Th.resolve(null)}},{key:"getIndexType",value:function(e,t){return Th.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Th.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Th.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Th.resolve(Sc.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Th.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Th.resolve()}}]),e}(),yd=function(){function e(){h(this,e),this.index={}}return p(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ac(As.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Ac(As.comparator)).toArray()}}]),e}(),gd=new Uint8Array(0),kd=function(){function e(t,n){h(this,e),this.user=t,this.databaseId=n,this.Ke=new yd,this.Ge=new ef((function(e){return Lc(e)}),(function(e,t){return Mc(e,t)})),this.uid=t.uid||""}return p(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:Zf(i)};return bd(e).put(a)}return Th.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[_s(t),""],!1,!0);return bd(e).qt(r).next((function(e){var r,i=Dt(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(nh(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=xd(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=xd(e),r=_d(e),i=wd(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=wd(e),i=!0,a=new Map;return Th.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=cf(),o=[];return Th.forEach(a,(function(i,a){var u;es("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Lc(t)));var s=function(e,t){var n=kc(t);if(void 0===n)return null;var r,i=Dt(Uc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Dt(bc(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Dt(Uc(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Dt(bc(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Vc(e,o.fieldPath,e.startAt):jc(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Yc(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Dt(bc(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?jc(e,o.fieldPath,e.endAt):Vc(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Yc(r,i)}(a,i),h=n.We(i,a,l),d=n.We(i,a,f),p=n.ze(i,a,c),v=n.He(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Th.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=Hs.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Th.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.Je(t[s/c]):gd,h=u.Ye(e,f,n[s%c],r),d=u.Xe(e,f,i[s%c],a),p=o.map((function(t){return u.Ye(e,f,t,!0)}));l.push.apply(l,ge(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"Ye",value:function(e,t,n,r){var i=new hd(e,Hs.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new hd(e,Hs.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new vd(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Dt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Th.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Ac(Ps.comparator),r=!1,i=Dt(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=Dt(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new fd,i=Dt(bc(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);ad.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new fd;return ad.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new fd;return ad.fe.Zt(rc(this.databaseId,t),n.Ne(function(e){var t=bc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new fd);var i,a=0,o=Dt(bc(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Dt(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&ac(c))r=this.nn(r,s,c);else{var h=f.Ne(s.kind);ad.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=ge(e),a=[],o=Dt(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Dt(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new fd;f.seed(l.Se()),ad.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Bc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=xd(e),i=_d(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Th.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new xc(t.sequenceNumber,new Sc(Hh(t.readTime),new Hs(nh(t.documentKey)),t.largestBatchId)):xc.empty(),r=e.fields.map((function(e){var t=E(e,2),n=t[0],r=t[1];return new wc(Ps.fromServerFormat(n),r)}));return new gc(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ws(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=xd(e),a=_d(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Th.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Gh(r.readTime),documentKey:Zf(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Th.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Th.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Th.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?Th.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return wd(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return wd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=wd(e),i=new Ac(dd);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new hd(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Ac(dd),r=this.Ze(t,e);if(null==r)return n;var i=kc(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ac(a)){var o,u=Dt(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new hd(t.indexId,e.key,this.Je(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new hd(t.indexId,e.key,gd,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;es("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Pc(a),s=Pc(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Pc(o)):l?(i(u),u=Pc(a)):(u=Pc(a),s=Pc(o))}}(r,i,dd,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),Th.waitFor(o)}},{key:"rn",value:function(e){var t=1;return _d(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return dd(e,t)})).filter((function(e,t,n){return!t||0!==dd(e,n[t-1])}));var r=[];r.push(e);var i,a=Dt(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=dd(o,e),s=dd(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,gd,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,gd,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return Th.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||Ec(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Sc.min()}))})).next((function(){return n}))}}]),e}();function bd(e){return Uh(e,"collectionParents")}function wd(e){return Uh(e,"indexEntries")}function xd(e){return Uh(e,"indexConfiguration")}function _d(e){return Uh(e,"indexState")}var Id={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sd=function(){function e(t,n,r){h(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return p(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ed(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){as(1===u)})));var c,l=[],f=Dt(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ah(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Th.waitFor(a).next((function(){return l}))}function Td(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw is();t=e.noDocument}return JSON.stringify(t).length}Sd.DEFAULT_COLLECTION_PERCENTILE=10,Sd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sd.DEFAULT=new Sd(41943040,Sd.DEFAULT_COLLECTION_PERCENTILE,Sd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sd.DISABLED=new Sd(-1,0,0);var Cd=function(){function e(t,n,r,i){h(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return p(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ad(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Dd(e),o=Ad(e);return o.add({}).next((function(u){as("number"==typeof u);var s,c=new Vh(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Vf(e.Jt,t)})),i=n.mutations.map((function(t){return Vf(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Ac((function(e,t){return ws(e.canonicalString(),t.canonicalString())})),d=Dt(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=ah(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,oh))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),Th.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Ad(e).get(t).next((function(e){return e?(as(e.userId===n.userId),Qh(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Th.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Ad(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(as(t.batchId>=r),a=Qh(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ad(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ad(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Qh(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=ih(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Dd(e).Wt({range:i},(function(r,i,o){var u=E(r,3),s=u[0],c=u[1],l=u[2],f=nh(c);if(s===n.userId&&t.path.isEqual(f))return Ad(e).get(l).next((function(e){if(!e)throw is();as(e.userId===n.userId),a.push(Qh(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ac(ws),i=[];return t.forEach((function(t){var a=ih(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Dd(e).Wt({range:o},(function(e,i,a){var o=E(e,3),u=o[0],s=o[1],c=o[2],l=nh(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Th.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=ih(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Ac(ws);return Dd(e).Wt({range:o},(function(e,t,a){var o=E(e,3),s=o[0],c=o[1],l=o[2],f=nh(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Ad(e).get(t).next((function(e){if(null===e)throw is();as(e.userId===n.userId),r.push(Qh(n.M,e))})))})),Th.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ed(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),Th.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Th.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Dd(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=nh(e[1]);i.push(a)}else r.done()})).next((function(){as(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Nd(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Pd(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return as(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Nd(e,t,n){var r=ih(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Dd(e).Wt({range:a,jt:!0},(function(e,n,r){var a=E(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Ad(e){return Uh(e,"mutations")}function Dd(e){return Uh(e,"documentMutations")}function Pd(e){return Uh(e,"mutationQueues")}var Rd=function(){function e(t){h(this,e),this.mn=t}return p(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Od=function(){function e(t,n){h(this,e),this.referenceDelegate=t,this.M=n}return p(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Rd(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Ss.fromTimestamp(new Is(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Ld(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return as(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Ld(e).Wt((function(o,u){var s=$h(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Th.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Ld(e).Wt((function(e,n){var r=$h(n);t(r)}))}},{key:"pn",value:function(e){return Md(e).get("targetGlobalKey").next((function(e){return as(null!==e),e}))}},{key:"In",value:function(e,t){return Md(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Ld(e).put(Yh(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Lc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ld(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=$h(n);Mc(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Fd(e);return t.forEach((function(t){var o=Zf(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Th.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Fd(e);return Th.forEach(t,(function(t){var a=Zf(t.path);return Th.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Fd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Fd(e),i=cf();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=nh(e[1]),a=new Hs(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Zf(t.path),r=IDBKeyRange.bound([n],[_s(n)],!1,!0),i=0;return Fd(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=E(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Ld(e).get(t).next((function(e){return e?$h(e):null}))}}]),e}();function Ld(e){return Uh(e,"targets")}function Md(e){return Uh(e,"targetGlobal")}function Fd(e){return Uh(e,"targetDocuments")}function Ud(e){return Vd.apply(this,arguments)}function Vd(){return Vd=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===us.FAILED_PRECONDITION&&t.message===Sh){e.next=2;break}throw t;case 2:es("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Vd.apply(this,arguments)}function jd(e,t){var n=E(e,2),r=n[0],i=n[1],a=E(t,2),o=a[0],u=a[1],s=ws(r,o);return 0===s?ws(i,u):s}var Bd=function(){function e(t){h(this,e),this.An=t,this.buffer=new Ac(jd),this.Rn=0}return p(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();jd(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),zd=function(){function e(t,n){h(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return p(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;es("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,f(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Ph(n.t0)){n.next=12;break}es("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Ud(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),qd=function(){function e(t,n){h(this,e),this.Dn=t,this.params=n}return p(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Th.resolve(gs.A);var r=new Bd(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(es("LruGarbageCollector","Garbage collection skipped; disabled"),Th.resolve(Id)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(es("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Id):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(es("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Zu()<=dn.DEBUG&&es("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Th.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Kd=function(){function e(t,n){h(this,e),this.db=t,this.garbageCollector=function(e,t){return new qd(e,t)}(this,n)}return p(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Wd(e,n)}},{key:"removeReference",value:function(e,t,n){return Wd(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Wd(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Pd(e).zt((function(r){return Nd(e,r,t).next((function(e){return e&&(n=!0),Th.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ss.min()),Fd(e).delete([0,Zf(o.path)])}))}));i.push(s)}})).next((function(){return Th.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Wd(e,t)}},{key:"Mn",value:function(e,t){var n,r=Fd(e),i=gs.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=E(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==gs.A&&t(new Hs(nh(n)),i),i=s,n=u):i=gs.A})).next((function(){i!==gs.A&&t(new Hs(nh(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Wd(e,t){return Fd(e).put(function(e,t){return{targetId:0,path:Zf(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Gd=function(){function e(){h(this,e),this.changes=new ef((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return p(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,yc.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Th.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Hd=function(){function e(t){h(this,e),this.M=t}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Yd(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Yd(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Wh(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=yc.newInvalidDocument(t);return Yd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Jd(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:yc.newInvalidDocument(t)};return Yd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Jd(t))},(function(e,i){r={document:n.$n(t,i),size:Td(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=nf();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=nf(),i=new Tc(Hs.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Td(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Th.resolve();var r=new Ac(Zd);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Jd(r.first()),Jd(r.last())),a=r.getIterator(),o=a.getNext();return Yd(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Hs.fromSegments([].concat(ge(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Zd(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(Jd(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Wh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yd(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=nf(),i=Dt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(Hs.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=nf(),o=Xd(t,n),u=Xd(t,Sc.max());return Yd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(Hs.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Qd(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return $d(e).get("remoteDocumentGlobalKey").next((function(e){return as(!!e),e}))}},{key:"Fn",value:function(e,t){return $d(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Ff(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Hs.fromSegments(t.noDocument.path),i=Hh(t.noDocument.readTime);n=yc.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return is();var a=Hs.fromSegments(t.unknownDocument.path),o=Hh(t.unknownDocument.version);n=yc.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Is(e[0],e[1]);return Ss.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Ss.min()))return n}return yc.newInvalidDocument(e)}}]),e}(),Qd=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new ef((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Ac((function(e,t){return ws(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Kh(t.Kn.M,o);i=i.add(a.path.popLast());var c=Td(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Kh(t.Kn.M,o.convertToNoDocument(Ss.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),Th.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Gd);function $d(e){return Uh(e,"remoteDocumentGlobal")}function Yd(e){return Uh(e,"remoteDocumentsV14")}function Jd(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Xd(e,t){var n=t.documentKey.path.toArray();return[e,Wh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Zd(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=ws(n[a],r[a]))return i;return(i=ws(n.length,r.length))||((i=ws(n[n.length-2],r[r.length-2]))||ws(n[n.length-1],r[r.length-1]))}var ep=function(){function e(t){h(this,e),this.M=t}return p(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Ch("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rh,{unique:!0}),e.createObjectStore("documentMutations")}(e),tp(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Th.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),tp(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ss.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rh,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Th.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:gh});t.createIndex("collectionPathOverlayIndex",kh,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",bh,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:uh});t.createIndex("documentKeyIndex",sh),t.createIndex("collectionGroupIndex",ch)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ph}).createIndex("sequenceNumberIndex",vh,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:mh}).createIndex("documentKeyIndex",yh,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=Td(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Th.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Th.forEach(r,(function(r){as(r.userId===n.userId);var i=Qh(t.M,r);return Ed(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new As(n),o=function(e){return[0,Zf(e)]}(a);r.push(t.get(o).next((function(n){return n?Th.resolve():function(n){return t.put({targetId:0,path:Zf(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Th.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:dh});var n=t.store("collectionParents"),r=new yd,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Zf(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new As(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=E(e,3),r=(n[0],n[1]),a=(n[2],nh(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=$h(r),a=Yh(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Hs(As.fromString(i.document.name).popFirst(5)):i.noDocument?Hs.fromSegments(i.noDocument.path):i.unknownDocument?Hs.fromSegments(i.unknownDocument.path):is()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Th.waitFor(r)}))}}]),e}();function tp(e){e.createObjectStore("targetDocuments",{keyPath:fh}).createIndex("documentTargetsIndex",hh,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lh,{unique:!0}),e.createObjectStore("targetGlobal")}var np="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rp=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(h(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new ss(us.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kd(this,i),this.hs=n+"main",this.M=new qh(s),this.ls=new Nh(this.hs,this.ts,new ep(this.M)),this.fs=new Od(this.referenceDelegate,this.M),this.ds=function(e){return new Hd(e)}(this.M),this._s=new ed,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&ts("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return p(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ss(us.FAILED_PRECONDITION,np);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new gs(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=f(o().mark((function n(r){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=f(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ap(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(Ph(t))return es("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return es("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return ip(e).get("owner").next((function(e){return Th.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return ap(e).delete(this.clientId)}},{key:"vs",value:function(){var e=f(o().mark((function e(){var t,n,r,i,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Uh(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Th.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=Dt(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Th.resolve(!0):ip(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new ss(us.FAILED_PRECONDITION,np);return!1}}return!(!t.networkEnabled||!t.inForeground)||ap(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&es("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=f(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Fh(e,gs.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ap(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Cd.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new kd(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return rd.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;es("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?Ih:13===i?_h:12===i?xh:11===i?wh:void is();return this.ls.runTransaction(e,o,u,(function(i){return a=new Fh(i,r.es?r.es.next():gs.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw ts("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new ss(us.FAILED_PRECONDITION,Sh);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return ip(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new ss(us.FAILED_PRECONDITION,np)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ip(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=ip(e);return n.get("owner").next((function(e){return t.Ps(e)?(es("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Th.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ts("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!qt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return es("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ts("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch($r){ts("Failed to set zombie client id.",$r)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch($r){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Nh.vt()}}]),e}();function ip(e){return Uh(e,"owner")}function ap(e){return Uh(e,"clientMetadata")}function op(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var up=function(){function e(t,n,r){h(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return p(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=Dt(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=Dt(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return Hs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):ol(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new Hs(t)).next((function(e){var t=af();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=af();return this.indexManager.getCollectionParents(e,i).next((function(o){return Th.forEach(o,(function(o){var u=function(e,t){return new tl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=Dt(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=Dt(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=yc.newInvalidDocument(s),r=r.insert(s,c)),Ul(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){dl(t,n)||(r=r.remove(e))})),r}))}}]),e}(),sp=function(){function e(t,n,r,i){h(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return p(e,null,[{key:"Ys",value:function(t,n){var r,i=cf(),a=cf(),o=Dt(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),cp=function(){function e(){h(this,e),this.Xs=!1}return p(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return Th.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Ss.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(Zu()<=dn.DEBUG&&es("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hl(t)),i.ri(e,o,t,_c(r,-1)))}))}},{key:"si",value:function(e,t){var n=new Ac(vl(e));return t.forEach((function(t,r){dl(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return Zu()<=dn.DEBUG&&es("QueryEngine","Using full collection scan to execute query:",hl(t)),this.Zs.Qs(e,t,Sc.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),lp=function(){function e(t,n,r,i){h(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new Tc(ws),this.ai=new ef((function(e){return Lc(e)}),Mc),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return p(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new up(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function fp(e,t,n,r){return new lp(e,t,n,r)}function hp(e,t){return dp.apply(this,arguments)}function dp(){return dp=f(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=os(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=cf(),s=Dt(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Dt(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Dt(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Dt(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.fi.Ks(e,u).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),dp.apply(this,arguments)}function pp(e,t){var n=os(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Th.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);as(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function vp(e){var t=os(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function mp(e,t){var n=os(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Os.EMPTY_BYTE_STRING,Ss.min()).withLastLimboFreeSnapshotVersion(Ss.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=nf();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(yp(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Ss.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Th.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ui=i,e}))}function yp(e,t,n){var r=cf();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=nf();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Ss.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):es("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function gp(e,t){var n=os(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function kp(e,t){var n=os(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,Th.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new zh(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function bp(e,t,n){return wp.apply(this,arguments)}function wp(){return wp=f(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=os(t),a=i.ui.get(n),u=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",u,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ph(e.t1)){e.next=12;break}throw e.t1;case 12:es("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),wp.apply(this,arguments)}function xp(e,t,n){var r=os(e),i=Ss.min(),a=cf();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=os(e),i=r.ai.get(n);return void 0!==i?Th.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,sl(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:Ss.min(),n?a:cf())})).next((function(e){return Sp(r,pl(t),e),{documents:e,_i:a}}))}))}function _p(e,t){var n=os(e),r=os(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Ip(e,t){var n=os(e),r=n.ci.get(t)||Ss.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,_c(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Sp(n,t,e),e}))}function Sp(e,t,n){var r=Ss.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function Ep(e,t,n,r){return Tp.apply(this,arguments)}function Tp(){return Tp=f(o().mark((function e(t,n,r,i){var a,u,s,c,l,f,h,d,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=os(t),u=cf(),s=nf(),c=Dt(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.wi(f.metadata.name),f.document&&(u=u.add(h)),(d=n.mi(f)).setReadTime(n.gi(f.metadata.readTime)),s=s.insert(h,d)}catch(o){c.e(o)}finally{c.f()}return p=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,kp(a,function(e){return sl(rl(As.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return yp(e,p,s).next((function(t){return p.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.fs.addMatchingKeys(e,u,v.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Tp.apply(this,arguments)}function Cp(e,t){return Np.apply(this,arguments)}function Np(){return Np=f(o().mark((function e(t,n){var r,i,a,u=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:cf(),e.next=3,kp(t,sl(Jh(n.bundledQuery)));case 3:return i=e.sent,a=os(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Tf(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Os.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Np.apply(this,arguments)}var Ap=function(){function e(t){h(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return p(e,[{key:"getBundleMetadata",value:function(e,t){return Th.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:Tf(n.createTime)}),Th.resolve()}},{key:"getNamedQuery",value:function(e,t){return Th.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:Jh(e.bundledQuery),readTime:Tf(e.readTime)}}(t)),Th.resolve()}}]),e}(),Dp=function(){function e(){h(this,e),this.overlays=new Tc(Hs.comparator),this.Ii=new Map}return p(e,[{key:"getOverlay",value:function(e,t){return Th.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Th.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),Th.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=of(),i=t.length+1,a=new Hs(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Th.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Tc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=of(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=of(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Th.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Bh(t,n));var a=this.Ii.get(t);void 0===a&&(a=cf(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),Pp=function(){function e(){h(this,e),this.Ti=new Ac(Rp.Ei),this.Ai=new Ac(Rp.Ri)}return p(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Rp(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new Rp(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new Hs(new As([])),r=new Rp(n,e),i=new Rp(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new Hs(new As([])),n=new Rp(t,e),r=new Rp(t,e+1),i=cf();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Rp(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Rp=function(){function e(t,n){h(this,e),this.key=t,this.Ci=n}return p(e,null,[{key:"Ei",value:function(e,t){return Hs.comparator(e.key,t.key)||ws(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return ws(e.Ci,t.Ci)||Hs.comparator(e.key,t.key)}}]),e}(),Op=function(){function e(t,n){h(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new Ac(Rp.Ei)}return p(e,[{key:"checkEmpty",value:function(e){return Th.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new Vh(i,t,n,r);this.Bs.push(a);var o,u=Dt(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Ni=this.Ni.add(new Rp(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Th.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Th.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return Th.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Th.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return Th.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Rp(t,0),i=new Rp(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),Th.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ac(ws);return t.forEach((function(e){var t=new Rp(e,0),i=new Rp(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),Th.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Hs.isDocumentKey(i)||(i=i.child(""));var a=new Rp(new Hs(i),0),o=new Ac(ws);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),Th.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;as(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return Th.forEach(t.mutations,(function(i){var a=new Rp(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Rp(t,0),r=this.Ni.firstAfterOrEqual(n);return Th.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,Th.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Lp=function(){function e(t){h(this,e),this.$i=t,this.docs=new Tc(Hs.comparator),this.size=0}return p(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Th.resolve(n?n.document.mutableCopy():yc.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=nf();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():yc.newInvalidDocument(e))})),Th.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=nf(),i=new Hs(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Ec(Ic(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Th.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){is()}},{key:"Bi",value:function(e,t){return Th.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Mp(this)}},{key:"getSize",value:function(e){return Th.resolve(this.size)}}]),e}(),Mp=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this)).Kn=e,r}return p(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),Th.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(Gd),Fp=function(){function e(t){h(this,e),this.persistence=t,this.Li=new ef((function(e){return Lc(e)}),Mc),this.lastRemoteSnapshotVersion=Ss.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Pp,this.targetCount=0,this.Ki=Rd.gn()}return p(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),Th.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Th.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Th.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),Th.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),Th.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new Rd(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Th.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Th.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Th.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Th.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Th.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return Th.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),Th.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Th.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),Th.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return Th.resolve(n)}},{key:"containsKey",value:function(e,t){return Th.resolve(this.qi.containsKey(t))}}]),e}(),Up=function(){function e(t,n){var r=this;h(this,e),this.Gi={},this.overlays={},this.es=new gs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Fp(this),this.indexManager=new md,this.ds=new Lp((function(e){return r.referenceDelegate.Qi(e)})),this.M=new qh(n),this._s=new Ap(this.M)}return p(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Dp,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new Op(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;es("MemoryPersistence","Starting transaction:",e);var i=new Vp(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return Th.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Vp=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return p(n)}(Eh),jp=function(){function e(t){h(this,e),this.persistence=t,this.Hi=new Pp,this.Ji=null}return p(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw is()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),Th.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),Th.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),Th.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Th.forEach(this.Xi,(function(r){var i=Hs.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,Ss.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return Th.or([function(){return Th.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function Bp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function zp(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function qp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Kp=function(){function e(t,n,r,i){h(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return p(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new ss(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ts("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Wp=function(){function e(t,n,r){h(this,e),this.targetId=t,this.state=n,this.error=r}return p(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ss(i.error.code,i.error.message))),a?new e(t,i.state,r):(ts("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Gp=function(){function e(t,n){h(this,e),this.clientId=t,this.activeTargetIds=n}return p(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=ff(),o=0;i&&o<r.activeTargetIds.length;++o)i=Gs(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ts("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Hp=function(){function e(t,n){h(this,e),this.clientId=t,this.onlineState=n}return p(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ts("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Qp=function(){function e(){h(this,e),this.activeTargetIds=ff()}return p(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),$p=function(){function e(t,n,r,i,a){h(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Tc(ws),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=Bp(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new Qp),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return p(e,[{key:"start",value:function(){var e=f(o().mark((function e(){var t,n,r,i,a,u,s,c,l,f,h,d=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=Dt(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Bp(this.persistenceKey,i)))&&(u=Gp.tr(i,a))&&(this.ar=this.ar.insert(u.clientId,u));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(s=this.storage.getItem(this.mr))&&(c=this.pr(s))&&this.Ir(c),l=Dt(this.cr);try{for(l.s();!(f=l.n()).done;)h=f.value,this.ur(h)}catch(o){l.e(o)}finally{l.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(qp(this.persistenceKey,e));if(n){var r=Wp.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(qp(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return es("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){es("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){es("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(es("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void ts("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(f(o().mark((function e(){var r,i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(u=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(u));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(s));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}c=function(e){var t=gs.A;if(null!=e)try{var n=JSON.parse(e);as("number"==typeof n),t=n}catch(e){ts("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),c!==gs.A&&t.sequenceNumberHandler(c),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return l=t.Or(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new Kp(this.currentUser,e,t,n),i=zp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=zp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=qp(this.persistenceKey,e),i=new Wp(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return Gp.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Kp.tr(new Yu(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return Wp.tr(r,t)}},{key:"pr",value:function(e){return Hp.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:es("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Lr(o,u).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=ff();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Yp=function(){function e(){h(this,e),this.Ur=new Qp,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return p(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new Qp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Jp=function(){function e(){h(this,e)}return p(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Xp=function(){function e(){var t=this;h(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return p(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){es("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Dt(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){es("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Dt(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Zp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ev=function(){function e(t){h(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return p(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),tv=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return p(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Qu;o.listenOnce(qu.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case zu.NO_ERROR:var t=o.getResponseJson();es("Connection","XHR received:",JSON.stringify(t)),i(t);break;case zu.TIMEOUT:es("Connection",'RPC "'+e+'" timed out'),a(new ss(us.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:var n=o.getStatus();if(es("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(us).indexOf(t)>=0?t:us.UNKNOWN}(r.status);a(new ss(u,r.message))}else a(new ss(us.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ss(us.UNAVAILABLE,"Connection failed."));break;default:is()}}finally{es("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ju(),a=Bu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Gu({})),this.lo(o.initMessageHeaders,t,n),zt()||Wt()||Bt().indexOf("Electron/")>=0||Gt()||Bt().indexOf("MSAppHost/")>=0||Kt()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");es("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new ev({Jr:function(e){l?es("Connection","Not sending because WebChannel is closed:",e):(c||(es("Connection","Opening WebChannel transport."),s.open(),c=!0),es("Connection","WebChannel sending:",e),s.send(e))},Yr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Hu.EventType.OPEN,(function(){l||es("Connection","WebChannel transport opened.")})),h(s,Hu.EventType.CLOSE,(function(){l||(l=!0,es("Connection","WebChannel transport closed"),f.ro())})),h(s,Hu.EventType.ERROR,(function(e){l||(l=!0,ns("Connection","WebChannel transport errored:",e),f.ro(new ss(us.UNAVAILABLE,"The operation could not be completed")))})),h(s,Hu.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];as(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){es("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Hl[e];if(void 0!==t)return Zl(t)}(a),u=i.message;void 0===o&&(o=us.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new ss(o,u)),s.close()}else es("Connection","WebChannel received:",n),f.oo(n)}})),h(a,Ku.STAT_EVENT,(function(e){e.stat===Wu.PROXY?es("Connection","Detected buffering proxy"):e.stat===Wu.NOPROXY&&es("Connection","Detected no buffering proxy")})),setTimeout((function(){f.io()}),0),f}}]),n}(function(){function e(t){h(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return p(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);es("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return es("RestConnection","Received: ",e),e}),(function(t){throw ns("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ju,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=Zp[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function nv(){return"undefined"!=typeof window?window:null}function rv(){return"undefined"!=typeof document?document:null}function iv(e){return new _f(e,!0)}var av=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;h(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return p(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&es("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),ov=function(){function e(t,n,r,i,a,o,u,s){h(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new av(t,n)}return p(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===us.RESOURCE_EXHAUSTED?(ts(n.toString()),ts("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===us.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=E(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new ss(us.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(f(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return es("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(es("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),uv=function(e){m(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return p(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:is()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(as(void 0===t||"string"==typeof t),Os.fromBase64String(t||"")):(as(void 0===t||t instanceof Uint8Array),Os.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?us.UNKNOWN:Zl(e.code);return new ss(t,e.message||"")}(o);n=new mf(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Df(e,s.document.name),l=Tf(s.document.updateTime),f=new vc({mapValue:{fields:s.document.fields}}),h=yc.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new pf(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Df(e,v.document),y=v.readTime?Tf(v.readTime):Ss.min(),g=yc.newNoDocument(m,y),k=v.removedTargetIds||[];n=new pf([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Df(e,b.document),x=b.removedTargetIds||[];n=new pf([],x,w,null)}else{if(!("filter"in t))return is();t.filter;var _=t.filter;_.targetId;var I=_.count||0,S=new Jl(I),E=_.targetId;n=new vf(E,S)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Ss.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ss.min():t.readTime?Tf(t.readTime):Ss.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=Of(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Fc(r)?{documents:Bf(e,r)}:{query:zf(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Sf(e,t.resumeToken):t.snapshotVersion.compareTo(Ss.min())>0&&(n.readTime=If(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return is()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=Of(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(ov),sv=function(e){m(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Yo=!1,s}return p(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,Or(y(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(as(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(as(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Tf(e.updateTime):Tf(t);return n.isEqual(Ss.min())&&(n=Tf(t)),new Rl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Tf(e.commitTime);return this.listener.tu(n,t)}return as(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=Of(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Vf(t.M,e)}))};this.Lo(n)}}]),n}(ov),cv=function(e){m(n,e);var t=w(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return p(n,[{key:"iu",value:function(){if(this.su)throw new ss(us.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=E(i,2),o=a[0],u=a[1];return r.So.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===us.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new ss(us.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=E(i,2),o=a[0],u=a[1];return r.So._o(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===us.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new ss(us.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return p((function e(){h(this,e)}))}()),lv=function(){function e(t,n){h(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return p(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(ts(t),this.uu=!1):es("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),fv=p((function e(t,n,r,i,a){var u=this;h(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=xv(u),!e.t0){e.next=5;break}return es("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=os(t)).wu.add(4),e.next=4,pv(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,hv(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new lv(r,i)}));function hv(e){return dv.apply(this,arguments)}function dv(){return dv=f(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xv(t)){e.next=18;break}n=Dt(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),dv.apply(this,arguments)}function pv(e){return vv.apply(this,arguments)}function vv(){return vv=f(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Dt(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),vv.apply(this,arguments)}function mv(e,t){var n=os(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),wv(n)?bv(n):Jv(n).Mo()&&gv(n,t))}function yv(e,t){var n=os(e),r=Jv(n);n._u.delete(t),r.Mo()&&kv(n,t),0===n._u.size&&(r.Mo()?r.$o():xv(n)&&n.yu.set("Unknown"))}function gv(e,t){e.pu.Z(t.targetId),Jv(e).Ho(t)}function kv(e,t){e.pu.Z(t),Jv(e).Jo(t)}function bv(e){e.pu=new gf({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),Jv(e).start(),e.yu.au()}function wv(e){return xv(e)&&!Jv(e).ko()&&e._u.size>0}function xv(e){return 0===os(e).wu.size}function _v(e){e.pu=void 0}function Iv(e){return Sv.apply(this,arguments)}function Sv(){return Sv=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){gv(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Sv.apply(this,arguments)}function Ev(e,t){return Tv.apply(this,arguments)}function Tv(){return Tv=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_v(t),wv(t)?(t.yu.lu(n),bv(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Tv.apply(this,arguments)}function Cv(e,t,n){return Nv.apply(this,arguments)}function Nv(){return Nv=f(o().mark((function e(t,n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof mf&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=f(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Dt(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(u=a.value,e.t0=t._u.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t._u.delete(u),t.pu.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),es("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Av(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof pf?t.pu.ut(n):n instanceof vf?t.pu._t(n):t.pu.ht(n),r.isEqual(Ss.min())){e.next=29;break}return e.prev=14,e.next=17,vp(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Os.EMPTY_BYTE_STRING,n.snapshotVersion)),kv(e,t);var r=new zh(n.target,t,1,n.sequenceNumber);gv(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),es("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Av(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Nv.apply(this,arguments)}function Av(e,t,n){return Dv.apply(this,arguments)}function Dv(){return Dv=f(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ph(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,pv(t);case 5:t.yu.set("Offline"),r||(r=function(){return vp(t.localStore)}),t.asyncQueue.enqueueRetryable(f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return es("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,hv(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Dv.apply(this,arguments)}function Pv(e,t){return t().catch((function(n){return Av(e,n,t)}))}function Rv(e){return Ov.apply(this,arguments)}function Ov(){return Ov=f(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=os(t),r=Xv(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!Lv(n)){e.next=19;break}return e.prev=3,e.next=6,gp(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,Mv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Av(n,e.t0);case 17:e.next=2;break;case 19:Fv(n)&&Uv(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Ov.apply(this,arguments)}function Lv(e){return xv(e)&&e.du.length<10}function Mv(e,t){e.du.push(t);var n=Xv(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function Fv(e){return xv(e)&&!Xv(e).ko()&&e.du.length>0}function Uv(e){Xv(e).start()}function Vv(e){return jv.apply(this,arguments)}function jv(){return jv=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Xv(t).nu();case 1:case"end":return e.stop()}}),e)}))),jv.apply(this,arguments)}function Bv(e){return zv.apply(this,arguments)}function zv(){return zv=f(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Xv(t),r=Dt(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),zv.apply(this,arguments)}function qv(e,t,n){return Kv.apply(this,arguments)}function Kv(){return Kv=f(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=jh.from(i,n,r),e.next=3,Pv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Rv(t);case 5:case"end":return e.stop()}}),e)}))),Kv.apply(this,arguments)}function Wv(e,t){return Gv.apply(this,arguments)}function Gv(){return Gv=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Xv(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=f(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xl(i=n.code)||i===us.ABORTED){e.next=7;break}return r=t.du.shift(),Xv(t).Fo(),e.next=5,Pv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Rv(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Fv(t)&&Uv(t);case 5:case"end":return e.stop()}}),e)}))),Gv.apply(this,arguments)}function Hv(e,t){return Qv.apply(this,arguments)}function Qv(){return Qv=f(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=os(t)).asyncQueue.verifyOperationInProgress(),es("RemoteStore","RemoteStore received new credentials"),i=xv(r),r.wu.add(3),e.next=6,pv(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,hv(r);case 12:case"end":return e.stop()}}),e)}))),Qv.apply(this,arguments)}function $v(e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=f(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=os(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,hv(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,pv(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Yv.apply(this,arguments)}function Jv(e){return e.Iu||(e.Iu=function(e,t,n){var r=os(e);return r.iu(),new uv(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Iv.bind(null,e),eo:Ev.bind(null,e),zo:Cv.bind(null,e)}),e.mu.push(function(){var t=f(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),wv(e)?bv(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:_v(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function Xv(e){return e.Tu||(e.Tu=function(e,t,n){var r=os(e);return r.iu(),new sv(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Vv.bind(null,e),eo:Wv.bind(null,e),eu:Bv.bind(null,e),tu:qv.bind(null,e)}),e.mu.push(function(){var t=f(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,Rv(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(es("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var Zv=function(){function e(t,n,r,i,a){h(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return p(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ss(us.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function em(e,t){if(ts("AsyncQueue","".concat(t,": ").concat(e)),Ph(e))return new ss(us.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var tm=function(){function e(t){h(this,e),this.comparator=t?function(e,n){return t(e,n)||Hs.comparator(e.key,n.key)}:function(e,t){return Hs.comparator(e.key,t.key)},this.keyedMap=af(),this.sortedSet=new Tc(this.comparator)}return p(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),nm=function(){function e(){h(this,e),this.Eu=new Tc(Hs.comparator)}return p(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):is():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),rm=function(){function e(t,n,r,i,a,o,u,s){h(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return p(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ll(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,tm.emptySet(n),a,r,i,!0,!1)}}]),e}(),im=p((function e(){h(this,e),this.Ru=void 0,this.listeners=[]})),am=p((function e(){h(this,e),this.queries=new ef((function(e){return fl(e)}),ll),this.onlineState="Unknown",this.bu=new Set}));function om(e,t){return um.apply(this,arguments)}function um(){return um=f(o().mark((function e(t,n){var r,i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=os(t),i=n.query,a=!1,(u=r.queries.get(i))||(a=!0,u=new im),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:u.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=em(e.t0,"Initialization of query '".concat(hl(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,u),u.listeners.push(n),n.Pu(r.onlineState),u.Ru&&n.Vu(u.Ru)&&hm(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),um.apply(this,arguments)}function sm(e,t){return cm.apply(this,arguments)}function cm(){return cm=f(o().mark((function e(t,n){var r,i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=os(t),i=n.query,a=!1,(u=r.queries.get(i))&&(s=u.listeners.indexOf(n))>=0&&(u.listeners.splice(s,1),a=0===u.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),cm.apply(this,arguments)}function lm(e,t){var n,r=os(e),i=!1,a=Dt(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Dt(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&hm(r)}function fm(e,t,n){var r=os(e),i=r.queries.get(t);if(i){var a,o=Dt(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function hm(e){e.bu.forEach((function(e){e.next()}))}var dm=function(){function e(t,n,r){h(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return p(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Dt(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new rm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=rm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),pm=function(){function e(t,n){h(this,e),this.payload=t,this.byteLength=n}return p(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),vm=function(){function e(t){h(this,e),this.M=t}return p(e,[{key:"wi",value:function(e){return Df(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?Ff(this.M,e.document,!1):yc.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return Tf(e)}}]),e}(),mm=function(){function e(t,n,r){h(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ym(t)}return p(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=As.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new vm(this.M),i=Dt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.wi(a.metadata.name),s=Dt(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||cf()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=f(o().mark((function e(){var t,n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ep(this.localStore,new vm(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=Dt(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Cp(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function ym(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var gm=p((function e(t){h(this,e),this.key=t})),km=p((function e(t){h(this,e),this.key=t})),bm=function(){function e(t,n){h(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=cf(),this.mutatedKeys=cf(),this.Gu=vl(t),this.Qu=new tm(this.Gu)}return p(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new nm,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=dl(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return is()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new rm(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new nm,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=cf(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new km(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new gm(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=cf();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return rm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),wm=p((function e(t,n,r){h(this,e),this.query=t,this.targetId=n,this.view=r})),xm=p((function e(t){h(this,e),this.key=t,this.na=!1})),_m=function(){function e(t,n,r,i,a,o){h(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new ef((function(e){return fl(e)}),ll),this.ra=new Map,this.oa=new Set,this.ua=new Tc(Hs.comparator),this.aa=new Map,this.ca=new Pp,this.ha={},this.la=new Map,this.fa=Rd.yn(),this.onlineState="Unknown",this.da=void 0}return p(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function Im(e,t){return Sm.apply(this,arguments)}function Sm(){return Sm=f(o().mark((function e(t,n){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yy(t),!(u=r.ia.get(n))){e.next=6;break}i=u.targetId,r.sharedClientState.addLocalQueryTarget(i),a=u.view.ea(),e.next=15;break;case 6:return e.next=8,kp(r.localStore,sl(n));case 8:return s=e.sent,r.isPrimaryClient&&mv(r.remoteStore,s),c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,Em(r,n,i,"current"===c);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Sm.apply(this,arguments)}function Em(e,t,n,r){return Tm.apply(this,arguments)}function Tm(){return Tm=f(o().mark((function e(t,n,r,i){var a,u,s,c,l,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=f(o().mark((function e(t,n,r,i){var a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,xp(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return u=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,u),e.abrupt("return",(Hm(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,xp(t.localStore,n,!0);case 3:return a=e.sent,u=new bm(n,a._i),s=u.Wu(a.documents),c=df.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),l=u.applyChanges(s,t.isPrimaryClient,c),Hm(t,r,l.Xu),h=new wm(n,r,u),e.abrupt("return",(t.ia.set(n,h),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Tm.apply(this,arguments)}function Cm(e,t){return Nm.apply(this,arguments)}function Nm(){return Nm=f(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=os(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!ll(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,bp(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),yv(r.remoteStore,i.targetId),Wm(r,i.targetId)})).catch(Ud);case 9:e.next=14;break;case 11:return Wm(r,i.targetId),e.next=14,bp(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Nm.apply(this,arguments)}function Am(e,t,n){return Dm.apply(this,arguments)}function Dm(){return Dm=f(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gy(t),e.prev=1,e.next=4,function(e,t){var n,r=os(e),i=Is.now(),a=t.reduce((function(e,t){return e.add(t.key)}),cf());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,u=[],s=Dt(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Vl(c,n.get(c.key));null!=l&&u.push(new ql(c.key,l,mc(l.value.mapValue),Ol.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new Tc(ws)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Ym(i,a.changes);case 9:return e.next=11,Rv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=em(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Dm.apply(this,arguments)}function Pm(e,t){return Rm.apply(this,arguments)}function Rm(){return Rm=f(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=os(t),e.prev=1,e.next=4,mp(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(as(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?as(n.na):e.removedDocuments.size>0&&(as(n.na),n.na=!1))})),e.next=8,Ym(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ud(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Rm.apply(this,arguments)}function Om(e,t,n){var r=os(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=os(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Dt(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&hm(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Lm(e,t,n){return Mm.apply(this,arguments)}function Mm(){return Mm=f(o().mark((function e(t,n,r){var i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=os(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(u=a&&a.key)){e.next=14;break}return s=(s=new Tc(Hs.comparator)).insert(u,yc.newNoDocument(u,Ss.min())),c=cf().add(u),l=new hf(Ss.min(),new Map,new Ac(ws),s,c),e.next=9,Pm(i,l);case 9:i.ua=i.ua.remove(u),i.aa.delete(n),$m(i),e.next=16;break;case 14:return e.next=16,bp(i.localStore,n,!1).then((function(){return Wm(i,n,r)})).catch(Ud);case 16:case"end":return e.stop()}}),e)}))),Mm.apply(this,arguments)}function Fm(e,t){return Um.apply(this,arguments)}function Um(){return Um=f(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=os(t),i=n.batch.batchId,e.prev=1,e.next=4,pp(r.localStore,n);case 4:return a=e.sent,Km(r,i,null),qm(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Ym(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ud(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Um.apply(this,arguments)}function Vm(e,t,n){return jm.apply(this,arguments)}function jm(){return jm=f(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=os(t),e.prev=1,e.next=4,function(e,t){var n=os(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return as(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Km(i,n,r),qm(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Ym(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ud(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),jm.apply(this,arguments)}function Bm(e,t){return zm.apply(this,arguments)}function zm(){return zm=f(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xv((r=os(t)).remoteStore)||es("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=os(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=em(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(u);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),zm.apply(this,arguments)}function qm(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function Km(e,t,n){var r=os(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function Wm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Dt(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||Gm(e,t)}))}function Gm(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(yv(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),$m(e))}function Hm(e,t,n){var r,i=Dt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof gm?(e.ca.addReference(a.key,t),Qm(e,a)):a instanceof km?(es("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||Gm(e,a.key)):is()}}catch(o){i.e(o)}finally{i.f()}}function Qm(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(es("SyncEngine","New document in limbo: "+n),e.oa.add(r),$m(e))}function $m(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new Hs(As.fromString(t)),r=e.fa.next();e.aa.set(r,new xm(n)),e.ua=e.ua.insert(n,r),mv(e.remoteStore,new zh(sl(rl(n.path)),r,2,gs.A))}}function Ym(e,t,n){return Jm.apply(this,arguments)}function Jm(){return Jm=f(o().mark((function e(t,n,r){var i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=os(t),a=[],u=[],s=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){s.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=sp.Ys(t.targetId,e);u.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.sa.zo(a),e.next=9,function(){var e=f(o().mark((function e(t,n){var r,i,a,u,s,c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=os(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Th.forEach(n,(function(t){return Th.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Th.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ph(e.t0)){e.next=10;break}throw e.t0;case 10:es("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Dt(n);try{for(i.s();!(a=i.n()).done;)u=a.value,s=u.targetId,u.fromCache||(c=r.ui.get(s),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),r.ui=r.ui.insert(s,f))}catch(o){i.e(o)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}}),e)}))),Jm.apply(this,arguments)}function Xm(e,t){return Zm.apply(this,arguments)}function Zm(){return Zm=f(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=os(t)).currentUser.isEqual(n)){e.next=11;break}return es("SyncEngine","User change. New user:",n.toKey()),e.next=5,hp(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new ss(us.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Ym(r,i.di);case 11:case"end":return e.stop()}}),e)}))),Zm.apply(this,arguments)}function ey(e,t){var n=os(e),r=n.aa.get(t);if(r&&r.na)return cf().add(r.key);var i=cf(),a=n.ra.get(t);if(!a)return i;var o,u=Dt(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ia.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function ty(e,t){return ny.apply(this,arguments)}function ny(){return ny=f(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=os(t),e.next=3,xp(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&Hm(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),ny.apply(this,arguments)}function ry(e,t){return iy.apply(this,arguments)}function iy(){return iy=f(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=os(t),e.abrupt("return",Ip(r.localStore,n).then((function(e){return Ym(r,e)})));case 2:case"end":return e.stop()}}),e)}))),iy.apply(this,arguments)}function ay(e,t,n,r){return oy.apply(this,arguments)}function oy(){return oy=f(o().mark((function e(t,n,r,i){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=os(t),e.next=3,function(e,t){var n=os(e),r=os(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):Th.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(u=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Rv(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Km(a,n,i||null),qm(a,n),function(e,t){os(os(e).Bs)._n(t)}(a.localStore,n)):is();case 11:return e.next=13,Ym(a,u);case 13:e.next=16;break;case 15:es("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),oy.apply(this,arguments)}function uy(e,t){return sy.apply(this,arguments)}function sy(){return sy=f(o().mark((function e(t,n){var r,i,a,u,s,c,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yy(r=os(t)),gy(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,cy(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,$v(r.remoteStore,!0);case 9:u=Dt(a);try{for(u.s();!(s=u.n()).done;)c=s.value,mv(r.remoteStore,c)}catch(o){u.e(o)}finally{u.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return l=[],f=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then((function(){return Wm(r,t),bp(r.localStore,t,!0)})),yv(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,cy(r,l);case 21:return function(e){var t=os(e);t.aa.forEach((function(e,n){yv(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new Tc(Hs.comparator)}(r),r.da=!1,e.next=25,$v(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),sy.apply(this,arguments)}function cy(e,t,n){return ly.apply(this,arguments)}function ly(){return ly=f(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d,p,v,m,y,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=os(t),a=[],u=[],s=Dt(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(h=i.ra.get(l))||0===h.length){e.next=34;break}return e.next=11,kp(i.localStore,sl(h[0]));case 11:f=e.sent,d=Dt(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,m=i.ia.get(v),e.next=20,ty(i,m);case 20:(y=e.sent).snapshot&&u.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,_p(i.localStore,l);case 36:return g=e.sent,e.next=39,kp(i.localStore,g);case 39:return f=e.sent,e.next=42,Em(i,fy(g),l,!1);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(u),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),ly.apply(this,arguments)}function fy(e){return nl(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function hy(e){var t=os(e);return os(os(t.localStore).persistence).Fs()}function dy(e,t,n,r){return py.apply(this,arguments)}function py(){return py=f(o().mark((function e(t,n,r,i){var a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=os(t)).da){e.next=3;break}return e.abrupt("return",void es("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((u=a.ra.get(n))&&u.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Ip(a.localStore,pl(u[0]));case 10:return s=e.sent,c=hf.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Ym(a,s,c);case 14:return e.abrupt("break",20);case 15:return e.next=17,bp(a.localStore,n,!0);case 17:return Wm(a,n,i),e.abrupt("break",20);case 19:is();case 20:case"end":return e.stop()}}),e)}))),py.apply(this,arguments)}function vy(e,t,n){return my.apply(this,arguments)}function my(){return my=f(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=yy(t)).da){e.next=45;break}a=Dt(n),e.prev=3,a.s();case 5:if((u=a.n()).done){e.next=21;break}if(s=u.value,!i.ra.has(s)){e.next=10;break}return es("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,_p(i.localStore,s);case 12:return c=e.sent,e.next=15,kp(i.localStore,c);case 15:return l=e.sent,e.next=18,Em(i,fy(c),l.targetId,!1);case 18:mv(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=Dt(r),e.prev=30,d=o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,bp(i.localStore,t,!1).then((function(){yv(i.remoteStore,t),Wm(i,t)})).catch(Ud);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),my.apply(this,arguments)}function yy(e){var t=os(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ey.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lm.bind(null,t),t.sa.zo=lm.bind(null,t.eventManager),t.sa.wa=fm.bind(null,t.eventManager),t}function gy(e){var t=os(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vm.bind(null,t),t}function ky(e,t,n){var r=os(e);(function(){var e=f(o().mark((function e(t,n,r){var i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=os(e),r=Tf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(ym(i)),a=new mm(i,t.localStore,n.M),e.next=15,n.ma();case 15:u=e.sent;case 16:if(!u){e.next=26;break}return e.next=19,a.Fu(u);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.ma();case 23:u=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return c=e.sent,e.next=31,Ym(t,c.Lu,void 0);case 31:return e.next=33,function(e,t){var n=os(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(c.progress),e.abrupt("return",Promise.resolve(c.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ns("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var by=function(){function e(){h(this,e),this.synchronizeTabs=!1}return p(e,[{key:"initialize",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=iv(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return fp(this.persistence,new cp,e.initialUser,this.M)}},{key:"ya",value:function(e){return new Up(jp.Yi,this.M)}},{key:"ga",value:function(e){return new Yp}},{key:"terminate",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),wy=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return p(n,[{key:"initialize",value:function(){var e=f(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(y(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,gy(this.Ta.syncEngine);case 6:return e.next=8,Rv(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return fp(this.persistence,new cp,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new zd(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=op(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Sd.withCacheSize(this.cacheSizeBytes):Sd.DEFAULT;return new rp(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,nv(),rv(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new Yp}}]),n}(by),xy=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return p(n,[{key:"initialize",value:function(){var e=f(o().mark((function e(t){var r,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(y(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof $p,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:ay.bind(null,r),Br:dy.bind(null,r),Lr:vy.bind(null,r),Fs:hy.bind(null,r),Fr:ry.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uy(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=nv();if(!$p.vt(t))throw new ss(us.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=op(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $p(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(wy),_y=function(){function e(){h(this,e)}return p(e,[{key:"initialize",value:function(){var e=f(o().mark((function e(t,n){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Om(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Xm.bind(null,this.syncEngine),e.next=12,$v(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new am}},{key:"createDatastore",value:function(e){var t,n=iv(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new tv(t));return function(e,t,n,r){return new cv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Om(o.syncEngine,e,0)},a=Xp.vt()?new Xp:new Jp,new fv(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new _m(e,t,n,r,i,a);return o&&(u.da=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=os(t),es("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,pv(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Iy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return f(o().mark((function r(){var i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Sy=function(){function e(t){h(this,e),this.observer=t,this.muted=!1}return p(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Ey=function(){function e(t,n){var r=this;h(this,e),this.Ra=t,this.M=n,this.metadata=new cs,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return p(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=f(o().mark((function e(){var t,n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new pm(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=f(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=f(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ty=function(){function e(t){h(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return p(e,[{key:"lookup",value:function(){var e=f(o().mark((function e(t){var n,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new ss(us.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=f(o().mark((function e(t,n){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=os(t),i=Of(r.M)+"/documents",a={documents:n.map((function(e){return Af(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return u=e.sent,s=new Map,u.forEach((function(e){var t=Uf(r.M,e);s.set(t.key.toString(),t)})),c=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());as(!!t),c.push(t)})),c));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new $l(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=f(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Hs.fromPath(t);n.mutations.push(new Yl(r,n.precondition(r)))})),e.next=7,function(){var e=f(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=os(t),i=Of(r.M)+"/documents",a={writes:n.map((function(e){return Vf(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw is();t=Ss.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ss(us.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ol.updateTime(t):Ol.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ss.min()))throw new ss(us.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ol.updateTime(t)}return Ol.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Cy=function(){function e(t,n,r,i,a){h(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new av(this.asyncQueue,"transaction_retry")}return p(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(f(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Ty(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!Ks(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Xl(t)}return!1}}]),e}(),Ny=function(){function e(t,n,r,i){var a=this;h(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Yu.UNAUTHENTICATED,this.clientId=bs.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return es("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return es("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return p(e,[{key:"getConfiguration",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ss(us.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(f(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=em(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Ay(e,t){return Dy.apply(this,arguments)}function Dy(){return Dy=f(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),es("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,hp(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Dy.apply(this,arguments)}function Py(e,t){return Ry.apply(this,arguments)}function Ry(){return Ry=f(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Oy(t);case 3:return r=e.sent,es("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Hv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Hv(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Ry.apply(this,arguments)}function Oy(e){return Ly.apply(this,arguments)}function Ly(){return Ly=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return es("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Ay(t,new by);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Ly.apply(this,arguments)}function My(e){return Fy.apply(this,arguments)}function Fy(){return Fy=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return es("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Py(t,new _y);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Fy.apply(this,arguments)}function Uy(e){return Oy(e).then((function(e){return e.persistence}))}function Vy(e){return Oy(e).then((function(e){return e.localStore}))}function jy(e){return My(e).then((function(e){return e.remoteStore}))}function By(e){return My(e).then((function(e){return e.syncEngine}))}function zy(e){return qy.apply(this,arguments)}function qy(){return qy=f(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,My(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Im.bind(null,n.syncEngine),r.onUnlisten=Cm.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),qy.apply(this,arguments)}function Ky(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new cs;return e.asyncQueue.enqueueAndForget(f(o().mark((function i(){return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Sy({next:function(a){t.enqueueAndForget((function(){return sm(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new ss(us.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new ss(us.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new dm(rl(n.path),a,{includeMetadataChanges:!0,ku:!0});return om(e,o)},i.next=3,zy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Wy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new cs;return e.asyncQueue.enqueueAndForget(f(o().mark((function i(){return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Sy({next:function(n){t.enqueueAndForget((function(){return sm(e,o)})),n.fromCache&&"server"===r.source?i.reject(new ss(us.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new dm(n,a,{includeMetadataChanges:!0,ku:!0});return om(e,o)},i.next=3,zy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Gy=new Map;function Hy(e,t,n){if(!n)throw new ss(us.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Qy(e,t,n,r){if(!0===t&&!0===r)throw new ss(us.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function $y(e){if(!Hs.isDocumentKey(e))throw new ss(us.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Yy(e){if(Hs.isDocumentKey(e))throw new ss(us.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Jy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":is()}function Xy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ss(us.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Jy(e);throw new ss(us.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Zy(e,t){if(t<=0)throw new ss(us.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var eg=function(){function e(t){var n;if(h(this,e),void 0===t.host){if(void 0!==t.ssl)throw new ss(us.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ss(us.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Qy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return p(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),tg=function(){function e(t,n,r){h(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eg({}),this._settingsFrozen=!1,t instanceof qs?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ss(us.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qs(e.options.projectId)}(t))}return p(e,[{key:"app",get:function(){if(!this._app)throw new ss(us.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ss(us.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new fs;switch(e.type){case"gapi":var t=e.client;return as(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new vs(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new ss(us.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Gy.get(e);t&&(es("ComponentProvider","Removing Datastore"),Gy.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function ng(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Xy(e,tg))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&ns("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Yu.MOCK_USER;else{o=jt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new ss(us.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Yu(s)}e._authCredentials=new hs(new ls(o,u))}}var rg=function(){function e(t,n,r){h(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return p(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ag(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),ig=function(){function e(t,n,r){h(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return p(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ag=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r,rl(i)))._path=i,a.type="collection",a}return p(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new rg(this.firestore,null,new Hs(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(ig);function og(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=sn(e),Hy("collection","path",t),e instanceof tg){var a=As.fromString.apply(As,[t].concat(r));return Yy(a),new ag(e,null,a)}if(!(e instanceof rg||e instanceof ag))throw new ss(us.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(As.fromString.apply(As,[t].concat(r)));return Yy(o),new ag(e.firestore,null,o)}function ug(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=sn(e),1===arguments.length&&(t=bs.R()),Hy("doc","path",t),e instanceof tg){var a=As.fromString.apply(As,[t].concat(r));return $y(a),new rg(e,null,new Hs(a))}if(!(e instanceof rg||e instanceof ag))throw new ss(us.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(As.fromString.apply(As,[t].concat(r)));return $y(o),new rg(e.firestore,e instanceof ag?e.converter:null,new Hs(o))}function sg(e,t){return e=sn(e),t=sn(t),(e instanceof rg||e instanceof ag)&&(t instanceof rg||t instanceof ag)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function cg(e,t){return e=sn(e),t=sn(t),e instanceof ig&&t instanceof ig&&e.firestore===t.firestore&&ll(e._query,t._query)&&e.converter===t.converter}var lg=function(){function e(){var t=this;h(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new av(this,"async_queue_retry"),this.Qa=function(){var e=rv();e&&es("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=rv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return p(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=rv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new cs;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=f(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ph(e.t0)){e.next=12;break}throw e.t0;case 12:es("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ts("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=Zv.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&is()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=f(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=Dt(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Dt(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function fg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Dt(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var hg=function(){function e(){h(this,e),this._progressObserver={},this._taskCompletionResolver=new cs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return p(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),dg=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new lg,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return p(n,[{key:"_terminate",value:function(){return this._firestoreClient||vg(this),this._firestoreClient.terminate()}}]),n}(tg);function pg(e){return e._firestoreClient||vg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function vg(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new zs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Ny(e._authCredentials,e._appCheckCredentials,e._queue,r)}function mg(e,t,n){var r=new cs;return e.asyncQueue.enqueue(f(o().mark((function i(){return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Ay(e,n);case 3:return i.next=5,Py(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===us.FAILED_PRECONDITION||e.code===us.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function yg(e){return function(e){return e.asyncQueue.enqueue(f(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Uy(e);case 2:return n=t.sent,t.next=5,jy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=os(e);return t.wu.delete(0),hv(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(pg(e=Xy(e,dg)))}function gg(e){return function(e){return e.asyncQueue.enqueue(f(o().mark((function t(){var n,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Uy(e);case 2:return n=t.sent,t.next=5,jy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=os(t)).wu.add(0),e.next=4,pv(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(pg(e=Xy(e,dg)))}function kg(e,t){var n=pg(e=Xy(e,dg)),r=new hg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Ey(e,t)}(function(e,t){if(e instanceof Uint8Array)return Iy(e,t);if(e instanceof ArrayBuffer)return Iy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,iv(t));e.asyncQueue.enqueueAndForget(f(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ky,t.next=3,By(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function bg(e,t){return function(e,t){return e.asyncQueue.enqueue(f(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=os(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,Vy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(pg(e=Xy(e,dg)),t).then((function(t){return t?new ig(e,null,t.query):null}))}function wg(e){if(e._initialized||e._terminated)throw new ss(us.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var xg=function(){function e(){h(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new ss(us.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ps(n)}return p(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var _g=function(){function e(t){h(this,e),this._byteString=t}return p(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Os.fromBase64String(t))}catch(t){throw new ss(us.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Os.fromUint8Array(t))}}]),e}(),Ig=p((function e(t){h(this,e),this._methodName=t})),Sg=function(){function e(t,n){if(h(this,e),!isFinite(t)||t<-90||t>90)throw new ss(us.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ss(us.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return p(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return ws(this._lat,e._lat)||ws(this._long,e._long)}}]),e}(),Eg=/^__.*__$/,Tg=function(){function e(t,n,r){h(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ql(e,this.data,this.fieldMask,t,this.fieldTransforms):new zl(e,this.data,t,this.fieldTransforms)}}]),e}(),Cg=function(){function e(t,n,r){h(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return p(e,[{key:"toMutation",value:function(e,t){return new ql(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Ng(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw is()}}var Ag=function(){function e(t,n,r,i,a,o){h(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return p(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return Yg(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Ng(this.ec)&&Eg.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),Dg=function(){function e(t,n,r){h(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||iv(t)}return p(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ag({ec:e,methodName:t,hc:n,path:Ps.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Pg(e){var t=e._freezeSettings(),n=iv(e._databaseId);return new Dg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Rg(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);Gg("Data must be an object, but it was:",o,r);var u,s,c=Kg(r,o);if(a.merge)u=new Rs(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Dt(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=Hg(t,d,n);if(!o.contains(p))throw new ss(us.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Jg(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Rs(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Tg(new vc(c),u,s)}var Og=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ig);function Lg(e,t,n){return new Ag({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var Mg=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"_toFieldTransform",value:function(e){return new Pl(e.path,new Il)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ig),Fg=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).fc=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=Lg(this,e,!0),n=this.fc.map((function(e){return qg(e,t)})),r=new Sl(n);return new Pl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ig),Ug=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).fc=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=Lg(this,e,!0),n=this.fc.map((function(e){return qg(e,t)})),r=new Tl(n);return new Pl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ig),Vg=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).dc=r,i}return p(n,[{key:"_toFieldTransform",value:function(e){var t=new Nl(e.M,kl(e.M,this.dc));return new Pl(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ig);function jg(e,t,n,r){var i=e.lc(1,t,n);Gg("Data must be an object, but it was:",i,r);var a=[],o=vc.empty();Ts(r,(function(e,r){var u=$g(t,e,n);r=sn(r);var s=i.oc(u);if(r instanceof Og)a.push(u);else{var c=qg(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Rs(a);return new Cg(o,u,i.fieldTransforms)}function Bg(e,t,n,r,i,a){var o=e.lc(1,t,n),u=[Hg(t,r,n)],s=[i];if(a.length%2!=0)throw new ss(us.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Hg(t,a[c])),s.push(a[c+1]);for(var l=[],f=vc.empty(),h=u.length-1;h>=0;--h)if(!Jg(l,u[h])){var d=u[h],p=s[h];p=sn(p);var v=o.oc(d);if(p instanceof Og)l.push(d);else{var m=qg(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Rs(l);return new Cg(f,y,o.fieldTransforms)}function zg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qg(n,e.lc(r?4:3,t))}function qg(e,t){if(Wg(e=sn(e)))return Gg("Unsupported field value:",t,e),Kg(e,t);if(e instanceof Ig)return function(e,t){if(!Ng(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Dt(e);try{for(a.s();!(n=a.n()).done;){var o=qg(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=sn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kl(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Is.fromDate(e);return{timestampValue:If(t.M,n)}}if(e instanceof Is){var r=new Is(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:If(t.M,r)}}if(e instanceof Sg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _g)return{bytesValue:Sf(t.M,e._byteString)};if(e instanceof rg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Cf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(Jy(e)))}(e,t)}function Kg(e,t){var n={};return Cs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ts(e,(function(e,r){var i=qg(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Wg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Is||e instanceof Sg||e instanceof _g||e instanceof rg||e instanceof Ig)}function Gg(e,t,n){if(!Wg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Jy(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function Hg(e,t,n){if((t=sn(t))instanceof xg)return t._internalPath;if("string"==typeof t)return $g(e,t);throw Yg("Field path arguments must be of type string or ",e,!1,void 0,n)}var Qg=new RegExp("[~\\*/\\[\\]]");function $g(e,t,n){if(t.search(Qg)>=0)throw Yg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Pt(xg,ge(t.split(".")))._internalPath}catch(r){throw Yg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Yg(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new ss(us.INVALID_ARGUMENT,u+e+s)}function Jg(e,t){return e.some((function(e){return e.isEqual(t)}))}var Xg=function(){function e(t,n,r,i,a){h(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return p(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new rg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Zg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(ek("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Zg=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){return Or(y(n.prototype),"data",this).call(this)}}]),n}(Xg);function ek(e,t){return"string"==typeof t?$g(e,t):t instanceof xg?t._internalPath:t._delegate._internalPath}var tk=function(){function e(t,n){h(this,e),this.hasPendingWrites=t,this.fromCache=n}return p(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),nk=function(e){m(n,e);var t=w(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return p(n,[{key:"exists",value:function(){return Or(y(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new rk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ek("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Xg),rk=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Or(y(n.prototype),"data",this).call(this,e)}}]),n}(nk),ik=function(){function e(t,n,r,i){h(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new tk(i.hasPendingWrites,i.fromCache),this.query=r}return p(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new rk(n._firestore,n._userDataWriter,r.key,r,new tk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ss(us.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new rk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new rk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ak(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function ak(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return is()}}function ok(e,t){return e instanceof nk&&t instanceof nk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ik&&t instanceof ik&&e._firestore===t._firestore&&cg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function uk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ss(us.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sk=p((function e(){h(this,e)}));function ck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var lk=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return p(n,[{key:"_apply",value:function(e){var t=Pg(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new ss(us.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){wk(o,a);var s,c=[],l=Dt(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(bk(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=bk(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||wk(o,a),u=zg(n,"where",o,"in"===a||"not-in"===a);var h=Bc.create(i,a,u);return function(e,t){if(t.S()){var n=al(e);if(null!==n&&!n.isEqual(t.field))throw new ss(us.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=il(e);null!==r&&xk(e,t.field,r)}var i=function(e,t){var n,r=Dt(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new ss(us.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ss(us.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new ig(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new tl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(sk);var fk=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return p(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new ss(us.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ss(us.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Jc(t,n);return function(e,t){if(null===il(e)){var n=al(e);null!==n&&xk(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new ig(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new tl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(sk);var hk=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return p(n,[{key:"_apply",value:function(e){return new ig(e.firestore,e.converter,cl(e._query,this.yc,this.Ic))}}]),n}(sk);var dk=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return p(n,[{key:"_apply",value:function(e){var t=kk(e,this.type,this.Tc,this.Ec);return new ig(e.firestore,e.converter,function(e,t){return new tl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(sk);function pk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dk("startAt",t,!0)}function vk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dk("startAfter",t,!1)}var mk=function(e){m(n,e);var t=w(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return p(n,[{key:"_apply",value:function(e){var t=kk(e,this.type,this.Tc,this.Ec);return new ig(e.firestore,e.converter,function(e,t){return new tl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(sk);function yk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mk("endBefore",t,!1)}function gk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mk("endAt",t,!0)}function kk(e,t,n,r){if(n[0]=sn(n[0]),n[0]instanceof Xg)return function(e,t,n,r,i){if(!r)throw new ss(us.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Dt(ul(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(rc(t,r.key));else{var c=r.data.field(s.field);if(Vs(c))throw new ss(us.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new ss(us.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Yc(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Pg(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new ss(us.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new ss(us.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!ol(e)&&-1!==c.indexOf("/"))throw new ss(us.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(As.fromString(c));if(!Hs.isDocumentKey(l))throw new ss(us.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Hs(l);u.push(rc(t,f))}else{var h=zg(n,r,c);u.push(h)}}return new Yc(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function bk(e,t,n){if("string"==typeof(n=sn(n))){if(""===n)throw new ss(us.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ol(t)&&-1!==n.indexOf("/"))throw new ss(us.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(As.fromString(n));if(!Hs.isDocumentKey(r))throw new ss(us.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return rc(e,new Hs(r))}if(n instanceof rg)return rc(e,n._key);throw new ss(us.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Jy(n),"."))}function wk(e,t){if(!Array.isArray(e)||0===e.length)throw new ss(us.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new ss(us.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function xk(e,t,n){if(!n.isEqual(t))throw new ss(us.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var _k={maxAttempts:5},Ik=function(){function e(){h(this,e)}return p(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw is()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Ts(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Sg(Fs(e.latitude),Fs(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=js(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Bs(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ms(e);return new Is(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=As.fromString(e);as(Xf(n));var r=new qs(n.get(1),n.get(3)),i=new Hs(n.popFirst(5));return r.isEqual(t)||ts("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Sk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Ek=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new _g(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new rg(this.firestore,null,t)}}]),n}(Ik),Tk=function(){function e(t,n){h(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pg(t)}return p(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Ck(e,this._firestore),i=Sk(r.converter,t,n),a=Rg(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ol.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Ck(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=sn(t))||t instanceof xg?Bg(this._dataReader,"WriteBatch.update",i._key,t,n,o):jg(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ol.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Ck(e,this._firestore);return this._mutations=this._mutations.concat(new $l(t._key,Ol.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new ss(us.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Ck(e,t){if((e=sn(e)).firestore!==t)throw new ss(us.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Nk=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new _g(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new rg(this.firestore,null,t)}}]),n}(Ik);function Ak(e){e=Xy(e,rg);var t=Xy(e.firestore,dg),n=pg(t),r=new Nk(t);return function(e,t){var n=new cs;return e.asyncQueue.enqueueAndForget(f(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=f(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=os(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new ss(us.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=em(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Vy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new nk(t,r,e._key,n,new tk(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Dk(e){e=Xy(e,ig);var t=Xy(e.firestore,dg),n=pg(t),r=new Nk(t);return function(e,t){var n=new cs;return e.asyncQueue.enqueueAndForget(f(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=f(o().mark((function e(t,n,r){var i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xp(t,n,!0);case 3:i=e.sent,a=new bm(n,i._i),u=a.Wu(i.documents),s=a.applyChanges(u,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=em(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Vy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new ik(t,r,e,n)}))}function Pk(e,t,n){e=Xy(e,rg);var r=Xy(e.firestore,dg),i=Sk(e.converter,t,n);return Mk(r,[Rg(Pg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ol.none())])}function Rk(e,t,n){e=Xy(e,rg);for(var r=Xy(e.firestore,dg),i=Pg(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Mk(r,[("string"==typeof(t=sn(t))||t instanceof xg?Bg(i,"updateDoc",e._key,t,n,o):jg(i,"updateDoc",e._key,t)).toMutation(e._key,Ol.exists(!0))])}function Ok(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,u;e=sn(e);var s={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||fg(n[c])||(s=n[c],c++);var l,h,d,p={includeMetadataChanges:s.includeMetadataChanges};if(fg(n[c])){var v=n[c];n[c]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[c+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[c+2]=null===(u=v.complete)||void 0===u?void 0:u.bind(v)}if(e instanceof rg)h=Xy(e.firestore,dg),d=rl(e._key.path),l={next:function(t){n[c]&&n[c](Fk(h,e,t))},error:n[c+1],complete:n[c+2]};else{var m=Xy(e,ig);h=Xy(m.firestore,dg),d=m._query;var y=new Nk(h);l={next:function(e){n[c]&&n[c](new ik(h,y,m,e))},error:n[c+1],complete:n[c+2]},uk(e._query)}return function(e,t,n,r){var i=new Sy(r),a=new dm(t,i,n);return e.asyncQueue.enqueueAndForget(f(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=om,t.next=3,zy(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(f(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=sm,t.next=3,zy(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(pg(h),d,p,l)}function Lk(e,t){return function(e,t){var n=new Sy(t);return e.asyncQueue.enqueueAndForget(f(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){os(e).bu.add(t),t.next()},t.next=3,zy(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(f(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){os(e).bu.delete(t)},t.next=3,zy(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(pg(e=Xy(e,dg)),fg(t)?t:{next:t})}function Mk(e,t){return function(e,t){var n=new cs;return e.asyncQueue.enqueueAndForget(f(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Am,r.next=3,By(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(pg(e),t)}function Fk(e,t,n){var r=n.docs.get(t._key),i=new Nk(e);return new nk(e,i,t._key,r,new tk(n.hasPendingWrites,n.fromCache),t.converter)}var Uk=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r))._firestore=e,i}return p(n,[{key:"get",value:function(e){var t=this,r=Ck(e,this._firestore),i=new Nk(this._firestore);return Or(y(n.prototype),"get",this).call(this,e).then((function(e){return new nk(t._firestore,i,r._key,e._document,new tk(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){h(this,e),this._firestore=t,this._transaction=n,this._dataReader=Pg(t)}return p(e,[{key:"get",value:function(e){var t=this,n=Ck(e,this._firestore),r=new Ek(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return is();var i=e[0];if(i.isFoundDocument())return new Xg(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Xg(t._firestore,r,n._key,null,n.converter);throw is()}))}},{key:"set",value:function(e,t,n){var r=Ck(e,this._firestore),i=Sk(r.converter,t,n),a=Rg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Ck(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=sn(t))||t instanceof xg?Bg(this._dataReader,"Transaction.update",i._key,t,n,o):jg(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Ck(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Vk(e,t,n){e=Xy(e,dg);var r=Object.assign(Object.assign({},_k),n);return function(e){if(e.maxAttempts<1)throw new ss(us.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new cs;return e.asyncQueue.enqueueAndForget(f(o().mark((function i(){var a;return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return My(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new Cy(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(pg(e),(function(n){return t(new Uk(e,n))}),r)}function jk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Fg("arrayUnion",t)}function Bk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ug("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ju=e}(nr),$n(new cn("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new dg(i,new ds(e.getProvider("auth-internal")),new ys(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),sr($u,"3.4.9",e),sr($u,"3.4.9","esm2017")}();function zk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ss("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function qk(){if("undefined"===typeof Uint8Array)throw new ss("unimplemented","Uint8Arrays are not available in this environment.")}function Kk(){if("undefined"==typeof atob)throw new ss("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Wk=function(){function e(t){h(this,e),this._delegate=t}return p(e,[{key:"toBase64",value:function(){return Kk(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return qk(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Kk(),new e(_g.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return qk(),new e(_g.fromUint8Array(t))}}]),e}();function Gk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Dt(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Hk=function(){function e(){h(this,e)}return p(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){wg(e=Xy(e,dg));var n=pg(e),r=e._freezeSettings(),i=new _y;return mg(n,i,new wy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){wg(e=Xy(e,dg));var t=pg(e),n=e._freezeSettings(),r=new _y;return mg(t,r,new xy(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new ss(us.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new cs;return e._queue.enqueueAndForgetEvenWhileRestricted(f(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nh.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Nh.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(op(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Qk=function(){function e(t,n,r){var i=this;h(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof qs||(this._appCompat=t)}return p(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ns("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ng(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return yg(this._delegate)}},{key:"disableNetwork",value:function(){return gg(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Qy("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new cs;return e.asyncQueue.enqueueAndForget(f(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Bm,n.next=3,By(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(pg(e=Xy(e,dg)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Lk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new ss("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new sb(this,og(this._delegate,e))}catch(t){throw eb(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Zk(this,ug(this._delegate,e))}catch(t){throw eb(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new ab(this,function(e,t){if(e=Xy(e,tg),Hy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ss(us.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ig(e,null,function(e){return new tl(As.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw eb(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Vk(this._delegate,(function(n){return e(new Yk(t,n))}))}},{key:"batch",value:function(){var e=this;return pg(this._delegate),new Jk(new Tk(this._delegate,(function(t){return Mk(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return kg(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return bg(this._delegate,e).then((function(e){return e?new ab(t,e):null}))}}]),e}(),$k=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return p(n,[{key:"convertBytes",value:function(e){return new Wk(new _g(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Zk.forKey(t,this.firestore,null)}}]),n}(Ik);var Yk=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new $k(t)}return p(e,[{key:"get",value:function(e){var t=this,n=cb(e);return this._delegate.get(n).then((function(e){return new rb(t._firestore,new nk(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=cb(e);return n?(zk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=cb(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=cb(e);return this._delegate.delete(t),this}}]),e}(),Jk=function(){function e(t){h(this,e),this._delegate=t}return p(e,[{key:"set",value:function(e,t,n){var r=cb(e);return n?(zk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=cb(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=cb(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Xk=function(){function e(t,n,r){h(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return p(e,[{key:"fromFirestore",value:function(e,t){var n=new rk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ib(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new $k(t),n),i.set(n,a)),a}}]),e}();Xk.INSTANCES=new WeakMap;var Zk=function(){function e(t,n){h(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new $k(t)}return p(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new sb(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new sb(this.firestore,og(this._delegate,e))}catch(t){throw eb(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=sn(e))instanceof rg&&sg(this._delegate,e)}},{key:"set",value:function(e,t){t=zk("DocumentReference.set",t);try{return t?Pk(this._delegate,e,t):Pk(this._delegate,e)}catch(n){throw eb(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Rk(this._delegate,e):Rk.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw eb(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Mk(Xy(e.firestore,dg),[new $l(e._key,Ol.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tb(n),a=nb(n,(function(t){return new rb(e.firestore,new nk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Ok(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Ak(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Xy(e,rg);var t=Xy(e.firestore,dg);return Ky(pg(t),e._key,{source:"server"}).then((function(n){return Fk(t,e,n)}))}(this._delegate):function(e){e=Xy(e,rg);var t=Xy(e.firestore,dg);return Ky(pg(t),e._key).then((function(n){return Fk(t,e,n)}))}(this._delegate),t.then((function(e){return new rb(n.firestore,new nk(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Xk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new ss("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new rg(n._delegate,r,new Hs(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new rg(n._delegate,r,t))}}]),e}();function eb(e,t,n){return e.message=e.message.replace(t,n),e}function tb(e){var t,n=Dt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Gk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function nb(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Gk(e[0])?e[0]:Gk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var rb=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"ref",get:function(){return new Zk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return ok(this._delegate,e._delegate)}}]),e}(),ib=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||is()}(void 0!==t),t}}]),n}(rb),ab=function(){function e(t,n){h(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new $k(t)}return p(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,ck(this._delegate,function(e,t,n){var r=t,i=ek("where",e);return new lk(i,r,n)}(t,n,r)))}catch(i){throw eb(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,ck(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ek("orderBy",e);return new fk(n,t)}(t,n)))}catch(r){throw eb(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,ck(this._delegate,function(e){return Zy("limit",e),new hk("limit",e,"F")}(t)))}catch(n){throw eb(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,ck(this._delegate,function(e){return Zy("limitToLast",e),new hk("limitToLast",e,"L")}(t)))}catch(n){throw eb(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,ck(this._delegate,pk.apply(void 0,arguments)))}catch(t){throw eb(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,ck(this._delegate,vk.apply(void 0,arguments)))}catch(t){throw eb(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,ck(this._delegate,yk.apply(void 0,arguments)))}catch(t){throw eb(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,ck(this._delegate,gk.apply(void 0,arguments)))}catch(t){throw eb(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return cg(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Dk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Xy(e,ig);var t=Xy(e.firestore,dg),n=pg(t),r=new Nk(t);return Wy(n,e._query,{source:"server"}).then((function(n){return new ik(t,r,e,n)}))}(this._delegate):function(e){e=Xy(e,ig);var t=Xy(e.firestore,dg),n=pg(t),r=new Nk(t);return uk(e._query),Wy(n,e._query).then((function(n){return new ik(t,r,e,n)}))}(this._delegate),t.then((function(e){return new ub(n.firestore,new ik(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tb(n),a=nb(n,(function(t){return new ub(e.firestore,new ik(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Ok(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Xk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),ob=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new ib(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),ub=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return p(e,[{key:"query",get:function(){return new ab(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new ib(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new ob(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new ib(n._firestore,r))}))}},{key:"isEqual",value:function(e){return ok(this._delegate,e._delegate)}}]),e}(),sb=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return p(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Zk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Zk(this.firestore,void 0===e?ug(this._delegate):ug(this._delegate,e))}catch(t){throw eb(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Xy(e.firestore,dg),r=ug(e),i=Sk(e.converter,t);return Mk(n,[Rg(Pg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ol.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Zk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return sg(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Xk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(ab);function cb(e){return Xy(e,rg)}var lb,fb=function(){function e(){h(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Pt(xg,n)}return p(e,[{key:"isEqual",value:function(e){return(e=sn(e))instanceof xg&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Ps.keyField().canonicalString())}}]),e}(),hb=function(){function e(t){h(this,e),this._delegate=t}return p(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Mg("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Og("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=jk.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Bk.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Vg("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),db={Firestore:Qk,GeoPoint:Sg,Timestamp:Is,Blob:Wk,Transaction:Yk,WriteBatch:Jk,DocumentReference:Zk,DocumentSnapshot:rb,Query:ab,QueryDocumentSnapshot:ib,QuerySnapshot:ub,CollectionReference:sb,FieldPath:fb,FieldValue:hb,setLogLevel:function(e){!function(e){Xu.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new cn("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},db)))})(lb=Pr,(function(e,t){return new Qk(e,t,new Hk)})),lb.registerVersion("@firebase/firestore-compat","0.1.18");function pb(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var vb;Object.create;var mb="facebook.com",yb="github.com",gb="google.com",kb="password",bb="twitter.com",wb="EMAIL_SIGNIN",xb="PASSWORD_RESET",_b="RECOVER_EMAIL",Ib="REVERT_SECOND_FACTOR_ADDITION",Sb="VERIFY_AND_CHANGE_EMAIL",Eb="VERIFY_EMAIL";function Tb(){return u({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Cb=function(){var e;return u(e={},"admin-restricted-operation","This operation is restricted to administrators only."),u(e,"argument-error",""),u(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),u(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),u(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),u(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),u(e,"cordova-not-ready","Cordova framework is not ready."),u(e,"cors-unsupported","This browser is not supported."),u(e,"credential-already-in-use","This credential is already associated with a different user account."),u(e,"custom-token-mismatch","The custom token corresponds to a different audience."),u(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),u(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),u(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),u(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),u(e,"email-already-in-use","The email address is already in use by another account."),u(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),u(e,"expired-action-code","The action code has expired."),u(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),u(e,"internal-error","An internal AuthError has occurred."),u(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),u(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),u(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),u(e,"invalid-auth-event","An internal AuthError has occurred."),u(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),u(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),u(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),u(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),u(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),u(e,"invalid-email","The email address is badly formatted."),u(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),u(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),u(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),u(e,"invalid-credential","The supplied auth credential is malformed or has expired."),u(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),u(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),u(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),u(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),u(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),u(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),u(e,"wrong-password","The password is invalid or the user does not have a password."),u(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),u(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),u(e,"invalid-provider-id","The specified provider ID is invalid."),u(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),u(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),u(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),u(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),u(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),u(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),u(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),u(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),u(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),u(e,"missing-continue-uri","A continue URL must be provided in the request."),u(e,"missing-iframe-start","An internal AuthError has occurred."),u(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),u(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),u(e,"missing-multi-factor-info","No second factor identifier is provided."),u(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),u(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),u(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),u(e,"app-deleted","This instance of FirebaseApp has been deleted."),u(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),u(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),u(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),u(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),u(e,"no-auth-event","An internal AuthError has occurred."),u(e,"no-such-provider","User was not linked to an account with the given provider."),u(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),u(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),u(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),u(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),u(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),u(e,"provider-already-linked","User can only be linked to one identity for the given provider."),u(e,"quota-exceeded","The project's quota for this operation has been exceeded."),u(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),u(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),u(e,"rejected-credential","The request contains malformed or mismatching credentials."),u(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),u(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),u(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),u(e,"timeout","The operation has timed out."),u(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),u(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),u(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),u(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),u(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),u(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),u(e,"unverified-email","The operation requires a verified email."),u(e,"user-cancelled","The user did not grant your application the permissions it requested."),u(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),u(e,"user-disabled","The user account has been disabled by an administrator."),u(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),u(e,"user-signed-out",""),u(e,"weak-password","The password must be 6 characters long or more."),u(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),u(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Nb=Tb,Ab=new $t("auth","Firebase",Tb()),Db=new bn("@firebase/auth");function Pb(e){if(Db.logLevel<=dn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Db.error.apply(Db,["Auth (".concat(nr,"): ").concat(e)].concat(n))}}function Rb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Fb.apply(void 0,[e].concat(n))}function Ob(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fb.apply(void 0,[e].concat(n))}function Lb(e,t,n){var r=Object.assign(Object.assign({},Nb()),u({},t,n));return new $t("auth","Firebase",r).create(t,{appName:e.name})}function Mb(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Rb(e,"argument-error"),Lb(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Fb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ge(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ge(o)))}return Ab.create.apply(Ab,[e].concat(n))}function Ub(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Fb.apply(void 0,[t].concat(r))}}function Vb(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Pb(t),new Error(t)}function jb(e,t){e||Vb(t)}var Bb=new Map;function zb(e){jb(e instanceof Function,"Expected a class definition");var t=Bb.get(e);return t?(jb(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Bb.set(e,t),t)}function qb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Kb(){return"http:"===Wb()||"https:"===Wb()}function Wb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Gb=function(){function e(t,n){h(this,e),this.shortDelay=t,this.longDelay=n,jb(n>t,"Short delay should be less than long delay!"),this.isMobile=zt()||Wt()}return p(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Kb()||Kt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Hb(e,t){jb(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Qb=function(){function e(){h(this,e)}return p(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Vb("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Vb("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Vb("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),$b=(u(vb={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),u(vb,"MISSING_CUSTOM_TOKEN","internal-error"),u(vb,"INVALID_IDENTIFIER","invalid-email"),u(vb,"MISSING_CONTINUE_URI","internal-error"),u(vb,"INVALID_PASSWORD","wrong-password"),u(vb,"MISSING_PASSWORD","internal-error"),u(vb,"EMAIL_EXISTS","email-already-in-use"),u(vb,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),u(vb,"INVALID_IDP_RESPONSE","invalid-credential"),u(vb,"INVALID_PENDING_TOKEN","invalid-credential"),u(vb,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),u(vb,"MISSING_REQ_TYPE","internal-error"),u(vb,"EMAIL_NOT_FOUND","user-not-found"),u(vb,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),u(vb,"EXPIRED_OOB_CODE","expired-action-code"),u(vb,"INVALID_OOB_CODE","invalid-action-code"),u(vb,"MISSING_OOB_CODE","internal-error"),u(vb,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),u(vb,"INVALID_ID_TOKEN","invalid-user-token"),u(vb,"TOKEN_EXPIRED","user-token-expired"),u(vb,"USER_NOT_FOUND","user-token-expired"),u(vb,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),u(vb,"INVALID_CODE","invalid-verification-code"),u(vb,"INVALID_SESSION_INFO","invalid-verification-id"),u(vb,"INVALID_TEMPORARY_PROOF","invalid-credential"),u(vb,"MISSING_SESSION_INFO","missing-verification-id"),u(vb,"SESSION_EXPIRED","code-expired"),u(vb,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),u(vb,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),u(vb,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),u(vb,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),u(vb,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),u(vb,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),u(vb,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),u(vb,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),u(vb,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),u(vb,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),u(vb,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),vb),Yb=new Gb(3e4,6e4);function Jb(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Xb(e,t,n,r){return Zb.apply(this,arguments)}function Zb(){return Zb=f(o().mark((function e(t,n,r,i){var a,u=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.abrupt("return",ew(t,a,f(o().mark((function e(){var a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},u={},i&&("GET"===n?u=i:a={body:JSON.stringify(i)}),s=tn(Object.assign({key:t.config.apiKey},u)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Qb.fetch()(iw(t,t.config.apiHost,r,s),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Zb.apply(this,arguments)}function ew(e,t,n){return tw.apply(this,arguments)}function tw(){return tw=f(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},$b),n),e.prev=2,a=new aw(t),e.next=6,Promise.race([r(),a.promise]);case 6:return u=e.sent,a.clearNetworkTimeout(),e.next=10,u.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw ow(t,"account-exists-with-different-credential",s);case 13:if(!u.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=u.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=E(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw ow(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw ow(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw ow(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Lb(t,p,d);case 34:Rb(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Qt)){e.next=41;break}throw e.t0;case 41:Rb(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),tw.apply(this,arguments)}function nw(e,t,n,r){return rw.apply(this,arguments)}function rw(){return rw=f(o().mark((function e(t,n,r,i){var a,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Xb(t,n,r,i,a);case 3:return"mfaPendingCredential"in(u=e.sent)&&Rb(t,"multi-factor-auth-required",{_serverResponse:u}),e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)}))),rw.apply(this,arguments)}function iw(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Hb(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var aw=function(){function e(t){var n=this;h(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Ob(n.auth,"network-request-failed"))}),Yb.get())}))}return p(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ow(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Ob(e,t,r);return i.customData._tokenResponse=n,i}function uw(e,t){return sw.apply(this,arguments)}function sw(){return sw=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xb(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),sw.apply(this,arguments)}function cw(e,t){return lw.apply(this,arguments)}function lw(){return lw=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),lw.apply(this,arguments)}function fw(e,t){return hw.apply(this,arguments)}function hw(){return hw=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xb(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),hw.apply(this,arguments)}function dw(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function pw(){return pw=f(o().mark((function e(t){var n,r,i,a,u,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=sn(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Ub((a=mw(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),u="object"===typeof a.firebase?a.firebase:void 0,s=null===u||void 0===u?void 0:u.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:dw(vw(a.auth_time)),issuedAtTime:dw(vw(a.iat)),expirationTime:dw(vw(a.exp)),signInProvider:s||null,signInSecondFactor:(null===u||void 0===u?void 0:u.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),pw.apply(this,arguments)}function vw(e){return 1e3*Number(e)}function mw(e){var t=E(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Pb("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ft(r);return a?JSON.parse(a):(Pb("Failed to decode base64 JWT payload"),null)}catch(o){return Pb("Caught error parsing JWT payload as JSON",o),null}}function yw(e,t){return gw.apply(this,arguments)}function gw(){return gw=f(o().mark((function e(t,n){var r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Qt&&kw(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),gw.apply(this,arguments)}function kw(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var bw=function(){function e(t){h(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return p(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(f(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ww=function(){function e(t,n){h(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return p(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=dw(this.lastLoginAt),this.creationTime=dw(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function xw(e){return _w.apply(this,arguments)}function _w(){return _w=f(o().mark((function e(t){var n,r,i,a,u,s,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,yw(t,fw(r,{idToken:i}));case 6:Ub(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),u=a.users[0],t._notifyReloadListener(u),s=(null===(n=u.providerUserInfo)||void 0===n?void 0:n.length)?Ew(u.providerUserInfo):[],c=Sw(t.providerData,s),l=t.isAnonymous,f=!(t.email&&u.passwordHash)&&!(null===c||void 0===c?void 0:c.length),h=!!l&&f,d={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:c,metadata:new ww(u.createdAt,u.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),_w.apply(this,arguments)}function Iw(){return(Iw=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sn(t),e.next=3,xw(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sw(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ge(n),ge(t))}function Ew(e){return e.map((function(e){var t=e.providerId,n=pb(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Tw(e,t){return Cw.apply(this,arguments)}function Cw(){return Cw=f(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ew(t,{},f(o().mark((function e(){var r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tn({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,u=i.apiKey,s=iw(t,a,"/v1/token","key=".concat(u)),e.next=5,t._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Qb.fetch()(s,{method:"POST",headers:c,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}var Nw=function(){function e(){h(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return p(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Ub(e.idToken,"internal-error"),Ub("undefined"!==typeof e.idToken,"internal-error"),Ub("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=mw(e);return Ub(t,"internal-error"),Ub("undefined"!==typeof t.exp,"internal-error"),Ub("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=f(o().mark((function e(t){var n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Ub(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=f(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tw(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,u=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(u));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Vb("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Ub("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Ub("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Ub("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Aw(e,t){Ub("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Dw=function(){function e(t){h(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=pb(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?ge(a.providerData):[],this.metadata=new ww(a.createdAt||void 0,a.lastLoginAt||void 0)}return p(e,[{key:"getIdToken",value:function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yw(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Ub(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return pw.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Iw.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Ub(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Ub(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=f(o().mark((function e(t){var n,r,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,xw(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=f(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,yw(this,uw(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Ub(k&&_,t,"internal-error");var I=Nw.fromJSON(this.name,_);Ub("string"===typeof k,t,"internal-error"),Aw(f,t.name),Aw(h,t.name),Ub("boolean"===typeof b,t,"internal-error"),Ub("boolean"===typeof w,t,"internal-error"),Aw(d,t.name),Aw(p,t.name),Aw(v,t.name),Aw(m,t.name),Aw(y,t.name),Aw(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(S.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=f(o().mark((function t(n,r){var i,a,u,s=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Nw).updateFromServerResponse(r),u=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,xw(u);case 6:return t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Pw=function(){function e(){h(this,e),this.type="NONE",this.storage={}}return p(e,[{key:"_isAvailable",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Pw.type="NONE";var Rw=Pw;function Ow(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Lw=function(){function e(t,n,r){h(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ow(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ow("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return p(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=f(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Dw._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=f(o().mark((function t(n,r){var i,a,u,s,c,l,h,d,p,v,m,y=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(zb(Rw),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),u=a[0]||zb(Rw),s=Ow(i,n.config.apiKey,n.name),c=null,l=Dt(r),t.prev=10,l.s();case 12:if((h=l.n()).done){t.next=29;break}return d=h.value,t.prev=14,t.next=17,d._get(s);case 17:if(!(p=t.sent)){t.next=23;break}return v=Dw._fromJSON(n,p),d!==u&&(c=v),u=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(m=a.filter((function(e){return e._shouldAllowMigration})),u._shouldAllowMigration&&m.length){t.next=40;break}return t.abrupt("return",new e(u,n,i));case 40:if(u=m[0],!c){t.next=44;break}return t.next=44,u._set(s,c.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===u){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(u,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Mw(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(jw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Fw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zw(t))return"Blackberry";if(qw(t))return"Webos";if(Uw(t))return"Safari";if((t.includes("chrome/")||Vw(t))&&!t.includes("edge/"))return"Chrome";if(Bw(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Fw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return/firefox\//i.test(e)}function Uw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Vw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return/crios\//i.test(e)}function jw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return/iemobile/i.test(e)}function Bw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return/android/i.test(e)}function zw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return/blackberry/i.test(e)}function qw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return/webos/i.test(e)}function Kw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return/iphone|ipad|ipod/i.test(e)}function Ww(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return Kw(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Gw(){return Gt()&&10===document.documentMode}function Hw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return Kw(e)||Bw(e)||qw(e)||zw(e)||/windows phone/i.test(e)||jw(e)}function Qw(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Mw(Bt());break;case"Worker":t="".concat(Mw(Bt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(nr,"/").concat(r)}var $w=function(){function e(t){h(this,e),this.auth=t,this.queue=[]}return p(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=f(o().mark((function e(t){var n,r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Dt(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),u=Dt(n);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(o){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Yw=function(){function e(t,n,r){h(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xw(this),this.idTokenSubscription=new Xw(this),this.beforeStateQueue=new $w(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ab,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return p(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=zb(t)),this._initializationPromise=this.queue(f(o().mark((function r(){var i,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Lw.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=f(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=f(o().mark((function e(t){var n,r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return u=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:c=e.sent,u&&u!==s||!(null===c||void 0===c?void 0:c.user)||(i=c.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Ub(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xw(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?sn(t):null)&&Ub(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=f(o().mark((function e(t){var n,r=this,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Ub(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(f(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(zb(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new $t("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=f(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Ub(n=t&&zb(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Lw.create(this,[zb(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=f(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=f(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ub(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Ub(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Qw(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=f(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Jw(e){return sn(e)}var Xw=function(){function e(t){var n=this;h(this,e),this.auth=t,this.observer=null,this.addObserver=an((function(e){return n.observer=e}))}return p(e,[{key:"next",get:function(){return Ub(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Zw(e,t,n){var r=Jw(e);Ub(r._canInitEmulator,r,"emulator-config-failed"),Ub(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=ex(t),o=function(e){var t=ex(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:tx(r.substr(a.length+1))}}var o=E(r.split(":"),2);return{host:o[0],port:tx(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ex(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function tx(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var nx=function(){function e(t,n){h(this,e),this.providerId=t,this.signInMethod=n}return p(e,[{key:"toJSON",value:function(){return Vb("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Vb("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Vb("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Vb("not implemented")}}]),e}();function rx(e,t){return ix.apply(this,arguments)}function ix(){return ix=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xb(t,"POST","/v1/accounts:resetPassword",Jb(t,n)));case 1:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}function ax(e,t){return ox.apply(this,arguments)}function ox(){return ox=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ox.apply(this,arguments)}function ux(e,t){return sx.apply(this,arguments)}function sx(){return sx=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xb(t,"POST","/v1/accounts:update",Jb(t,n)));case 1:case"end":return e.stop()}}),e)}))),sx.apply(this,arguments)}function cx(e,t){return lx.apply(this,arguments)}function lx(){return lx=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nw(t,"POST","/v1/accounts:signInWithPassword",Jb(t,n)));case 1:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}function fx(e,t){return hx.apply(this,arguments)}function hx(){return hx=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xb(t,"POST","/v1/accounts:sendOobCode",Jb(t,n)));case 1:case"end":return e.stop()}}),e)}))),hx.apply(this,arguments)}function dx(e,t){return px.apply(this,arguments)}function px(){return px=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fx(t,n));case 1:case"end":return e.stop()}}),e)}))),px.apply(this,arguments)}function vx(e,t){return mx.apply(this,arguments)}function mx(){return mx=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fx(t,n));case 1:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}function yx(e,t){return gx.apply(this,arguments)}function gx(){return gx=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fx(t,n));case 1:case"end":return e.stop()}}),e)}))),gx.apply(this,arguments)}function kx(e,t){return bx.apply(this,arguments)}function bx(){return bx=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fx(t,n));case 1:case"end":return e.stop()}}),e)}))),bx.apply(this,arguments)}function wx(e,t){return xx.apply(this,arguments)}function xx(){return xx=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nw(t,"POST","/v1/accounts:signInWithEmailLink",Jb(t,n)));case 1:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function _x(e,t){return Ix.apply(this,arguments)}function Ix(){return Ix=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nw(t,"POST","/v1/accounts:signInWithEmailLink",Jb(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ix.apply(this,arguments)}var Sx=function(e){m(n,e);var t=w(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return h(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return p(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",cx(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",wx(t,{email:this._email,oobCode:this._password}));case 5:Rb(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ax(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",_x(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Rb(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(nx);function Ex(e,t){return Tx.apply(this,arguments)}function Tx(){return Tx=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nw(t,"POST","/v1/accounts:signInWithIdp",Jb(t,n)));case 1:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}var Cx=function(e){m(n,e);var t=w(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return p(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ex(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ex(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ex(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tn(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rb("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=pb(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(nx);function Nx(e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xb(t,"POST","/v1/accounts:sendVerificationCode",Jb(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Dx(){return Dx=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nw(t,"POST","/v1/accounts:signInWithPhoneNumber",Jb(t,n)));case 1:case"end":return e.stop()}}),e)}))),Dx.apply(this,arguments)}function Px(){return Px=f(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nw(t,"POST","/v1/accounts:signInWithPhoneNumber",Jb(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ow(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Px.apply(this,arguments)}var Rx=u({},"USER_NOT_FOUND","user-not-found");function Ox(){return Ox=f(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",nw(t,"POST","/v1/accounts:signInWithPhoneNumber",Jb(t,r),Rx));case 2:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}var Lx=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this,"phone","phone")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Dx.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Px.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ox.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(nx);var Mx=function(){function e(t){var n,r,i,a,o,u;h(this,e);var s=nn(rn(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Ub(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return p(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=nn(rn(e)).link,n=t?nn(rn(t)).deep_link_id:null,r=nn(rn(e)).deep_link_id;return(r?nn(rn(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Ym){return null}}}]),e}();var Fx=function(){function e(){h(this,e),this.providerId=e.PROVIDER_ID}return p(e,null,[{key:"credential",value:function(e,t){return Sx._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Mx.parseLink(t);return Ub(n,"argument-error"),Sx._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Fx.PROVIDER_ID="password",Fx.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Fx.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Ux=function(){function e(t){h(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return p(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Vx=function(e){m(n,e);var t=w(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).scopes=[],e}return p(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ge(this.scopes)}}]),n}(Ux),jx=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.apply(this,arguments)}return p(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Ub(e.idToken||e.accessToken,"argument-error"),Cx._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Ub("providerId"in t&&"signInMethod"in t,"argument-error"),Cx._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Vx),Bx=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.call(this,"facebook.com")}return p(n,null,[{key:"credential",value:function(e){return Cx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Ym){return null}}}]),n}(Vx);Bx.FACEBOOK_SIGN_IN_METHOD="facebook.com",Bx.PROVIDER_ID="facebook.com";var zx=function(e){m(n,e);var t=w(n);function n(){var e;return h(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return p(n,null,[{key:"credential",value:function(e,t){return Cx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Ym){return null}}}]),n}(Vx);zx.GOOGLE_SIGN_IN_METHOD="google.com",zx.PROVIDER_ID="google.com";var qx=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.call(this,"github.com")}return p(n,null,[{key:"credential",value:function(e){return Cx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Ym){return null}}}]),n}(Vx);qx.GITHUB_SIGN_IN_METHOD="github.com",qx.PROVIDER_ID="github.com";var Kx=function(e){m(n,e);var t=w(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return p(n,[{key:"_getIdTokenResponse",value:function(e){return Ex(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ex(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ex(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(nx),Wx=function(e){m(n,e);var t=w(n);function n(e){return h(this,n),Ub(e.startsWith("saml."),"argument-error"),t.call(this,e)}return p(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Kx.fromJSON(e);return Ub(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Kx._create(r,n)}catch(i){return null}}}]),n}(Ux),Gx=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.call(this,"twitter.com")}return p(n,null,[{key:"credential",value:function(e,t){return Cx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Ym){return null}}}]),n}(Vx);function Hx(e,t){return Qx.apply(this,arguments)}function Qx(){return Qx=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nw(t,"POST","/v1/accounts:signUp",Jb(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qx.apply(this,arguments)}Gx.TWITTER_SIGN_IN_METHOD="twitter.com",Gx.PROVIDER_ID="twitter.com";var $x=function(){function e(t){h(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return p(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=f(o().mark((function t(n,r,i){var a,u,s,c,l=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,Dw._fromIdTokenResponse(n,i,a);case 3:return u=t.sent,s=Yx(i),c=new e({user:u,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=f(o().mark((function t(n,r,i){var a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Yx(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Yx(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Jx(){return Jx=f(o().mark((function e(t){var n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jw(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new $x({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Hx(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,$x._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Jx.apply(this,arguments)}var Xx=function(e){m(n,e);var t=w(n);function n(e,r,i,a){var o,u;return h(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(k(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return p(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Qt);function Zx(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Xx._fromErrorAndOperation(e,n,t,r);throw n}))}function e_(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function t_(e,t){return n_.apply(this,arguments)}function n_(){return n_=f(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sn(t),e.next=3,a_(!0,r,n);case 3:return e.t0=cw,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,u=e_(a||[]),r.providerData=r.providerData.filter((function(e){return u.has(e.providerId)})),u.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}function r_(e,t){return i_.apply(this,arguments)}function i_(){return i_=f(o().mark((function e(t,n){var r,i,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=yw,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",$x._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),i_.apply(this,arguments)}function a_(e,t,n){return o_.apply(this,arguments)}function o_(){return o_=f(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xw(n);case 2:i=e_(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Ub(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function u_(e,t){return s_.apply(this,arguments)}function s_(){return s_=f(o().mark((function e(t,n){var r,i,a,u,s,c,l=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,yw(t,Zx(i,a,n,t),r);case 6:return Ub((u=e.sent).idToken,i,"internal-error"),Ub(s=mw(u.idToken),i,"internal-error"),c=s.sub,Ub(t.uid===c,i,"user-mismatch"),e.abrupt("return",$x._forOperation(t,a,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Rb(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),s_.apply(this,arguments)}function c_(e,t){return l_.apply(this,arguments)}function l_(){return l_=f(o().mark((function e(t,n){var r,i,a,u,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Zx(t,i,n);case 4:return a=e.sent,e.next=7,$x._fromIdTokenResponse(t,i,a);case 7:if(u=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(u.user);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(e,t){return h_.apply(this,arguments)}function h_(){return h_=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c_(Jw(t),n));case 1:case"end":return e.stop()}}),e)}))),h_.apply(this,arguments)}function d_(e,t){return p_.apply(this,arguments)}function p_(){return(p_=f(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sn(t),e.next=3,a_(!1,r,n.providerId);case 3:return e.abrupt("return",r_(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v_(e,t){return m_.apply(this,arguments)}function m_(){return(m_=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u_(sn(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y_(e,t){return g_.apply(this,arguments)}function g_(){return g_=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nw(t,"POST","/v1/accounts:signInWithCustomToken",Jb(t,n)));case 1:case"end":return e.stop()}}),e)}))),g_.apply(this,arguments)}function k_(){return k_=f(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jw(t),e.next=3,y_(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,$x._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}var b_=function(){function e(t,n){h(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return p(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?w_._fromServerResponse(e,t):Rb(e,"internal-error")}}]),e}(),w_=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return p(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(b_);function x_(e,t,n){var r;Ub((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ub("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ub(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ub(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function __(){return __=f(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sn(t),a={requestType:"PASSWORD_RESET",email:n},r&&x_(i,a,r),e.next=5,vx(i,a);case 5:case"end":return e.stop()}}),e)}))),__.apply(this,arguments)}function I_(){return I_=f(o().mark((function e(t,n,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rx(sn(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}function S_(){return S_=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ux(sn(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),S_.apply(this,arguments)}function E_(e,t){return T_.apply(this,arguments)}function T_(){return T_=f(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sn(t),e.next=3,rx(r,{oobCode:n});case 3:i=e.sent,Ub(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Ub(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Ub(i.mfaInfo,r,"internal-error");case 13:Ub(i.email,r,"internal-error");case 14:return u=null,i.mfaInfo&&(u=b_._fromServerResponse(Jw(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:u},operation:a});case 17:case"end":return e.stop()}}),e)}))),T_.apply(this,arguments)}function C_(){return C_=f(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E_(sn(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),C_.apply(this,arguments)}function N_(e,t,n){return A_.apply(this,arguments)}function A_(){return A_=f(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jw(t),e.next=3,Hx(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,$x._fromIdTokenResponse(i,"signIn",a);case 6:return u=e.sent,e.next=9,i._updateCurrentUser(u.user);case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function D_(){return D_=f(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sn(t),a={requestType:"EMAIL_SIGNIN",email:n},Ub(r.handleCodeInApp,i,"argument-error"),r&&x_(i,a,r),e.next=6,yx(i,a);case 6:case"end":return e.stop()}}),e)}))),D_.apply(this,arguments)}function P_(){return P_=f(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sn(t),Ub((a=Fx.credentialWithLink(n,r||qb()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",f_(i,a));case 4:case"end":return e.stop()}}),e)}))),P_.apply(this,arguments)}function R_(e,t){return O_.apply(this,arguments)}function O_(){return O_=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xb(t,"POST","/v1/accounts:createAuthUri",Jb(t,n)));case 1:case"end":return e.stop()}}),e)}))),O_.apply(this,arguments)}function L_(){return L_=f(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kb()?qb():"http://localhost",i={identifier:n,continueUri:r},e.next=4,R_(sn(t),i);case 4:return a=e.sent,u=a.signinMethods,e.abrupt("return",u||[]);case 7:case"end":return e.stop()}}),e)}))),L_.apply(this,arguments)}function M_(){return(M_=f(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=sn(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&x_(r.auth,a,n),e.next=8,dx(r.auth,a);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F_(){return(F_=f(o().mark((function e(t,n,r){var i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sn(t),e.next=3,t.getIdToken();case 3:return a=e.sent,u={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&x_(i.auth,u,r),e.next=8,kx(i.auth,u);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U_(e,t){return V_.apply(this,arguments)}function V_(){return V_=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function j_(){return(j_=f(o().mark((function e(t,n){var r,i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=sn(t),e.next=6,a.getIdToken();case 6:return u=e.sent,s={idToken:u,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,yw(a,U_(a.auth,s));case 10:return c=e.sent,a.displayName=c.displayName||null,a.photoURL=c.photoUrl||null,(l=a.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=a.displayName,l.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(c);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B_(e,t,n){return z_.apply(this,arguments)}function z_(){return z_=f(o().mark((function e(t,n,r){var i,a,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,u={idToken:a,returnSecureToken:!0},n&&(u.email=n),r&&(u.password=r),e.next=9,yw(t,ax(i,u));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}var q_=p((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};h(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),K_=function(e){m(n,e);var t=w(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this,e,r,i)).username=a,o}return p(n)}(q_),W_=function(e){m(n,e);var t=w(n);function n(e,r){return h(this,n),t.call(this,e,"facebook.com",r)}return p(n)}(q_),G_=function(e){m(n,e);var t=w(n);function n(e,r){return h(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return p(n)}(K_),H_=function(e){m(n,e);var t=w(n);function n(e,r){return h(this,n),t.call(this,e,"google.com",r)}return p(n)}(q_),Q_=function(e){m(n,e);var t=w(n);function n(e,r,i){return h(this,n),t.call(this,e,"twitter.com",r,i)}return p(n)}(K_);function $_(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=mw(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new q_(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new W_(a,i);case"github.com":return new G_(a,i);case"google.com":return new H_(a,i);case"twitter.com":return new Q_(a,i,e.screenName||null);case"custom":case"anonymous":return new q_(a,null);default:return new q_(a,r,i)}}(n)}var Y_=function(){function e(t,n){h(this,e),this.type=t,this.credential=n}return p(e,[{key:"toJSON",value:function(){return{multiFactorSession:u({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),J_=function(){function e(t,n,r){h(this,e),this.session=t,this.hints=n,this.signInResolver=r}return p(e,[{key:"resolveSignIn",value:function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Jw(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return b_._fromServerResponse(r,e)}));Ub(i.mfaPendingCredential,r,"internal-error");var u=Y_._fromMfaPendingCredential(i.mfaPendingCredential);return new e(u,a,function(){var e=f(o().mark((function e(t){var a,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,u);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,$x._fromIdTokenResponse(r,n.operationType,s);case 11:return c=e.sent,e.next=14,r._updateCurrentUser(c.user);case 14:return e.abrupt("return",c);case 15:return Ub(n.user,r,"internal-error"),e.abrupt("return",$x._forOperation(n.user,n.operationType,s));case 17:Rb(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function X_(e,t){return Xb(e,"POST","/v2/accounts/mfaEnrollment:start",Jb(e,t))}function Z_(e,t){return Xb(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Jb(e,t))}var eI=function(){function e(t){var n=this;h(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return b_._fromServerResponse(t.auth,e)})))}))}return p(e,[{key:"getSession",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Y_,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=f(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,yw(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=f(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,yw(this.user,Z_(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),tI=new WeakMap;var nI="__sak",rI=function(){function e(t,n){h(this,e),this.storageRetriever=t,this.type=n}return p(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(nI,"1"),this.storage.removeItem(nI),Promise.resolve(!0)):Promise.resolve(!1)}catch(Ym){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var iI=function(e){m(n,e);var t=w(n);function n(){var e;return h(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Bt();return Uw(e)||Kw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Hw(),e._shouldAllowMigration=!0,e}return p(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Gw()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=f(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(y(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=f(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(y(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(y(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(rI);iI.type="LOCAL";var aI=iI,oI=function(e){m(n,e);var t=w(n);function n(){return h(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return p(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(rI);oI.type="SESSION";var uI=oI;function sI(e){return Promise.all(e.map(function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var cI=function(){function e(t){h(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return p(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=f(o().mark((function e(t){var n,r,i,a,u,s,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,u=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),c=Array.from(s).map(function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,u));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,sI(c);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function lI(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}cI.receivers=[];var fI=function(){function e(t){h(this,e),this.target=t,this.handlers=new Set}return p(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=f(o().mark((function e(t,n){var r,i,a,u,s=this,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,o){var c=lI("",20);i.port1.start();var l=setTimeout((function(){o(new Error("unsupported_event"))}),r);u={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),o(new Error("invalid_response"))}}},s.handlers.add(u),i.port1.addEventListener("message",u.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){u&&s.removeMessageHandler(u)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function hI(){return window}function dI(){return"undefined"!==typeof hI().WorkerGlobalScope&&"function"===typeof hI().importScripts}function pI(){return vI.apply(this,arguments)}function vI(){return(vI=f(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function mI(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var yI="firebaseLocalStorageDb",gI="firebaseLocalStorage",kI="fbase_key",bI=function(){function e(t){h(this,e),this.request=t}return p(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function wI(e,t){return e.transaction([gI],t?"readwrite":"readonly").objectStore(gI)}function xI(){var e=indexedDB.deleteDatabase(yI);return new bI(e).toPromise()}function _I(){var e=indexedDB.open(yI,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(gI,{keyPath:kI})}catch(r){n(r)}})),e.addEventListener("success",f(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(gI)){n.next=12;break}return r.close(),n.next=5,xI();case 5:return n.t0=t,n.next=8,_I();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function II(e,t,n){return SI.apply(this,arguments)}function SI(){return SI=f(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wI(t,!0).put((u(i={},kI,n),u(i,"value",r),i)),e.abrupt("return",new bI(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),SI.apply(this,arguments)}function EI(e,t){return TI.apply(this,arguments)}function TI(){return TI=f(o().mark((function e(t,n){var r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wI(t,!1).get(n),e.next=3,new bI(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),TI.apply(this,arguments)}function CI(e,t){var n=wI(e,!0).delete(t);return new bI(n).toPromise()}var NI=function(){function e(){h(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return p(e,[{key:"_openDb",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,_I();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=f(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dI()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=f(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=cI._getInstance(dI()?self:null),this.receiver._subscribe("keyChanged",function(){var e=f(o().mark((function e(n,r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=f(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pI();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new fI(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&mI()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=f(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,_I();case 5:return t=e.sent,e.next=8,II(t,nI,"1");case 8:return e.next=10,CI(t,nI);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=f(o().mark((function e(t,n){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return II(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return EI(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=f(o().mark((function e(t){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return CI(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=f(o().mark((function e(){var t,n,r,i,a,u,s,c,l,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=wI(e,!1).getAll();return new bI(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Dt(t);try{for(i.s();!(a=i.n()).done;)u=a.value,s=u.fbase_key,c=u.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(c)&&(this.notifyListeners(s,c),n.push(s))}catch(o){i.e(o)}finally{i.f()}for(l=0,f=Object.keys(this.localCache);l<f.length;l++)h=f[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(f(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();NI.type="LOCAL";var AI=NI;function DI(e,t){return Xb(e,"POST","/v2/accounts/mfaSignIn:start",Jb(e,t))}function PI(e){return RI.apply(this,arguments)}function RI(){return RI=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xb(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),RI.apply(this,arguments)}function OI(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Ob("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function LI(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var MI=1e12,FI=function(){function e(t){h(this,e),this.auth=t,this.counter=MI,this._widgets=new Map}return p(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new UI(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||MI;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||MI;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=f(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||MI,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),UI=function(){function e(t,n,r){var i=this;h(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Ub(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return p(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var VI=LI("rcb"),jI=new Gb(3e4,6e4),BI="https://www.google.com/recaptcha/api.js?",zI=function(){function e(){h(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!hI().grecaptcha}return p(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ub(qI(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(hI().grecaptcha):new Promise((function(r,i){var a=hI().setTimeout((function(){i(Ob(e,"network-request-failed"))}),jI.get());hI()[VI]=function(){hI().clearTimeout(a),delete hI()[VI];var o=hI().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Ob(e,"internal-error"))},OI("".concat(BI,"?").concat(tn({onload:VI,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Ob(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!hI().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function qI(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var KI=function(){function e(){h(this,e)}return p(e,[{key:"load",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new FI(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),WI="recaptcha",GI={theme:"light",type:"image"},HI=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},GI),r=arguments.length>2?arguments[2]:void 0;h(this,e),this.parameters=n,this.type=WI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jw(r),this.isInvisible="invisible"===this.parameters.size,Ub("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Ub(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new KI:new zI,this.validateStartingState()}return p(e,[{key:"verify",value:function(){var e=f(o().mark((function e(){var t,n,r,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Ub(!this.parameters.sitekey,this.auth,"argument-error"),Ub(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ub("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=hI()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Ub(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=f(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=f(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ub(Kb()&&!dI(),this.auth,"internal-error"),e.next=3,QI();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,PI(this.auth);case 8:Ub(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Ub(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function QI(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var $I=function(){function e(t,n){h(this,e),this.verificationId=t,this.onConfirmation=n}return p(e,[{key:"confirm",value:function(e){var t=Lx._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function YI(){return YI=f(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jw(t),e.next=3,eS(i,n,sn(r));case 3:return a=e.sent,e.abrupt("return",new $I(a,(function(e){return f_(i,e)})));case 5:case"end":return e.stop()}}),e)}))),YI.apply(this,arguments)}function JI(e,t,n){return XI.apply(this,arguments)}function XI(){return(XI=f(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sn(t),e.next=3,a_(!1,i,"phone");case 3:return e.next=5,eS(i.auth,n,sn(r));case 5:return a=e.sent,e.abrupt("return",new $I(a,(function(e){return d_(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZI(){return(ZI=f(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sn(t),e.next=3,eS(i.auth,n,sn(r));case 3:return a=e.sent,e.abrupt("return",new $I(a,(function(e){return v_(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eS(e,t,n){return tS.apply(this,arguments)}function tS(){return tS=f(o().mark((function e(t,n,r){var i,a,u,s,c,l,f,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Ub("string"===typeof a,t,"argument-error"),Ub(r.type===WI,t,"argument-error"),!("session"in(u="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=u.session,!("phoneNumber"in u)){e.next=17;break}return Ub("enroll"===s.type,t,"internal-error"),e.next=13,X_(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:u.phoneNumber,recaptchaToken:a}});case 13:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 17:return Ub("signin"===s.type,t,"internal-error"),Ub(l=(null===(i=u.multiFactorHint)||void 0===i?void 0:i.uid)||u.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,DI(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return f=e.sent,e.abrupt("return",f.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Nx(t,{phoneNumber:u.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,d=h.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),tS.apply(this,arguments)}function nS(){return(nS=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r_(sn(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rS=function(){function e(t){h(this,e),this.providerId=e.PROVIDER_ID,this.auth=Jw(t)}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return eS(this.auth,e,sn(t))}}],[{key:"credential",value:function(e,t){return Lx._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Lx._fromTokenResponse(n,r):null}}]),e}();function iS(e,t){return t?zb(t):(Ub(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rS.PROVIDER_ID="phone",rS.PHONE_SIGN_IN_METHOD="phone";var aS=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this,"custom","custom")).params=e,r}return p(n,[{key:"_getIdTokenResponse",value:function(e){return Ex(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ex(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ex(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(nx);function oS(e){return c_(e.auth,new aS(e),e.bypassAuthState)}function uS(e){var t=e.auth,n=e.user;return Ub(n,t,"internal-error"),u_(n,new aS(e),e.bypassAuthState)}function sS(e){return cS.apply(this,arguments)}function cS(){return cS=f(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Ub(r=t.user,n,"internal-error"),e.abrupt("return",r_(r,new aS(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),cS.apply(this,arguments)}var lS=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];h(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return p(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=f(o().mark((function t(n,r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=f(o().mark((function e(t){var n,r,i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,u=t.error,s=t.type,!u){e.next=4;break}return this.reject(u),e.abrupt("return");case 4:return c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(c);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oS;case"linkViaPopup":case"linkViaRedirect":return sS;case"reauthViaPopup":case"reauthViaRedirect":return uS;default:Rb(this.auth,"internal-error")}}},{key:"resolve",value:function(e){jb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){jb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),fS=new Gb(2e3,1e4);function hS(e,t,n){return dS.apply(this,arguments)}function dS(){return dS=f(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jw(t),Mb(t,n,Ux),a=iS(i,r),u=new yS(i,"signInViaPopup",n,a),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),dS.apply(this,arguments)}function pS(){return pS=f(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mb((i=sn(t)).auth,n,Ux),a=iS(i.auth,r),u=new yS(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),pS.apply(this,arguments)}function vS(e,t,n){return mS.apply(this,arguments)}function mS(){return mS=f(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mb((i=sn(t)).auth,n,Ux),a=iS(i.auth,r),u=new yS(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),mS.apply(this,arguments)}var yS=function(e){m(n,e);var t=w(n);function n(e,r,i,a,o){var u;return h(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=k(u),u}return p(n,[{key:"executeNotNull",value:function(){var e=f(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Ub(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=f(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jb(1===this.filter.length,"Popup operations only handle one event"),t=lI(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Ob(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Ob(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Ob(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,fS.get())}()}}]),n}(lS);yS.currentPopupAction=null;var gS=new Map,kS=function(e){m(n,e);var t=w(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return h(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return p(n,[{key:"execute",value:function(){var e=f(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=gS.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,bS(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Or(y(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:gS.set(this.auth._key(),t);case 21:return this.bypassAuthState||gS.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=f(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Or(y(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Or(y(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(lS);function bS(e,t){return wS.apply(this,arguments)}function wS(){return wS=f(o().mark((function e(t,n){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ES(n),i=SS(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),wS.apply(this,arguments)}function xS(e,t){return _S.apply(this,arguments)}function _S(){return _S=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",SS(t)._set(ES(n),"true"));case 1:case"end":return e.stop()}}),e)}))),_S.apply(this,arguments)}function IS(e,t){gS.set(e._key(),t)}function SS(e){return zb(e._redirectPersistence)}function ES(e){return Ow("pendingRedirect",e.config.apiKey,e.name)}function TS(e,t,n){return function(e,t,n){return CS.apply(this,arguments)}(e,t,n)}function CS(){return CS=f(o().mark((function e(t,n,r){var i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jw(t),Mb(t,n,Ux),a=iS(i,r),e.next=5,xS(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),CS.apply(this,arguments)}function NS(e,t,n){return function(e,t,n){return AS.apply(this,arguments)}(e,t,n)}function AS(){return AS=f(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mb((i=sn(t)).auth,n,Ux),a=iS(i.auth,r),e.next=5,xS(a,i.auth);case 5:return e.next=7,FS(i);case 7:return u=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",u));case 9:case"end":return e.stop()}}),e)}))),AS.apply(this,arguments)}function DS(e,t,n){return function(e,t,n){return PS.apply(this,arguments)}(e,t,n)}function PS(){return PS=f(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mb((i=sn(t)).auth,n,Ux),a=iS(i.auth,r),e.next=5,a_(!1,i,n.providerId);case 5:return e.next=7,xS(a,i.auth);case 7:return e.next=9,FS(i);case 9:return u=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",u));case 11:case"end":return e.stop()}}),e)}))),PS.apply(this,arguments)}function RS(e,t){return OS.apply(this,arguments)}function OS(){return OS=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jw(t)._initializationPromise;case 2:return e.abrupt("return",LS(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),OS.apply(this,arguments)}function LS(e,t){return MS.apply(this,arguments)}function MS(){return MS=f(o().mark((function e(t,n){var r,i,a,u,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=Jw(t),a=iS(i,n),u=new kS(i,a,r),e.next=6,u.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),MS.apply(this,arguments)}function FS(e){return US.apply(this,arguments)}function US(){return(US=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=lI("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var VS=function(){function e(t){h(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return p(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BS(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!BS(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ob(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jS(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(jS(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function jS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function BS(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function zS(e){return qS.apply(this,arguments)}function qS(){return qS=f(o().mark((function e(t){var n,r=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Xb(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),qS.apply(this,arguments)}var KS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WS=/^https?/;function GS(){return GS=f(o().mark((function e(t){var n,r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,zS(t);case 4:n=e.sent,r=n.authorizedDomains,i=Dt(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(u=a.value,e.prev=11,!HS(u)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Rb(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),GS.apply(this,arguments)}function HS(e){var t=qb(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!WS.test(r))return!1;if(KS.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var QS=new Gb(3e4,6e4);function $S(){var e=hI().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ge(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var YS=null;function JS(e){return YS=YS||function(e){return new Promise((function(t,n){var r,i,a;function o(){$S(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){$S(),n(Ob(e,"network-request-failed"))},timeout:QS.get()})}if(null===(i=null===(r=hI().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=hI().gapi)||void 0===a?void 0:a.load)){var u=LI("iframefcb");return hI()[u]=function(){gapi.load?o():n(Ob(e,"network-request-failed"))},OI("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw YS=null,e}))}(e),YS}var XS=new Gb(5e3,15e3),ZS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tE(e){var t=e.config;Ub(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Hb(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:nr},i=eE.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(tn(r).slice(1))}function nE(e){return rE.apply(this,arguments)}function rE(){return rE=f(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JS(t);case 2:return n=e.sent,Ub(r=hI().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:tE(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZS,dontclear:!0},(function(e){return new Promise(function(){var n=f(o().mark((function n(r,i){var a,u,s;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){hI().clearTimeout(u),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Ob(t,"network-request-failed"),u=hI().setTimeout((function(){i(a)}),XS.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}var iE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aE="_blank",oE="http://localhost",uE=function(){function e(t){h(this,e),this.window=t,this.associatedEvent=null}return p(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function sE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},iE),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Bt().toLowerCase();n&&(u=Vw(c)?aE:n),Fw(c)&&(t=t||oE,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=E(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Ww(c)&&"_self"!==u)return cE(t||"",u),new uE(null);var f=window.open(t||"",u,l);Ub(f,e,"popup-blocked");try{f.focus()}catch(h){}return new uE(f)}function cE(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var lE="__/auth/handler",fE="emulator/auth/handler";function hE(e,t,n,r,i,a){Ub(e.config.authDomain,e,"auth-domain-config-required"),Ub(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:nr,eventId:i};if(t instanceof Ux){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=E(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Vx){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var m=v[p];void 0===d[m]&&delete d[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(lE);return Hb(t,fE)}(e),"?").concat(tn(d).slice(1))}var dE="webStorageSupport",pE=function(){function e(){h(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uI,this._completeRedirectFn=LS,this._overrideRedirectResult=IS}return p(e,[{key:"_openPopup",value:function(){var e=f(o().mark((function e(t,n,r,i){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jb(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),u=hE(t,n,r,qb(),i),e.abrupt("return",sE(t,u,lI()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=f(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=hE(t,n,r,qb(),i),hI().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(jb(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=f(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nE(t);case 2:return n=e.sent,r=new VS(t),n.register("authEvent",(function(e){return Ub(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(dE,{type:dE},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Rb(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return GS.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Hw()||Uw()||Kw()}}]),e}(),vE=pE,mE=function(){function e(t){h(this,e),this.factorId=t}return p(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Vb("unexpected MultiFactorSessionType")}}}]),e}(),yE=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this,"phone")).credential=e,r}return p(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Xb(e,"POST","/v2/accounts/mfaEnrollment:finalize",Jb(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Xb(e,"POST","/v2/accounts/mfaSignIn:finalize",Jb(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(mE),gE=function(){function e(){h(this,e)}return p(e,null,[{key:"assertion",value:function(e){return yE._fromCredential(e)}}]),e}();gE.FACTOR_ID="phone";var kE,bE="@firebase/auth",wE="0.20.2",xE=function(){function e(t){h(this,e),this.auth=t,this.internalListeners=new Map}return p(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Ub(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function _E(){return window}kE="Browser",$n(new cn("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Ub(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Ub(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:kE,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qw(kE)},i=new Yw(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zb);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),$n(new cn("auth-internal",(function(e){return function(e){return new xE(e)}(Jw(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),sr(bE,wE,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(kE)),sr(bE,wE,"esm2017");function IE(e,t,n){return SE.apply(this,arguments)}function SE(){return SE=f(o().mark((function e(t,n,r){var i,a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_E(),u=a.BuildInfo,jb(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,DE(n.sessionId);case 4:return s=e.sent,c={},Kw()?c.ibi=u.packageName:Bw()?c.apn=u.packageName:Rb(t,"operation-not-supported-in-this-environment"),u.displayName&&(c.appDisplayName=u.displayName),c.sessionId=s,e.abrupt("return",hE(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,c));case 10:case"end":return e.stop()}}),e)}))),SE.apply(this,arguments)}function EE(){return EE=f(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_E(),r=n.BuildInfo,i={},Kw()?i.iosBundleId=r.packageName:Bw()?i.androidPackageName=r.packageName:Rb(t,"operation-not-supported-in-this-environment"),e.next=5,zS(t,i);case 5:case"end":return e.stop()}}),e)}))),EE.apply(this,arguments)}function TE(e){var t=_E().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function CE(e,t,n){return NE.apply(this,arguments)}function NE(){return NE=f(o().mark((function e(t,n,r){var i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_E(),a=i.cordova,u=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var o=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){o||(o=window.setTimeout((function(){i(Ob(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Bw()&&document.addEventListener("visibilitychange",l,!1),u=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),o&&window.clearTimeout(o)}}));case 5:return e.prev=5,u(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),NE.apply(this,arguments)}function AE(e){var t,n,r,i,a,o,u,s,c,l,f=_E();Ub("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ub("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ub("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ub("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ub("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function DE(e){return PE.apply(this,arguments)}function PE(){return(PE=f(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=RE(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RE(e){if(jb(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var OE=function(e){m(n,e);var t=w(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return p(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Or(y(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(VS);function LE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:jE(),postBody:null,tenantId:e.tenantId,error:Ob(e,"no-auth-event")}}function ME(e,t){return BE()._set(zE(e),t)}function FE(e){return UE.apply(this,arguments)}function UE(){return UE=f(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BE()._get(zE(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,BE()._remove(zE(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),UE.apply(this,arguments)}function VE(e,t){var n,r,i=function(e){var t=qE(e),n=t.link?decodeURIComponent(t.link):void 0,r=qE(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return qE(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=qE(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Ob(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function jE(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function BE(){return zb(aI)}function zE(e){return Ow("authEvent",e.config.apiKey,e.name)}function qE(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=x(t=n)||ye(t)||I(t)||S();r[0];return nn(r.slice(1).join("?"))}var KE=function(){function e(){h(this,e),this._redirectPersistence=uI,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=LS,this._overrideRedirectResult=IS}return p(e,[{key:"_initialize",value:function(){var e=f(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new OE(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Rb(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=f(o().mark((function e(t,n,r,i){var a,u,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return AE(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),gS.clear(),e.next=10,this._originValidation(t);case 10:return u=LE(t,r,i),e.next=13,ME(t,u);case 13:return e.next=15,IE(t,u,n);case 15:return s=e.sent,e.next=18,TE(s);case 18:return c=e.sent,e.abrupt("return",CE(t,a,c));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return EE.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=_E(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,u=setTimeout(f(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,FE(e);case 2:t.onEvent(GE());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=f(o().mark((function n(r){var i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(u),n.next=3,FE(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=VE(i,r.url)),t.onEvent(a||GE());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var c=i,l="".concat(a.packageName.toLowerCase(),"://");_E().handleOpenURL=function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(l)&&s({url:t}),"function"===typeof c)try{c(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),WE=KE;function GE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ob("no-auth-event")}}function HE(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function QE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return!("file:"!==HE()&&"ionic:"!==HE()&&"capacitor:"!==HE()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function $E(){return Gt()&&11===(null===document||void 0===document?void 0:document.documentMode)}function YE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return/Edge\/\d+/.test(e)}function JE(){try{var e=self.localStorage,t=lI();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt();return $E()||YE(e)}()||Ht()}catch(n){return XE()&&Ht()}return!1}function XE(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ZE(){return("http:"===HE()||"https:"===HE()||Kt()||QE())&&!(Wt()||qt())&&JE()&&!XE()}function eT(){return QE()&&"undefined"!==typeof document}function tT(){return nT.apply(this,arguments)}function nT(){return(nT=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(eT()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rT={LOCAL:"local",NONE:"none",SESSION:"session"},iT=Ub,aT="persistence";function oT(e,t){iT(Object.values(rT).includes(t),e,"invalid-persistence-type"),Wt()?iT(t!==rT.SESSION,e,"unsupported-persistence-type"):qt()?iT(t===rT.NONE,e,"unsupported-persistence-type"):XE()?iT(t===rT.NONE||t===rT.LOCAL&&Ht(),e,"unsupported-persistence-type"):iT(t===rT.NONE||JE(),e,"unsupported-persistence-type")}function uT(e){return sT.apply(this,arguments)}function sT(){return sT=f(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=cT(),r=Ow(aT,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),sT.apply(this,arguments)}function cT(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var lT=Ub,fT=function(){function e(){h(this,e),this.browserResolver=zb(vE),this.cordovaResolver=zb(WE),this.underlyingResolver=null,this._redirectPersistence=uI,this._completeRedirectFn=LS,this._overrideRedirectResult=IS}return p(e,[{key:"_initialize",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=f(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=f(o().mark((function e(t,n,r,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return eT()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return lT(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=f(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,tT();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function hT(e){return e.unwrap()}function dT(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new gT(e,function(e,t){var n,r=sn(e),i=t;return Ub(t.customData.operationType,r,"argument-error"),Ub(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),J_._fromError(r,i)}(e,t));else if(r){var i=pT(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function pT(e){var t=(e instanceof Qt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Qt)&&"temporaryProof"in t&&"phoneNumber"in t)return rS.credentialFromResult(e);var n,r=t.providerId;if(!r||r===kb)return null;switch(r){case gb:n=zx;break;case mb:n=Bx;break;case yb:n=qx;break;case bb:n=Gx;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Kx._create(r,u):Cx._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new jx(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Qt?n.credentialFromError(e):n.credentialFromResult(e)}function vT(e,t){return t.catch((function(t){throw t instanceof Qt&&dT(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,pT(t)),additionalUserInfo:$_(e),user:kT.getOrCreate(r)}}))}function mT(e,t){return yT.apply(this,arguments)}function yT(){return yT=f(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return vT(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),yT.apply(this,arguments)}var gT=function(){function e(t,n){h(this,e),this.resolver=n,this.auth=t.wrapped()}return p(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return vT(hT(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),kT=function(){function e(t){h(this,e),this._delegate=t,this.multiFactor=function(e){var t=sn(e);return tI.has(t)||tI.set(t,eI._fromUser(t)),tI.get(t)}(t)}return p(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vT(this.auth,d_(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mT(this.auth,JI(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vT(this.auth,vS(this._delegate,t,fT)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uT(Jw(this.auth));case 2:return e.abrupt("return",DS(this._delegate,t,fT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vT(this.auth,v_(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return mT(this.auth,function(e,t,n){return ZI.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return vT(this.auth,function(e,t,n){return pS.apply(this,arguments)}(this._delegate,e,fT))}},{key:"reauthenticateWithRedirect",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uT(Jw(this.auth));case 2:return e.abrupt("return",NS(this._delegate,t,fT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return M_.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t_(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return B_(sn(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return B_(sn(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return nS.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return j_.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return F_.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();kT.USER_MAP=new WeakMap;var bT=Ub,wT=function(){function e(t,n){if(h(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;bT(r,"invalid-api-key",{appName:t.name}),bT(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?fT:void 0;this._delegate=n.initialize({options:{persistence:_T(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Cb),this.linkUnderlyingAuth()}return p(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?kT.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Zw(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return S_.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return E_(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return I_.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=f(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vT(this._delegate,N_(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return L_.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Mx.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=f(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bT(ZE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,RS(this._delegate,fT);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",vT(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Jw(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=xT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=xT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return D_.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return __.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=f(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oT(this._delegate,t),e.t0=t,e.next=e.t0===rT.SESSION?4:e.t0===rT.LOCAL?6:e.t0===rT.NONE?11:13;break;case 4:return n=uI,e.abrupt("break",14);case 6:return e.next=8,zb(AI)._isAvailable();case 8:return r=e.sent,n=r?AI:aI,e.abrupt("break",14);case 11:return n=Rw,e.abrupt("break",14);case 13:return e.abrupt("return",Rb("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return vT(this._delegate,function(e){return Jx.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return vT(this._delegate,f_(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return vT(this._delegate,function(e,t){return k_.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return vT(this._delegate,function(e,t,n){return f_(sn(e),Fx.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return vT(this._delegate,function(e,t,n){return P_.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return mT(this._delegate,function(e,t,n){return YI.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bT(ZE(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",vT(this._delegate,hS(this._delegate,t,fT)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=f(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bT(ZE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,uT(this._delegate);case 3:return e.abrupt("return",TS(this._delegate,t,fT));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return C_.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function xT(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&kT.getOrCreate(e))},error:t,complete:n}}function _T(e,t){var n=function(e,t){var n=cT();if(!n)return[];var r=Ow(aT,e,t);switch(n.getItem(r)){case rT.NONE:return[Rw];case rT.LOCAL:return[AI,uI];case rT.SESSION:return[uI];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(AI)||n.push(AI),"undefined"!==typeof window)for(var r=0,i=[aI,uI];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Rw)||n.push(Rw),n}wT.Persistence=rT;var IT=function(){function e(){h(this,e),this.providerId="phone",this._delegate=new rS(hT(Pr.auth()))}return p(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return rS.credential(e,t)}}]),e}();IT.PHONE_SIGN_IN_METHOD=rS.PHONE_SIGN_IN_METHOD,IT.PROVIDER_ID=rS.PROVIDER_ID;var ST=Ub,ET=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pr.app();h(this,e),ST(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new HI(t,n,i.auth()),this.type=this._delegate.type}return p(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new cn("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new wT(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:wb,PASSWORD_RESET:xb,RECOVER_EMAIL:_b,REVERT_SECOND_FACTOR_ADDITION:Ib,VERIFY_AND_CHANGE_EMAIL:Sb,VERIFY_EMAIL:Eb}},EmailAuthProvider:Fx,FacebookAuthProvider:Bx,GithubAuthProvider:qx,GoogleAuthProvider:zx,OAuthProvider:jx,SAMLAuthProvider:Wx,PhoneAuthProvider:IT,PhoneMultiFactorGenerator:gE,RecaptchaVerifier:ET,TwitterAuthProvider:Gx,Auth:wT,AuthCredential:nx,Error:Qt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.15")}(Pr);var TT=function(){var e=f(o().mark((function e(t,n){var r,i,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=NT.doc("users/".concat(t.uid)),e.next=5,r.get();case 5:if(e.sent.exists){e.next=17;break}return i=t.displayName,a=t.email,u=new Date,e.prev=9,e.next=12,r.set(c({displayName:i,email:a,createdAt:u},n));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("error creating user",e.t0.message);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n){return e.apply(this,arguments)}}();Pr.initializeApp({apiKey:"AIzaSyCEoHldROC2dnvlbW9ob0_XhFGppRHFdsI",authDomain:"crwn-db-aca89.firebaseapp.com",projectId:"crwn-db-aca89",storageBucket:"crwn-db-aca89.appspot.com",messagingSenderId:"596130280558",appId:"1:596130280558:web:afe4111257b4cc84faa27f",measurementId:"G-YWL1BK48F1"});var CT=Pr.auth(),NT=Pr.firestore(),AT=new Pr.auth.GoogleAuthProvider;AT.setCustomParameters({prompt:"select_account"});var DT=function(){return CT.signInWithPopup(AT)};function PT(e,t){if(null==e)return{};var n,r,i=ke(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var RT=["children","isGoogleSignIn","inverted"],OT=function(e){var t=e.children,n=e.isGoogleSignIn,r=e.inverted,i=PT(e,RT);return(0,Nt.jsx)("button",c(c({className:"".concat(n?"google-sign-in":"","\n            ").concat(r?"inverted":"","\n            custom-button")},i),{},{children:t}))},LT=function(){return(0,Nt.jsxs)("div",{className:"cart-dropdown",children:[(0,Nt.jsx)("div",{className:"cart-items"}),(0,Nt.jsx)(OT,{children:"GO TO CHECKOUT"})]})},MT=Ge((function(e){return{currentUser:e.user.currentUser,hidden:e.cart.hidden}}))((function(e){var t=e.currentUser,n=e.hidden;return(0,Nt.jsxs)("div",{className:"header",children:[(0,Nt.jsx)(Ze,{className:"logo-container",to:"/",children:(0,Nt.jsx)(wt,{className:"logo"})}),(0,Nt.jsxs)("div",{className:"options",children:[(0,Nt.jsx)(Ze,{className:"option",to:"/shop",children:"SHOP"}),(0,Nt.jsx)(Ze,{className:"option",to:"/contact",children:"CONTACT"}),t?(0,Nt.jsx)("div",{className:"option",onClick:function(){return CT.signOut()},children:"SIGN OUT"}):(0,Nt.jsx)(Ze,{className:"option",to:"/signin",children:"SIGN IN"}),(0,Nt.jsx)(At,{})]}),n?null:(0,Nt.jsx)(LT,{})]})})),FT=function(e){var t=e.title,n=e.imageUrl,r=e.size,i=ne();return(0,Nt.jsxs)("div",{className:"menu-item ".concat(r),onClick:function(){return i("/".concat(t))},children:[(0,Nt.jsx)("div",{style:{backgroundImage:"url(".concat(n,")")},className:"background-image"}),(0,Nt.jsxs)("div",{className:"content",children:[(0,Nt.jsx)("h1",{className:"title",children:t.toUpperCase()}),(0,Nt.jsx)("span",{className:"subtitle",children:"SHOP NOW"})]})]})},UT=function(e){m(n,e);var t=w(n);function n(){var e;return h(this,n),(e=t.call(this)).state={sections:[{title:"hats",imageUrl:"https://i.ibb.co/cvpntL1/hats.png",id:1},{title:"jackets",imageUrl:"https://i.ibb.co/px2tCc3/jackets.png",id:2},{title:"sneakers",imageUrl:"https://i.ibb.co/0jqHpnp/sneakers.png",id:3},{title:"womens",imageUrl:"https://i.ibb.co/GCCdy8t/womens.png",size:"large",id:4},{title:"mens",imageUrl:"https://i.ibb.co/R70vBrQ/men.png",size:"large",id:5}]},e}return p(n,[{key:"render",value:function(){return(0,Nt.jsx)("div",{className:"directory-menu",children:this.state.sections.map((function(e){var t=e.title,n=e.imageUrl,r=e.id,i=e.size;return(0,Nt.jsx)(FT,{title:t,imageUrl:n,size:i},r)}))})}}]),n}(r.Component),VT=UT,jT=function(){return(0,Nt.jsx)("div",{className:"homepage",children:(0,Nt.jsx)(VT,{})})},BT=Ge(null,(function(e){return{addItem:function(t){return e(function(e){return{type:_t,payload:e}}(t))}}}))((function(e){var t=e.item,n=e.addItem,r=t.name,i=t.price,a=t.imageUrl;return(0,Nt.jsxs)("div",{className:"collection-item",children:[(0,Nt.jsx)("div",{className:"image",style:{backgroundImage:"url(".concat(a,")")}}),(0,Nt.jsxs)("div",{className:"collection-footer",children:[(0,Nt.jsx)("span",{className:"name",children:r}),(0,Nt.jsxs)("span",{className:"price",children:["$",i]})]}),(0,Nt.jsx)(OT,{inverted:!0,onClick:function(){return n(t)},children:"Add to cart"})]})})),zT=function(e){var t=e.title,n=e.items;return(0,Nt.jsxs)("div",{className:"collection-preview",children:[(0,Nt.jsx)("h1",{className:"title",children:t.toUpperCase()}),(0,Nt.jsx)("div",{className:"preview",children:n.filter((function(e,t){return t<4})).map((function(e){return(0,Nt.jsx)(BT,{item:e},e.id)}))})]})},qT=[{id:1,title:"Hats",routeName:"hats",items:[{id:1,name:"Brown Brim",imageUrl:"https://i.ibb.co/ZYW3VTp/brown-brim.png",price:25},{id:2,name:"Blue Beanie",imageUrl:"https://i.ibb.co/ypkgK0X/blue-beanie.png",price:18},{id:3,name:"Brown Cowboy",imageUrl:"https://i.ibb.co/QdJwgmp/brown-cowboy.png",price:35},{id:4,name:"Grey Brim",imageUrl:"https://i.ibb.co/RjBLWxB/grey-brim.png",price:25},{id:5,name:"Green Beanie",imageUrl:"https://i.ibb.co/YTjW3vF/green-beanie.png",price:18},{id:6,name:"Palm Tree Cap",imageUrl:"https://i.ibb.co/rKBDvJX/palm-tree-cap.png",price:14},{id:7,name:"Red Beanie",imageUrl:"https://i.ibb.co/bLB646Z/red-beanie.png",price:18},{id:8,name:"Wolf Cap",imageUrl:"https://i.ibb.co/1f2nWMM/wolf-cap.png",price:14},{id:9,name:"Blue Snapback",imageUrl:"https://i.ibb.co/X2VJP2W/blue-snapback.png",price:16}]},{id:2,title:"Sneakers",routeName:"sneakers",items:[{id:10,name:"Adidas NMD",imageUrl:"https://i.ibb.co/0s3pdnc/adidas-nmd.png",price:220},{id:11,name:"Adidas Yeezy",imageUrl:"https://i.ibb.co/dJbG1cT/yeezy.png",price:280},{id:12,name:"Black Converse",imageUrl:"https://i.ibb.co/bPmVXyP/black-converse.png",price:110},{id:13,name:"Nike White AirForce",imageUrl:"https://i.ibb.co/1RcFPk0/white-nike-high-tops.png",price:160},{id:14,name:"Nike Red High Tops",imageUrl:"https://i.ibb.co/QcvzydB/nikes-red.png",price:160},{id:15,name:"Nike Brown High Tops",imageUrl:"https://i.ibb.co/fMTV342/nike-brown.png",price:160},{id:16,name:"Air Jordan Limited",imageUrl:"https://i.ibb.co/w4k6Ws9/nike-funky.png",price:190},{id:17,name:"Timberlands",imageUrl:"https://i.ibb.co/Mhh6wBg/timberlands.png",price:200}]},{id:3,title:"Jackets",routeName:"jackets",items:[{id:18,name:"Black Jean Shearling",imageUrl:"https://i.ibb.co/XzcwL5s/black-shearling.png",price:125},{id:19,name:"Blue Jean Jacket",imageUrl:"https://i.ibb.co/mJS6vz0/blue-jean-jacket.png",price:90},{id:20,name:"Grey Jean Jacket",imageUrl:"https://i.ibb.co/N71k1ML/grey-jean-jacket.png",price:90},{id:21,name:"Brown Shearling",imageUrl:"https://i.ibb.co/s96FpdP/brown-shearling.png",price:165},{id:22,name:"Tan Trench",imageUrl:"https://i.ibb.co/M6hHc3F/brown-trench.png",price:185}]},{id:4,title:"Womens",routeName:"womens",items:[{id:23,name:"Blue Tanktop",imageUrl:"https://i.ibb.co/7CQVJNm/blue-tank.png",price:25},{id:24,name:"Floral Blouse",imageUrl:"https://i.ibb.co/4W2DGKm/floral-blouse.png",price:20},{id:25,name:"Floral Dress",imageUrl:"https://i.ibb.co/KV18Ysr/floral-skirt.png",price:80},{id:26,name:"Red Dots Dress",imageUrl:"https://i.ibb.co/N3BN1bh/red-polka-dot-dress.png",price:80},{id:27,name:"Striped Sweater",imageUrl:"https://i.ibb.co/KmSkMbH/striped-sweater.png",price:45},{id:28,name:"Yellow Track Suit",imageUrl:"https://i.ibb.co/v1cvwNf/yellow-track-suit.png",price:135},{id:29,name:"White Blouse",imageUrl:"https://i.ibb.co/qBcrsJg/white-vest.png",price:20}]},{id:5,title:"Mens",routeName:"mens",items:[{id:30,name:"Camo Down Vest",imageUrl:"https://i.ibb.co/xJS0T3Y/camo-vest.png",price:325},{id:31,name:"Floral T-shirt",imageUrl:"https://i.ibb.co/qMQ75QZ/floral-shirt.png",price:20},{id:32,name:"Black & White Longsleeve",imageUrl:"https://i.ibb.co/55z32tw/long-sleeve.png",price:25},{id:33,name:"Pink T-shirt",imageUrl:"https://i.ibb.co/RvwnBL8/pink-shirt.png",price:25},{id:34,name:"Jean Long Sleeve",imageUrl:"https://i.ibb.co/VpW4x5t/roll-up-jean-shirt.png",price:40},{id:35,name:"Burgundy T-shirt",imageUrl:"https://i.ibb.co/mh3VM1f/polka-dot-shirt.png",price:25}]}],KT=["id"],WT=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).state={collections:qT},r}return p(n,[{key:"render",value:function(){var e=this.state.collections;return(0,Nt.jsx)("div",{className:"shop-page",children:e.map((function(e){var t=e.id,n=PT(e,KT);return(0,Nt.jsx)(zT,c({},n),t)}))})}}]),n}(r.Component),GT=WT,HT=["handleChange","label"],QT=function(e){var t=e.handleChange,n=e.label,r=PT(e,HT);return(0,Nt.jsxs)("div",{className:"group",children:[(0,Nt.jsx)("input",c({className:"form-input",onChange:t},r)),n?(0,Nt.jsx)("label",{className:"".concat(r.value.length?"shrink":""," form-input-label "),children:n}):null]})},$T=function(e){m(n,e);var t=w(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).handleSubmit=function(){var e=f(o().mark((function e(t){var n,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.state,i=n.email,a=n.password,e.prev=2,e.next=5,CT.signInWithEmailAndPassword(i,a);case 5:r.setState({email:"",password:""}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(e){var t=e.target,n=t.value,i=t.name;r.setState(u({},i,n))},r.state={email:"",password:""},r}return p(n,[{key:"render",value:function(){return(0,Nt.jsxs)("div",{className:"sign-in",children:[(0,Nt.jsx)("h2",{className:"title",children:"I already have an account"}),(0,Nt.jsx)("span",{children:"Sign in with your email and password"}),(0,Nt.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,Nt.jsx)(QT,{label:"Email",name:"email",type:"email",value:this.state.email,handleChange:this.handleChange,required:!0}),(0,Nt.jsx)(QT,{label:"Password",name:"password",type:"password",value:this.state.password,handleChange:this.handleChange,required:!0}),(0,Nt.jsxs)("div",{className:"buttons",children:[(0,Nt.jsx)(OT,{type:"submit",children:"Sing In"}),(0,Nt.jsx)(OT,{isGoogleSignIn:!0,onClick:DT,children:"Sing In with Google"})]})]})]})}}]),n}(r.Component),YT=$T,JT=function(e){m(n,e);var t=w(n);function n(){var e;return h(this,n),(e=t.call(this)).hamdleSunmit=function(){var t=f(o().mark((function t(n){var r,i,a,u,s,c,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state,i=r.displayName,a=r.email,u=r.password,s=r.confirmPassword,u===s){t.next=5;break}return alert("paswords don't match"),t.abrupt("return");case 5:return t.prev=5,t.next=8,CT.createUserWithEmailAndPassword(a,u);case 8:c=t.sent,l=c.user,TT(l,{displayName:i}),e.setState({displayName:"",email:"",password:"",confirmPassword:""}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),console.error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var n=t.target,r=n.name,i=n.value;e.setState(u({},r,i))},e.state={displayName:"",email:"",password:"",confirmPassword:""},e}return p(n,[{key:"render",value:function(){var e=this.state,t=e.displayName,n=e.email,r=e.password,i=e.confirmPassword;return(0,Nt.jsxs)("div",{className:"sign-up",children:[(0,Nt.jsx)("h2",{className:"title",children:"I do not have an account"}),(0,Nt.jsx)("span",{children:"Sing up with your email and password"}),(0,Nt.jsxs)("form",{className:"sign-up-form",onSubmit:this.hamdleSunmit,children:[(0,Nt.jsx)(QT,{type:"text",name:"displayName",value:t,onChange:this.handleChange,label:"Display Name",required:!0}),(0,Nt.jsx)(QT,{type:"email",name:"email",value:n,onChange:this.handleChange,label:"Email",required:!0}),(0,Nt.jsx)(QT,{type:"password",name:"password",value:r,onChange:this.handleChange,label:"Password",required:!0}),(0,Nt.jsx)(QT,{type:"password",name:"confirmPassword",value:i,onChange:this.handleChange,label:"Confirm Password",required:!0}),(0,Nt.jsx)(OT,{type:"submit",children:"Sign Up"})]})]})}}]),n}(r.Component),XT=JT,ZT=function(){return(0,Nt.jsxs)("div",{className:"sign-in-and-sign-up",children:[(0,Nt.jsx)(YT,{}),(0,Nt.jsx)(XT,{})]})},eC="SET_CURRENT_USER",tC=function(e){m(n,e);var t=w(n);function n(){var e;h(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).unsubscribeFromAuth=null,e}return p(n,[{key:"componentDidMount",value:function(){var e=this.props.setCurrentUser;this.unsubscribeFromAuth=CT.onAuthStateChanged(function(){var t=f(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=7;break}return t.next=3,TT(n);case 3:t.sent.onSnapshot((function(t){e(c({id:t.id},t.data()))})),t.next=8;break;case 7:e(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){return console.log(this.props.currentUser),(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)(MT,{}),(0,Nt.jsxs)(se,{children:[(0,Nt.jsx)(oe,{exact:!0,path:"/",element:(0,Nt.jsx)(jT,{})}),(0,Nt.jsx)(oe,{path:"/shop",element:(0,Nt.jsx)(GT,{})}),(0,Nt.jsx)(oe,{path:"/signin",element:this.props.currentUser?(0,Nt.jsx)(ae,{to:"/",replace:!0}):(0,Nt.jsx)(ZT,{})}),(0,Nt.jsx)(oe,{path:"*",element:(0,Nt.jsx)("h1",{children:"Oops! There is no such a page :-("})})]})]})}}]),n}(r.Component),nC=Ge((function(e){return{setCurrentUser:e.user.currentUser}}),(function(e){return{setCurrentUser:function(t){return e(function(e){return{type:eC,payload:e}}(t))}}}))(tC);function rC(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var iC="function"===typeof Symbol&&Symbol.observable||"@@observable",aC=function(){return Math.random().toString(36).substring(7).split("").join(".")},oC={INIT:"@@redux/INIT"+aC(),REPLACE:"@@redux/REPLACE"+aC(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+aC()}};function uC(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function sC(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(rC(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(rC(1));return n(sC)(e,t)}if("function"!==typeof e)throw new Error(rC(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(rC(3));return a}function f(e){if("function"!==typeof e)throw new Error(rC(4));if(s)throw new Error(rC(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(rC(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!uC(e))throw new Error(rC(7));if("undefined"===typeof e.type)throw new Error(rC(8));if(s)throw new Error(rC(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(rC(10));i=e,h({type:oC.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(rC(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[iC]=function(){return this},e}return h({type:oC.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[iC]=p,r}function cC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var lC=n(896),fC=n.n(lC),hC={currentUser:null},dC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hC,t=arguments.length>1?arguments[1]:void 0;return t.type===eC?c(c({},e),{},{currentUser:t.payload}):e},pC=function(e,t){return e.find((function(e){return e.id===t.id}))?e.map((function(e){return e.id===t.id?c(c({},e),{},{quantity:e.quantity+1}):e})):[].concat(ge(e),[c(c({},t),{},{quantity:1})])},vC={hidden:!0,cartItems:[]},mC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vC,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xt:return c(c({},e),{},{hidden:!e.hidden});case _t:return c(c({},e),{},{cartItems:pC(e.cartItems,t.payload)});default:return e}},yC=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:oC.INIT}))throw new Error(rC(12));if("undefined"===typeof n(void 0,{type:oC.PROBE_UNKNOWN_ACTION()}))throw new Error(rC(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(rC(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({user:dC,cart:mC}),gC=sC(yC,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(rC(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=cC.apply(void 0,a)(n.dispatch),c(c({},n),{},{dispatch:r})}}}(fC())),kC=gC;i.createRoot(document.getElementById("root")).render((0,Nt.jsx)(He,{store:kC,children:(0,Nt.jsx)(Xe,{children:(0,Nt.jsx)(nC,{})})}))}()}();
//# sourceMappingURL=main.484b6b78.js.map